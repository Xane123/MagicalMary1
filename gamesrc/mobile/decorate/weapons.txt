
Actor XWeapon : Weapon
{
States
{
//Required states
Ready:
TNT1 A 35
Loop
Fire:
TNT1 A 35
Goto ReadyX
Select:
TNT1 A 35
Goto Raise
Raise:
"####" "#" 0 A_Raise
"####" "#" 1 A_Raise
Loop
Deselect:
Lower:
"####" "#" 0 A_Lower
"####" "#" 1 A_Lower
Loop
}
}

actor Wand_IntroDone : Inventory { Inventory.MaxAmount 1 }
actor Wand_StarTics : Inventory { Inventory.MaxAmount 7 }
actor Wand_CancelMG : Inventory { Inventory.MaxAmount 1 }
ACTOR Wand_MGShots : Inventory { Inventory.MaxAmount 20 }
actor Wand_Type : Inventory { Inventory.MaxAmount 3 }
actor MaryUmbrella_Intro : Inventory { Inventory.MaxAmount 3 }
actor Hammer_SlamDamage : Inventory { Inventory.MaxAmount 4 }

actor HammerUpgrades : Inventory { Inventory.MaxAmount 4 }
actor UmbrellaUpgrades : Inventory { Inventory.MaxAmount 2 }
actor SwordUpgrades : Inventory { Inventory.MaxAmount 2 }

actor PlayerNumberX : Inventory { Inventory.MaxAmount 8 }
actor RequestBall1 : Inventory { Inventory.MaxAmount 3 }
actor RequestBall2 : Inventory { Inventory.MaxAmount 3 }
actor RequestBall3 : Inventory { Inventory.MaxAmount 3 }

Actor MaryWand : XWeapon
{
+WEAPON.NOALERT
States
{
Ready:
TNT1 A 0
TNT1 A 0 ACS_NamedExecute("GotWeapon",0,3,TRUE,0)	//Mark the wand as gotten.
TNT1 A 0 A_JumpIfInventory("Wand_Type",1,"Shield")
//Flower intro
WNFI A 0 A_JumpIfInventory("Wand_IntroDone",1,"FlowerReady")
WNFI DEF 2
WNFI GHI 3
WNFI JKLMNOOPQQQP 2
WNFI P 0 A_GiveInventory("Wand_IntroDone",1)
FlowerReady:
UMBR U 0 A_JumpIfInventory("RequestBall3",1,"ThrowBall3")
UMBR U 0 A_JumpIfInventory("RequestBall2",1,"ThrowBall2")
UMBR U 0 A_JumpIfInventory("RequestBall1",1,"ThrowBall1")
WNFI A 2 A_WeaponReady
Loop

Shield:
TNT1 A 0 A_JumpIfInventory("Wand_IntroDone",1,"ShieldReady")
WNPI DEF 2
WNPI GHI 3
WNPI JKLMNOOPQQQP 2
WNPI P 0 A_GiveInventory("Wand_IntroDone",1)
ShieldReady:
UMBR U 0 A_JumpIfInventory("RequestBall3",1,"ThrowBall3")
UMBR U 0 A_JumpIfInventory("RequestBall2",1,"ThrowBall2")
UMBR U 0 A_JumpIfInventory("RequestBall1",1,"ThrowBall1")
WNPI A 2 A_WeaponReady
Loop

//ATTACKS
Fire:
TNT1 A 0 A_JumpIfInventory("Wand_Type",1,"ShieldFire")
//Flower fire
WNF1 A 0 A_PlaySound("wand/charge",CHAN_WEAPON,1.0,FALSE)
WNF1 ABC 3
WNF1 C 0 A_ReFire("Charge1")
Goto FlowerMG1
FlowerCancel:
WNF1 C 0 A_StopSound(CHAN_WEAPON)
WNF1 CCCBBAAA 1
Goto FlowerReady
Charge1:	//Machine gun (#1)
WNF1 DEDE 2
WNF1 C 0 A_ReFire("Charge2")
Goto FlowerMG1
Charge2:
WNF1 FGFG 2
WNF1 C 0 A_ReFire("Charge3")
Goto FlowerRow
Charge3:	//Row (#2)
WNF1 HIHI 2
WNF1 C 0 A_ReFire("Charge4")
Goto FlowerRow
Charge4:
WNF1 JKJK 2
WNF1 C 0 A_ReFire("Charge5")
Goto FlowerBlow
Charge5:	//Unknown (#3)
WNF1 LMLM 2
WNF1 C 0 A_ReFire("Charge6")
Goto FlowerBlow
Charge6:
WNF1 NONO 2
WNF1 C 0 A_ReFire("Charge7")
Goto FlowerIce
Charge7:	//Ice (#4)
WNF1 PQPQ 2
WNF1 C 0 A_ReFire("Charge8")
Goto FlowerIce
Charge8:	//Fire (#4)
WNF1 RSRS 2
WNF1 C 0 A_ReFire("Charge8")
Goto FlowerFire
FlowerFire:
WNF3 A 0 A_StopSound(CHAN_WEAPON)
WNF3 AB 3
WNF3 CCDEF 2
WNF3 G 3 A_ReFire("FlowerFireHold")
FlowerFireShoot:
WNF3 J 0 A_FireCustomMissile("FlowerProjectile3_1P")
WNF3 JKKGGGGHII 4
Goto FlowerReady
FlowerFireHold:
WNF3 G 2
WNF3 G 0 A_ReFire("FlowerFireHold")
Goto FlowerFireShoot
FlowerIce:
WNF3 A 0 A_StopSound(CHAN_WEAPON)
WNF3 AB 3
WNF3 CCDEF 2
WNF3 G 3 A_ReFire("FlowerIceHold")
FlowerIceShoot:
WNF3 J 0 A_FireCustomMissile("FlowerProjectile5_1P")
WNF3 JKKGGGGHII 4
Goto FlowerReady
FlowerIceHold:
WNF3 G 2
WNF3 G 0 A_ReFire("FlowerIceHold")
Goto FlowerIceShoot
FlowerRow:
WNF2 A 0 A_StopSound(CHAN_WEAPON)
WNF2 ABC 3
WNF2 D 1 { A_PlaySound("wand/fire1",CHAN_WEAPON,1.0,FALSE,0.65); A_FireCustomMissile("FlowerProjectile2_1P",0,FALSE,42,22.0); }
WNF2 D 1 { A_PlaySound("wand/fire1",CHAN_WEAPON,1.0,FALSE,0.65); A_FireCustomMissile("FlowerProjectile2_1P",0,FALSE,30,19.5); }
WNF2 E 1 { A_PlaySound("wand/fire1",CHAN_WEAPON,1.0,FALSE,0.65); A_FireCustomMissile("FlowerProjectile2_1P",0,FALSE,24,17.0); }
WNF2 E 1 { A_PlaySound("wand/fire1",CHAN_WEAPON,1.0,FALSE,0.65); A_FireCustomMissile("FlowerProjectile2_1P",0,FALSE,12,14.5); }
WNF2 F 1 { A_PlaySound("wand/fire1",CHAN_WEAPON,1.0,FALSE,0.65); A_FireCustomMissile("FlowerProjectile2_1P",0,FALSE,0,12.0); }
WNF2 F 1 { A_PlaySound("wand/fire1",CHAN_WEAPON,1.0,FALSE,0.65); A_FireCustomMissile("FlowerProjectile2_1P",0,FALSE,-12,11.0); }
WNF2 G 1 { A_PlaySound("wand/fire1",CHAN_WEAPON,1.0,FALSE,0.65); A_FireCustomMissile("FlowerProjectile2_1P",0,FALSE,-24,10.0); }
WNF2 G 1 { A_PlaySound("wand/fire1",CHAN_WEAPON,1.0,FALSE,0.65); A_FireCustomMissile("FlowerProjectile2_1P",0,FALSE,-30,9.0); }
WNF2 H 12 { A_PlaySound("wand/fire1",CHAN_WEAPON,1.0,FALSE,0.65); A_FireCustomMissile("FlowerProjectile2_1P",0,FALSE,-42,8.0); }
WNF2 I 5
WNF2 JK 3
Goto FlowerReady

FlowerBlow:
WNF2 L 0 A_StopSound(CHAN_WEAPON)
WNF2 L 0 A_PlaySound("wand/blow",CHAN_WEAPON,1.0)
WNF2 LLLMMNOPP 2
WNF2 Q 6
FlowerBlow1:
WNF2 Q 0 A_Jump(128,"FlowerBlow1A","FlowerBlow1C")
FlowerBlow1B:
WNF2 Q 2 A_FireCustomMissile("FlowerProjectile4B_1P",0,FALSE,0,8)
Goto FlowerBlow2
FlowerBlow1A:
WNF2 Q 2 A_FireCustomMissile("FlowerProjectile4A_1P",0,FALSE,0,8)
Goto FlowerBlow2
FlowerBlow1C:
WNF2 Q 2 A_FireCustomMissile("FlowerProjectile4C_1P",0,FALSE,0,8)
FlowerBlow2:
WNF2 Q 0 A_Jump(128,"FlowerBlow2A","FlowerBlow2C")
FlowerBlow2B:
WNF2 Q 2 A_FireCustomMissile("FlowerProjectile4B_1P",-5,FALSE,0,8)
Goto FlowerBlow3
FlowerBlow2A:
WNF2 Q 2 A_FireCustomMissile("FlowerProjectile4A_1P",-5,FALSE,0,8)
Goto FlowerBlow3
FlowerBlow2C:
WNF2 Q 2 A_FireCustomMissile("FlowerProjectile4C_1P",-5,FALSE,0,8)
FlowerBlow3:
WNF2 Q 0 A_Jump(128,"FlowerBlow3A","FlowerBlow3C")
FlowerBlow3B:
WNF2 Q 2 A_FireCustomMissile("FlowerProjectile4B_1P",5,FALSE,0,8)
Goto FlowerBlow4
FlowerBlow3A:
WNF2 Q 2 A_FireCustomMissile("FlowerProjectile4A_1P",5,FALSE,0,8)
Goto FlowerBlow4
FlowerBlow3C:
WNF2 Q 2 A_FireCustomMissile("FlowerProjectile4C_1P",5,FALSE,0,8)
FlowerBlow4:
WNF2 Q 0 A_Jump(128,"FlowerBlow4A","FlowerBlow4C")
FlowerBlow4B:
WNF2 Q 2 A_FireCustomMissile("FlowerProjectile4B_1P",-1.75,FALSE,0,8)
Goto FlowerBlow5
FlowerBlow4A:
WNF2 Q 2 A_FireCustomMissile("FlowerProjectile4A_1P",-1.75,FALSE,0,8)
Goto FlowerBlow5
FlowerBlow4C:
WNF2 Q 2 A_FireCustomMissile("FlowerProjectile4C_1P",-1.75,FALSE,0,8)
FlowerBlow5:
WNF2 Q 0 A_Jump(128,"FlowerBlow5A","FlowerBlow5C")
FlowerBlow5B:
WNF2 Q 3 A_FireCustomMissile("FlowerProjectile4B_1P",1.75,FALSE,0,8)
Goto FlowerBlow6
FlowerBlow5A:
WNF2 Q 3 A_FireCustomMissile("FlowerProjectile4A_1P",1.75,FALSE,0,8)
Goto FlowerBlow6
FlowerBlow5C:
WNF2 Q 3 A_FireCustomMissile("FlowerProjectile4C_1P",1.75,FALSE,0,8)
FlowerBlow6:
WNF2 Q 0 A_Jump(128,"FlowerBlow6A","FlowerBlow6C")
FlowerBlow6B:
WNF2 Q 3 A_FireCustomMissile("FlowerProjectile4B_1P",2.63,FALSE,0,8)
Goto FlowerBlow7
FlowerBlow6A:
WNF2 Q 3 A_FireCustomMissile("FlowerProjectile4A_1P",2.63,FALSE,0,8)
Goto FlowerBlow7
FlowerBlow6C:
WNF2 Q 3 A_FireCustomMissile("FlowerProjectile4C_1P",2.63,FALSE,0,8)
FlowerBlow7:
WNF2 Q 0 A_Jump(128,"FlowerBlow7A","FlowerBlow7C")
FlowerBlow7B:
WNF2 Q 4 A_FireCustomMissile("FlowerProjectile4B_1P",-2.63,FALSE,0,8)
Goto FlowerBlow8
FlowerBlow7A:
WNF2 Q 4 A_FireCustomMissile("FlowerProjectile4A_1P",-2.63,FALSE,0,8)
Goto FlowerBlow8
FlowerBlow7C:
WNF2 Q 4 A_FireCustomMissile("FlowerProjectile4C_1P",-2.63,FALSE,0,8)
FlowerBlow8:
WNF2 Q 0 A_Jump(128,"FlowerBlow8A","FlowerBlow8C")
FlowerBlow8B:
WNF2 Q 5 A_FireCustomMissile("FlowerProjectile4B_1P",0,FALSE,0,8)
Goto FlowerBlowEnd
FlowerBlow8A:
WNF2 Q 5 A_FireCustomMissile("FlowerProjectile4A_1P",0,FALSE,0,8)
Goto FlowerBlowEnd
FlowerBlow8C:
WNF2 Q 5 A_FireCustomMissile("FlowerProjectile4C_1P",0,FALSE,0,8)
FlowerBlowEnd:
WNF2 Q 17
WNF2 PPRSTT 3
Goto FlowerReady

FlowerMG1:
WNF3 AB 2 A_StopSound(CHAN_WEAPON)
WNF3 CC 2 A_ReFire("FlowerMGPunish1")
WNF3 DE 2 A_ReFire("FlowerMGPunish2")
WNF3 F 2 A_ReFire("FlowerMGPunish3")
WNF3 GGGGGGGGGGGG 3 A_ReFire("FlowerMG2")
Goto FlowerMGEnd
FlowerMGPunish1:
WNF3 DE 2
FlowerMGPunish2:
WNF3 FG 2
FlowerMGPunish3:
WNF3 GFFEDCCBA 2
Goto FlowerReady
FlowerMG2:
WNF3 J 0 A_JumpIfInventory("Wand_MGShots",9,"FlowerMG3")
WNF3 J 0 A_GiveInventory("Wand_MGShots",1)
WNF3 J 0 A_PlaySound("wand/fire1",CHAN_WEAPON,1.0,FALSE,0.65)
WNF3 J 2 A_FireCustomMissile("FlowerProjectile1_1P")
WNF3 KG 2
WNF3 G 2 A_ReFire("FlowerMG2")
Goto FlowerMGEnd
FlowerMG3:
WNF3 J 0 A_JumpIfInventory("Wand_MGShots",18,"FlowerMG4")
WNF3 J 0 A_GiveInventory("Wand_MGShots",1)
WNF3 J 0 A_PlaySound("wand/fire1",CHAN_WEAPON,1.0,FALSE,0.65)
WNF3 J 3 A_FireCustomMissile("FlowerProjectile1_1P")
WNF3 KG 3
WNF3 G 3 A_ReFire("FlowerMG3")
Goto FlowerMGEnd
FlowerMG4:
WNF3 J 0 A_GiveInventory("Wand_MGShots",1)
WNF3 J 0 A_PlaySound("wand/fire1",CHAN_WEAPON,1.0,FALSE,0.65)
WNF3 J 4 A_FireCustomMissile("FlowerProjectile1_1P")
WNF3 KG 4
WNF3 G 4 A_ReFire("FlowerMG4")
Goto FlowerMGEnd
FlowerMGEnd:
WNF3 HI 3 A_TakeInventory("Wand_MGShots",20)
Goto FlowerReady
FlowerMGCancel:
WNF3 F 4
WNF3 EDCCBA 3
Goto FlowerReady

ShieldFire:
WNP1 ABBA 2
WNPI A 2
WNP1 C 2
WWP1 I 0 A_PlaySound("wand/shield", CHAN_WEAPON, 1.0)
SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
WNP1 D 2
WNP1 EFGHI 4
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
TNT1 A 0 A_JumpIfInventory("SuperX",1,"ShieldEnd2")
SWDA A 0 A_ReFire("ShieldStart")
ShieldEnd2:
WNP1 DC 2
Goto ShieldReady
ShieldStart:
WNP1 I 0 ACS_NamedExecuteAlways("Wand_Special",0,0,0,0)
WWP1 I 0 A_PlaySound("wand/shield_heal", CHAN_WEAPON, 1.0, TRUE)
ShieldHeal:
WNP1 HG 3 A_JumpIfInventory("Crying",1,"ShieldEnd1")
WNP1 FEEEF 3 BRIGHT	 A_JumpIfInventory("Crying",1,"ShieldEnd1")
WNP1 GHIII 3 A_JumpIfInventory("Crying",1,"ShieldEnd1")
WNP1 I 0 A_ReFire("ShieldHeal")
ShieldEnd1:
WNP1 I 0 ACS_NamedExecuteAlways("Wand_Special",0,1,0,0)
WNP1 I 0 A_StopSound(CHAN_WEAPON)
Goto ShieldEnd2

//Alternate fire
//SWITCH WEAPONS
AltFire:
TNT1 A 0 A_JumpIfInventory("Wand_Type",1,"ShieldChange")

WNFI BC 2 A_TakeInventory("Wand_IntroDone",1)	//Flower change
WNSI Z 6 A_GiveInventory("Wand_Type",1)
Goto Ready
ShieldChange:
WNPI BC 2 A_TakeInventory("Wand_IntroDone",1)	//Flower change
WNHI Z 6 A_TakeInventory("Wand_Type",1)
Goto Ready
Select:
TNT1 A 0
Goto Raise
Deselect:
"####" BC 2
TNT1 A 0 A_TakeInventory("Wand_IntroDone",1)
Goto Lower
//Common code
ThrowBall1:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall1",0,0,0,-8,0,12)
TNT1 A 0 A_TakeInventory("RequestBall1",1)
Goto Ready
ThrowBall2:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall2",0,0,0,-8,0,10)
TNT1 A 0 A_TakeInventory("RequestBall2",1)
Goto Ready
ThrowBall3:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall3",0,0,0,-8,0,9)
TNT1 A 0 A_TakeInventory("RequestBall3",1)
Goto Ready
}
}

Actor FlowerProjectile1_1P
{
Radius 4
Height 8
Damage (0)	//Explosions are double of what's specified here!
Speed 48
Scale 0.13
RenderStyle Add
PROJECTILE
+PAINLESS
States
{
Spawn:
PART A 1 A_RadiusGive("Projectile1",320,RGF_MONSTERS) 
Loop
Death:
TNT1 A 0
TNT1 A 5 A_Explode((5),12,!XF_HURTSOURCE,FALSE,12)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}

Actor FlowerProjectile2_1P
{
Radius 8
Height 16
Damage (0)	//Explosions are double of what's specified here!
Speed 32
Scale 0.25
RenderStyle Add
PROJECTILE
States
{
Spawn:
PART A 1 A_RadiusGive("Projectile1",320,RGF_MONSTERS) 
Loop
Death:
TNT1 A 0
TNT1 A 5 A_Explode((7),12,!XF_HURTSOURCE,FALSE,12)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}

Actor FlowerProjectile3_1P	//Fireball
{
Radius 12
Height 24
Damage (0)	//Don't specify this or problems will happen.
Speed 28
Scale 0.34
Gravity 2
Args 0
RenderStyle Add
DamageType Fire
PROJECTILE
Translation "241:253=216:222"
States
{
Spawn:
FIGH B 0 NoDelay A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART A 0 A_SetScale(0.34)
TNT1 A 0 A_RadiusGive("Projectile2",320,RGF_MONSTERS)
PART A 1 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
PART A 0 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_RadiusGive("Projectile2",320,RGF_MONSTERS)
PART A 1 A_SetScale(scalex+0.05)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART A 1 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
PART A 0 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_RadiusGive("Projectile2",320,RGF_MONSTERS)
PART A 1 A_SetScale(scalex+0.05)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART A 1 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
PART A 0 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_RadiusGive("Projectile2",320,RGF_MONSTERS)
PART A 1 A_SetScale(scalex+0.05)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART A 1 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
PART A 0 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_RadiusGive("Projectile2",320,RGF_MONSTERS)
PART A 1 A_SetScale(scalex+0.05)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART AAAAAAAA 1 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
PART A 1 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
PART A 0 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_RadiusGive("Projectile2",320,RGF_MONSTERS)
PART A 1 A_SetScale(scalex-0.05)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART A 1 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
PART A 0 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_RadiusGive("Projectile2",320,RGF_MONSTERS)
PART A 1 A_SetScale(scalex-0.05)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART A 1 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
PART A 0 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_RadiusGive("Projectile2",320,RGF_MONSTERS)
PART A 1 A_SetScale(scalex-0.05)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART A 1 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
PART A 0 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_RadiusGive("Projectile2",320,RGF_MONSTERS)
PART A 1 A_SetScale(scalex-0.05)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART AAAAAAAA 1 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(-3.5,3.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
Loop
Launch:
PART A 0 A_ChangeFlag("NOGRAVITY",FALSE)
PART A 1 A_GiveInventory("Variable1",1)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
Goto Spawn
Death:
TNT1 A 0
TNT1 AAAAAAAA 0 A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,0,Random(-7.5,7.5),Random(-7.5,7.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItem("PlayerFire_1P",0,0,FALSE)
TNT1 A 0 A_Explode((35),24,!XF_HURTSOURCE,FALSE,24)
TNT1 A 0 A_JumpIfInventory("Variable1",1,"Explode")	//If this fireball was fired off a spring, make it explode when it hits the ground.
FadeOut:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
TNT1 A 1 A_FadeOut(0.5,1)
Loop
Water:
PART A 1 { A_FadeOut(0.05,1); A_SetScale(scalex-0.02); A_SpawnParticle("DarkGrey",SPF_FULLBRIGHT|SPF_INTERPOLATE|SPF_RELPOS,35,Random(7,9),0,Random(-6.5,6.5),Random(-6.5,6.5),Random(3.5,9.5),Random(-0.5,0.5),Random(-0.5,0.5),Random(1.75,2.5),0,0,0,0.75); }
Loop
Explode:
TNT1 AAAAAAAAAAAA 1 { A_SpawnItemEx("PlayerFireExplosion_1P", 0, 0, 0, 8.25, 0, 10.5, 0, SXF_NOCHECKPOSITION); A_Turn(30); }
Goto FadeOut
}
}
Actor FlowerProjectile5_1P : FlowerProjectile3_1P
{
Args 1
Translation "241:253=177:190"
States
{
Death:
TNT1 A 0 A_Log("Successfully intercepted death routine!")
Goto FadeOut
}
}

Actor FlowerProjectile4B_1P
{
	Radius 4
	Height 8
	Scale 1.13
	Damage (0)
	Speed 24
	Args 4, 3
	RenderStyle Add
	Translation "240:240=88:88", "244:244=90:90"
	PROJECTILE
	States
	{
	Spawn:
	GLAS A 0 A_Jump(128, "AlternativeGFX")
	NormalGFX:
	GLAS ABCDEFG 1 A_RadiusGive("Projectile1",320,RGF_MONSTERS)
	GLAS H 0 A_ChangeFlag("RIPPER",TRUE)
	GLAS HGFEDCB 1 { A_RadiusGive("Projectile1",320,RGF_MONSTERS); A_Explode((5),22,!XF_HURTSOURCE,FALSE,17); }
	GLAS ABCDEFGHGFEDCB 2 { A_Weave(1, 1, Args[0]+0.25, Args[1]-0.25); A_RadiusGive("Projectile1",320,RGF_MONSTERS); A_Explode((5),22,!XF_HURTSOURCE,FALSE,17); }
	GLAS ABCDEFGHGFEDCB 2 { A_Weave(2, 2, Args[0]+0.34, Args[1]-0.13); A_RadiusGive("Projectile1",320,RGF_MONSTERS); A_Explode((5),22,!XF_HURTSOURCE,FALSE,17); }
	NormalGFX_Loop:
	GLAS ABCDEFGHGFEDCB 2 { A_Weave(3, 3, Args[0]+0.5, Args[1]); A_RadiusGive("Projectile1",320,RGF_MONSTERS); A_FadeOut(0.08,1); A_Explode((5),22,!XF_HURTSOURCE,FALSE,17); }
	Loop
	AlternativeGFX:
	GLAS IJKLMNO 1 A_RadiusGive("Projectile1",320,RGF_MONSTERS)
	GLAS P 0 A_ChangeFlag("RIPPER",TRUE)
	GLAS PONMLKJ 1 { A_RadiusGive("Projectile1",320,RGF_MONSTERS); A_Explode((5),22,!XF_HURTSOURCE,FALSE,17); }
	GLAS IJKLMNOPONMLKJ 2 { A_Weave(1, 1, Args[0]+0.25, Args[1]-0.25); A_RadiusGive("Projectile1",320,RGF_MONSTERS); A_Explode((5),22,!XF_HURTSOURCE,FALSE,17); }
	GLAS IJKLMNOPONMLKJ 2 { A_Weave(2, 2, Args[0]+0.34, Args[1]-0.13); A_RadiusGive("Projectile1",320,RGF_MONSTERS); A_Explode((5),22,!XF_HURTSOURCE,FALSE,17); }
	AlternativeGFX_Loop:
	GLAS IJKLMNOPONMLKJ 2 { A_Weave(3, 3, Args[0]+0.5, Args[1]); A_RadiusGive("Projectile1",320,RGF_MONSTERS); A_FadeOut(0.08,1); A_Explode((5),22,!XF_HURTSOURCE,FALSE,17); }
	Loop
	Death:
	TNT1 A 1 A_FadeOut(1,1)
	Loop
	}
}
Actor FlowerProjectile4A_1P : FlowerProjectile4B_1P { Args 3, 2 WeaveIndexXY 16 WeaveIndexZ 42 }
Actor FlowerProjectile4C_1P : FlowerProjectile4B_1P { Args 4, 2 WeaveIndexXY 32 WeaveIndexZ 12 }


Actor PlayerFire_1P	//Fire
{
Radius 16
Height 28
Damage (0)	//Explosions are double of what's specified here!
Speed 16
Scale 0.45
RenderStyle Add
DamageType Fire
Translation "241:253=216:222"
States
{
Spawn:
PART A 0 NoDelay A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
Death:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.07); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.07); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.07); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART AA 2 { A_Explode(4,24,XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.07); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART AA 2 { A_Explode((4),24,XF_HURTSOURCE,FALSE,24); A_FadeOut(0.1,1); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART AA 2 { A_Explode((4),24,XF_HURTSOURCE,FALSE,24); A_FadeOut(0.1,1); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART AA 2 { A_Explode((4),24,XF_HURTSOURCE,FALSE,24); A_FadeOut(0.1,1); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex+0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART AA 2 { A_Explode((4),24,XF_HURTSOURCE,FALSE,24); A_FadeOut(0.1,1); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.07); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 2 { A_SetScale(scalex-0.05); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
PART AA 2 { A_Explode((4),24,XF_HURTSOURCE,FALSE,24); A_FadeOut(0.1,1); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); }
PART A 5 { A_SetScale(scalex-0.06); A_FadeOut(0.125,1); A_Explode((4),24,!XF_HURTSOURCE,FALSE,24); A_SpawnItemEx("FlowerProjectile3_Trail",0,0,0,Random(-3.5,3.5),Random(-3.5,3.5),Random(2.5,4.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION); } 
FadeOut:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,Args[0])>0,"Water")
TNT1 A 1 A_FadeOut(0.5,1)
Loop
Water:
PART A 1 { A_FadeOut(0.05,1); A_SetScale(scalex-0.02); A_SpawnParticle("DarkGrey",SPF_FULLBRIGHT|SPF_INTERPOLATE|SPF_RELPOS,35,Random(7,9),0,Random(-6.5,6.5),Random(-6.5,6.5),Random(3.5,9.5),Random(-0.5,0.5),Random(-0.5,0.5),Random(1.75,2.5),0,0,0,0.75); }
Loop
}
}

Actor PlayerFireExplosion_1P : PlayerFire_1P
{
Damage (0)
States
{
Spawn:
PART A 0
PART A 0 A_JumpIf(velz==0.0,"Death")
PART A 1 A_CheckFloor("Death")
Loop
Death:
TNT1 A 0 A_Explode((4),24,!XF_HURTSOURCE,FALSE,20)
TNT1 A 0 A_SpawnItem("PlayerFire_1P", 0, 0, FALSE, FALSE)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}


Actor FlowerProjectile3_Trail
{
Radius 3
Height 6
Scale 0.18
RenderStyle Add
Alpha 0.9
Translation "241:253=113:126"
-SOLID
+NOGRAVITY
States
{
Spawn:
PART A 1 A_FadeOut(0.1,1)
Loop
}
}

Actor HeartProjectile_1P
{
Radius 3
Height 6
Damage (125)
Speed 48
Scale 0.1
RenderStyle Add
Translation "240:254=80:87"
+RIPPER
PROJECTILE
States
{
Spawn:
PART A 0
PART AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_RadiusGive("Projectile2",320,RGF_MONSTERS)
Death:
TNT1 A 1 { A_FadeOut(0.25,1); A_RadiusGive("Projectile2",320,RGF_MONSTERS); }
Loop
}
}

Actor HeartProjectileInvisible_1P : HeartProjectile_1P { +INVISIBLE }

Actor HeartWand : XWeapon
{
+WEAPON.NOALERT
States
{
Ready:
TNT1 A 0
TNT1 A 0 ACS_NamedExecute("GotWeapon",0,3,TRUE,0)	//Mark the wand as gotten.
TNT1 A 50
WNHI DEF 2
WNHI GHI 3
WNHI JKLMNOOPQQQP 2
ReadyX:
TNT1 A 0 A_JumpIfInventory("SuperX",1,"HeartReadyConfirm")
Goto Deselect
HeartReadyConfirm:
UMBR U 0 A_JumpIfInventory("RequestBallThrow",3,"ThrowBall3")
UMBR U 0 A_JumpIfInventory("RequestBallThrow",2,"ThrowBall2")
UMBR U 0 A_JumpIfInventory("RequestBallThrow",1,"ThrowBall1")
WNHI A 2 A_WeaponReady
WNHI A 0 A_JumpIfInventory("FloorDetected",1,"Ready2")
Goto ReadyX
Ready2:
WNHI A 0 A_TakeInventory("MaryHammer_MidAirDone",1)
Goto ReadyX
Fire:
WNH1 A 4
WNH1 B 3
WNH1 CDEFGHIJKLMNOPQRSTU 2
WNH1 VW 2
WNH1 X 3
WNH1 Y 2
WNH2 ABCDEFGH 1
WNH2 A 0 A_ReFire("HeartSpin")
Goto HeartFinisher
HeartSpin:
WNH2 ABCDEFGH 1
WNH2 A 0 A_JumpIfInventory("SuperX",1,"HeartSpinCheck")
Goto HeartFinisher
HeartSpinCheck:
WNH2 A 0 A_ReFire("HeartSpin")
HeartFinisher:
WNH1 Y 2
WNH1 X 3
WNH1 WV 2
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,0,0)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,5,5)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,0,5)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,-5,5)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,10,10)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,5,10)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,0,10)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,-5,10)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,-10,10)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,15,15)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,10,15)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,5,15)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,0,15)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,-5,15)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,-10,15)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,-15,15)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,18,20)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,12.25,20)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,6.5,20)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,0,20)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,-6.5,20)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,-12.25,20)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,-18,20)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,20,26.25)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisble_1P",0,FALSE,15,26.25)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisble_1P",0,FALSE,10,26.25)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisble_1P",0,FALSE,5,26.25)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisble_1P",0,FALSE,0,26.25)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisble_1P",0,FALSE,-5,26.25)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisble_1P",0,FALSE,-10,26.25)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisble_1P",0,FALSE,-15,26.25)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,-20,26.25)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,19.5,32.5)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,14.5,32.5)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,9.25,32.5)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,4.5,32.5)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,0,32.5)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,-4.5,32.5)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,-9.25,32.5)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,-14.5,32.5)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,-19.5,32.5)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,18.25,35.75)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,13.25,35.75)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,8.5,35.75)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,-8.5,35.75)
WNH1 A 0 A_FireCustomMissile("HeartProjectileInvisible_1P",0,FALSE,-13.25,35.75)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,-18.25,35.75)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,12.75,40)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,-12.75,40)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,9,40)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,-9,40)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,6.5,37.5)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,-6.5,37.5)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,2.75,32.75)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,-2.75,32.75)
WNH1 A 0 A_FireCustomMissile("HeartProjectile_1P",0,FALSE,0,26.25)
WNH2 IJK 2
WNH1 B 2
WNH1 A 3
Goto ReadyX
AltFire:
UMBR D 0 A_JumpIf(z-floorz>0,"MidAir")
UMBR E 0 ACS_NamedExecuteAlways("PlayerMovement",0,TRUE,FALSE,0)
WNHI BC 2
TNT1 A 2
WNHI DEF 2
WNHI GHI 3
WNHI JKLM 2
UMBR S 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,0)
WNHI NOO 2
MHM2 J 0 A_ReFire("Liftoff")
Goto CancelLiftoff
Liftoff:
UMBR C 0 A_PlaySound("lgirl/triple_jump",CHAN_VOICE,1.0,FALSE,1.5)
UMBR C 0 A_ChangeVelocity(0,0,12,CVF_REPLACE)
WNHI P 2
TNT1 A 0 ACS_NamedExecuteAlways("MaryHammer_AltFire",0,0,5,0)
WNHI QQQP 2
Goto WaitMidAir
CancelLiftoff:
WNHI PA 6
Goto ReadyX
MidAir:
UMBR D 0 A_JumpIfInventory("MaryHammer_MidAirDone",1,"WaitCrash")
UMBR D 0 ACS_NamedExecuteAlways("MaryHammer_AltFire",0,0,2,0)
WNHI P 2
Goto WaitMidAir
WaitCrash:
WNHI A 1
Goto ReadyX
WaitMidAir:
UMBR U 0 A_JumpIfInventory("RequestBallThrow",3,"ThrowBall3_MidAir")
UMBR U 0 A_JumpIfInventory("RequestBallThrow",2,"ThrowBall2_MidAir")
UMBR U 0 A_JumpIfInventory("RequestBallThrow",1,"ThrowBall1_MidAir")
WNHI P 2
MHM2 J 0 A_ReFire("WaitMidAir")
Goto EndMidAir
EndMidAir:
WNHI P 2 ACS_NamedExecuteAlways("MaryHammer_AltFire",0,0,3,0)
Goto ReadyX
Deselect:
WNHI BC 2
TNT1 A 0 A_TakeInventory("Wand_IntroDone",1)
Goto Lower
//Common code
ThrowBall1:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall1",0,0,0,-8,0,12)
TNT1 A 0 A_TakeInventory("RequestBallThrow",10)
Goto ReadyX
ThrowBall2:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall2",0,0,0,-8,0,10)
TNT1 A 0 A_TakeInventory("RequestBallThrow",10)
Goto ReadyX
ThrowBall3:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall3",0,0,0,-8,0,9)
TNT1 A 0 A_TakeInventory("RequestBallThrow",10)
Goto ReadyX
ThrowBall1_MidAir:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall1",0,0,0,-8,0,12)
TNT1 A 0 A_TakeInventory("RequestBallThrow",10)
Goto WaitMidAir
ThrowBall2_MidAir:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall2",0,0,0,-8,0,10)
TNT1 A 0 A_TakeInventory("RequestBallThrow",10)
Goto WaitMidAir
ThrowBall3_MidAir:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall3",0,0,0,-8,0,9)
TNT1 A 0 A_TakeInventory("RequestBallThrow",10)
Goto WaitMidAir
}
}

	//Number 281 is availiable.
Actor MaryHammer : XWeapon 
{
+MELEEWEAPON
Inventory.Icon "WEAP_HAM"
Weapon.SlotNumber 1
Weapon.BobRangeX 0.5
Weapon.BobSpeed 1.8
Weapon.BobStyle Alpha
//+STRIFEDAMAGE
States
{
Ready:
MHM1 A 0
MHM1 A 0 ACS_NamedExecute("GotWeapon",0,2,TRUE,0)	//Mark the hammer as gotten.
ReadyX:
MHM1 A 0 A_JumpIfInventory("JuiceBoxA",1,"Drink")
MHM1 A 0 A_JumpIfInventory("onWater",1,"FloorCheck")
MHM1 A 0 A_JumpIfInventory("Mary_LookAtHammer",1,"Look")
MHM1 A 0 A_JumpIfInventory("BounceRequested",1,"EnemyBounce")
UMBR U 0 A_JumpIfInventory("RequestBallThrow",3,"ThrowBall3")
UMBR U 0 A_JumpIfInventory("RequestBallThrow",2,"ThrowBall2")
UMBR U 0 A_JumpIfInventory("RequestBallThrow",1,"ThrowBall1")
MHM1 A 1 A_WeaponReady
MHM1 A 0 A_TakeInventory("MaryHammer_MidAirDone",1)
Loop
CheckFloor:
MHM1 A 0 A_JumpIfInventory("FloorDetected",1,"RemoveMidAir") 
Goto ReadyX
RemoveMidAir:
MHM1 A 0 A_TakeInventory("MaryHammer_MidAirDone",1)
MHM1 A 0 A_TakeInventory("MaryHammer_Water",1)
Goto ReadyX
Fire:
MHM1 A 0 A_JumpIfInventory("NearFloor",1,"HammerAttack")
MHM1 D 0 A_JumpIfInventory("HammerUpgrades",4,"HammerSlam")
Goto WaitCrashA
HammerSlam:
MHM1 BBCDDE 1 A_ChangeVelocity(velx/1.3,vely/1.3,velz/4, CVF_REPLACE)
MHM1 E 0 A_JumpIf(z-floorz<128.5,"HammerJump4")
MHM1 A 0 A_ChangeFlag("NOPAIN",TRUE)
MHM1 E 0 A_PlaySound("lgirl/double_jump",CHAN_VOICE)
MHM1 EEEEEEEFFGH 1 A_ChangeVelocity(velx/1.3,vely/1.3,velz/4, CVF_REPLACE)
MHM1 E 0 A_JumpIf(z-floorz<128.5,"HammerJump4")
MHM1 I 1 A_ChangeVelocity(0.0,0.0,-9.5,CVF_REPLACE)
MHM1 J 1 A_ChangeVelocity(0.0,0.0,-16.25,CVF_REPLACE)
MHM1 J 0 ACS_NamedExecuteAlways("PlayerMovement",0,TRUE,FALSE,FALSE)
MHM1 J 0 A_TakeInventory("Hammer_SlamDamage",4)
MHM1 J 0 ACS_NamedExecuteAlways("HammerSlam",0,TRUE,FALSE,FALSE)
MHM1 J 0 ACS_NamedExecuteAlways("LandingBounce",0,0,0,0)
CheckFloor2:
MHM1 J 0 A_JumpIfInventory("MaryHammer_MidAirDone",1,"CancelHammerSlam_Death")
MHM1 J 1 A_JumpIfInventory("Hammer_SlamDamage",1,"BounceAttack")
Loop
CancelHammerSlam_Death:
MHM1 J 24 A_TakeInventory("MaryHammer_MidAirDone",1)
Goto ReadyX
BounceAttack:
MHM1 J 0 A_PlaySound("hammer/jump",CHAN_AUTO)
MHM1 J 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,0,0,0)
MHM1 J 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
Goto Damage1
FinishBounce:
MHM1 A 0 A_ChangeFlag("NOPAIN",FALSE)
MHM1 KLK 1
MHM1 J 20
MHM1 JIN 2
Goto ReadyX
Damage1:
MHM1 J 0 A_JumpIfInventory("Hammer_SlamDamage",2,"Damage2")
MHM1 J 0 A_FireCustomMissile("MaryHammer_Explosion4",0,0,0,4,0,-70)
MHM1 J 0 A_FireCustomMissile("TriggerProjectile_Hammer",0,0,0,4,0,0)
MHM1 J 0 ACS_NamedExecuteAlways("SpawnShockwave",0,384,0,0)
Goto FinishBounce
Damage2:
MHM1 J 0 A_JumpIfInventory("Hammer_SlamDamage",3,"Damage3")
MHM1 J 0 A_FireCustomMissile("MaryHammer_Explosion5",0,0,0,4,0,-70)
MHM1 J 0 A_FireCustomMissile("TriggerProjectile_Hammer",0,0,0,4,0,0)
MHM1 J 0 ACS_NamedExecuteAlways("SpawnShockwave",0,512,0,0)
Goto FinishBounce
Damage3:
MHM1 J 0 A_JumpIfInventory("Hammer_SlamDamage",4,"Damage4")
MHM1 J 0 A_FireCustomMissile("MaryHammer_Explosion6",0,0,0,4,0,-70)
MHM1 J 0 A_FireCustomMissile("TriggerProjectile_Hammer",0,0,0,4,0,0)
MHM1 J 0 ACS_NamedExecuteAlways("SpawnShockwave",0,768,0,0)
Goto FinishBounce
Damage4:
MHM1 J 0 A_FireCustomMissile("MaryHammer_Explosion7",0,0,0,4,0,-70)
MHM1 J 0 A_FireCustomMissile("TriggerProjectile_Hammer",0,0,0,4,0,0)
MHM1 J 0 ACS_NamedExecuteAlways("SpawnShockwave",0,1024,0,0)
Goto FinishBounce
HammerAttack:	//Main hammer attack
MHM1 BBCCDDDEEE 1
MHM1 FFGGHIJ 1
MHM1 L 0 A_PlaySound("hammer/jump",CHAN_AUTO)
MHM1 L 0 A_FireCustomMissile("MaryHammer_Explosion1",0,0,0,4,0,-70)
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",8,"Player8")
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",7,"Player7")
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",6,"Player6")
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",5,"Player5")
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",4,"Player4")
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",3,"Player3")
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",2,"Player2")
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",1,"Player1")
FinishHammerAttack:
//MHM1 J 0 A_FireCustomMissile("TriggerProjectile_Hammer1",0,0,0,4,0,0)
MHM1 KLK 1
MHM1 JIN 2
MHM1 A 9
MHM1 A 0 A_ReFire
Goto ReadyX
Player1:
MHM1 J 0 A_FireCustomMissile("TriggerProjectile_Hammer1",0,0,0,4,0,0)
Goto FinishHammerAttack
Player2:
MHM1 J 0 A_FireCustomMissile("TriggerProjectile_Hammer2",0,0,0,4,0,0)
Goto FinishHammerAttack
Player3:
MHM1 J 0 A_FireCustomMissile("TriggerProjectile_Hammer3",0,0,0,4,0,0)
Goto FinishHammerAttack
Player4:
MHM1 J 0 A_FireCustomMissile("TriggerProjectile_Hammer4",0,0,0,4,0,0)
Goto FinishHammerAttack
Player5:
MHM1 J 0 A_FireCustomMissile("TriggerProjectile_Hammer5",0,0,0,4,0,0)
Goto FinishHammerAttack
Player6:
MHM1 J 0 A_FireCustomMissile("TriggerProjectile_Hammer6",0,0,0,4,0,0)
Goto FinishHammerAttack
Player7:
MHM1 J 0 A_FireCustomMissile("TriggerProjectile_Hammer7",0,0,0,4,0,0)
Goto FinishHammerAttack
Player8:
MHM1 J 0 A_FireCustomMissile("TriggerProjectile_Hammer8",0,0,0,4,0,0)
Goto FinishHammerAttack
FloorCheck:
MHM1 A 0
MHM1 A 1
MHM1 A 0 A_JumpIfInventory("FloorDetected",1,"Ready")
Loop
DoubleJump:
MHM2 D 0
MHM2 D 0 A_JumpIfInventory("HammerUpgrades",2,"DoubleJump2")
Goto WaitCrashA
DoubleJump2:
MHM2 D 0 A_GiveInventory("MaryHammer_MidAirDone",1)
MHM2 DEFGHI 1
MHM2 J 0 A_PlaySound("mary/hammer_puff",CHAN_VOICE,1.0)
MHM2 J 17 A_ChangeVelocity(velx*1.05,vely*1.05,13.75,CVF_REPLACE)
MHM2 IHGFED 1
Goto FloorCheck
AltFire:
MHM2 D 0 A_JumpIfInventory("MaryHammer_MidAirDone",1,"WaitCrash")
MHM2 D 0 A_JumpIfInventory("NoHammer",1,"NoHammer")
MHM2 D 0 A_JumpIf(z-floorz>8.0,"DoubleJump")
HammerJump1:
MHM1 D 0 A_JumpIfInventory("HammerUpgrades",1,"HammerJump1B")
Goto WaitCrashA
HammerJump1B:
MHM1 D 0 A_JumpIf(z-floorz==0,"HammerJump2")
Goto ReadyX
HammerJump2:
MHM1 BDFH 1
MHM1 H 0 A_ReFire("HammerJumpCancel")
DenySpin:
MHM1 J 1
MHM1 L 0 A_FireCustomMissile("MaryHammer_Explosion8",0,0,0,4,0,-0)
MHM1 J 0 A_FireCustomMissile("TriggerProjectile",0,0,0,4,0,0)
MHM2 D 0 A_JumpIf(z-floorz<8.0,"HammerJump3")
Goto HammerJump4
HammerJump3:
MHM1 L 0 A_PlaySound("hammer/jump",CHAN_AUTO)
MHM1 L 1 A_ChangeVelocity(velx/1.75,vely/1.75,20,CVF_REPLACE)
MHM1 L 0 ACS_NamedExecuteAlways("MaryHammer_AltFire",0,0,4,0)
HammerJump4:
MHM1 KJIN 1
Goto FloorCheck
HammerJumpCancel:
MHM1 D 0 A_JumpIfInventory("HammerUpgrades",3,"StartSpin")
Goto DenySpin
StartSpin:
MHM1 IN 1
MHM1 N 0 A_JumpIfInventory("FloorDetected",1,"HammerSpin")
Goto StopSpin
HammerSpin:
MHM2 D 0 A_GiveInventory("MHammer_Active",1)
MHM2 D 0 ACS_NamedExecuteAlways("MaryHammer_AltFire",0,0,0,0)
MHM2 DEFGHI 1	//Hammer Spin
Goto WaitSpin
WaitSpin:
MHM2 J 0 A_ChangeVelocity(0.0,0.0,velz,CVF_REPLACE)
MHM2 J 1 A_JumpIf(CallACS("MaryHammer_AltFire",1,0,0,0)==1,"SpinVoice")
MHM2 J 0 A_ReFire("WaitSpin")
Goto StopSpin
SpinVoice:
MHM2 J 0 A_TakeInventory("Variable5",40)
MHM2 J 0 A_PlaySound("lgirl/hammer_spin",CHAN_VOICE)
Goto Spin
Spin:
MHM2 J 0 A_ChangeVelocity(0.0,0.0,velz,CVF_REPLACE)
MHM2 J 0 A_JumpIfInventory("MaryHammer_MidAirDone",1,"StopSpin")
MHM2 J 3 A_FireCustomMissile("MaryHammer_Explosion3",0,0,0,4,0,-20)
MHM2 J 0 A_FireCustomMissile("TriggerProjectile",0,0,0,4,0,0)
MHM2 J 0 A_GiveInventory("Variable5",1)	//Increase the variable.
MHM2 J 0 A_JumpIfInventory("Variable5",35,"StopSpin")	//If it reaches its limit, stop spinning.
Loop
StopSpin:
MHM2 J 0
MHM2 J 0 A_TakeInventory("MHammer_Active",1)
MHM2 J 0 A_TakeInventory("Variable5",40)
MHM2 J 0 ACS_NamedExecuteAlways("MaryHammer_AltFire",0,0,1,0)
MHM2 IHGFED 1
Goto ReadyX
WaitCrash:
MHM2 D 1
Goto ReadyX
WaitCrashA:
MHM1 A 1
Goto ReadyX
Look:
MHM1 OPQRSTUV 1
MHM1 W 35
MHM1 XYZ 2
MHM2 AB 2
MHM2 C 17
MHM2 C 0 A_PlaySound("hammer/kiss",CHAN_VOICE,1.0,FALSE)	
MHM1 ZYXW 1
MHM1 VUTSRQPO 1
MHM1 O 0 A_TakeInventory("Mary_LookAtHammer",1)
Goto ReadyX
NoHammer:
MHM2 D 3
Goto ReadyX
//Common code
Select:
MHM1 A 0
Goto Raise
Deselect:
"####" "#" 0
Goto Lower
Spawn:
WCUP A -1
Stop
//Common code
ThrowBall1:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall1",0,0,0,-8,0,12)
TNT1 A 0 A_TakeInventory("RequestBallThrow",10)
Goto ReadyX
ThrowBall2:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall2",0,0,0,-8,0,10)
TNT1 A 0 A_TakeInventory("RequestBallThrow",10)
Goto ReadyX
ThrowBall3:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall3",0,0,0,-8,0,9)
TNT1 A 0 A_TakeInventory("RequestBallThrow",10)
Goto ReadyX
Drink:
JBF1 A 0
JBF1 A 0 A_TakeInventory("JuiceBoxA",1)
JBF1 A 2
Goto JuiceBox
JuiceBox:
"####" BCDEF 2
"####" GHIJ 3
"####" K 12
"####" LM 2
"####" N 5
"####" OPQ 2
"####" S 0 A_PlaySound("lgirl/suckstraw",CHAN_AUTO,0.5)
"####" STU 6
"####" V 32 ACS_NamedExecuteAlways("JuiceBoxRecover",0,0,0,0)
"####" W 16
"####" XYZ 2
"####" [ 2
"####" ^ 2
TNT1 A 0 A_SpawnItemEx("DroppedJuiceBoxA",velx,vely,32,velx*1.75,vely*1.75,7.25,0,SXF_NOCHECKPOSITION|SXF_ABSOLUTEPOSITION|SXF_ABSOLUTEVELOCITY|SXF_ABSOLUTEMOMENTUM)
Goto ReadyX
EnemyBounce:
TNT1 A 0 A_FireCustomMissile("MaryBounce_Explosion",0,0,0,4,0,-70)
TNT1 A 0 A_TakeInventory("BounceRequested",1)
Goto ReadyX
}
}

Actor MaryUmbrella : XWeapon 297
{
+MELEEWEAPON
Scale 0.5
DamageType "Umbrella"
Inventory.Icon "WEAP_UMB"
Weapon.SlotNumber 2
Weapon.BobRangeX 0.5
Weapon.BobSpeed 1.8
Weapon.BobStyle Alpha
+STRIFEDAMAGE
+WEAPON.NOALERT
States
{
Ready:
TNT1 A 0 A_JumpIfInventory("MaryUmbrella_Intro",1,"ReadyX")
TNT1 A 0 A_GiveInventory("MaryUmbrella_Intro",1)
TNT1 A 1
UMBR AB 2
ReadyX:
UMBR A 0 A_JumpIfInventory("JuiceBoxA",1,"Drink")
UMBR A 0 A_JumpIfInventory("BounceRequested",1,"EnemyBounce")
UMBR C 0 A_JumpIfInventory("RequestBallThrow",3,"ThrowBall3")
UMBR C 0 A_JumpIfInventory("RequestBallThrow",2,"ThrowBall2")
UMBR C 0 A_JumpIfInventory("RequestBallThrow",1,"ThrowBall1")
UMBR C 1 A_WeaponReady
UMBR C 0 A_JumpIfInventory("FloorDetected",1,"Ready2")
Loop
Ready2:
UMBR A 0 A_TakeInventory("MaryHammer_MidAirDone",1)
Goto ReadyX
Fire:
UMBR N 1
UMBR O 6
UMBR PQ 1
UMBR R 0 A_PlaySound("hammer/jump",CHAN_AUTO)
MHM1 J 0 A_FireCustomMissile("TriggerProjectile",0,0,0,4,0,0)
UMBR R 15 A_FireCustomMissile("MaryUmbrella_Explosion1",0,0,0,4,0,-70)
UMBR QPN 1	
UMBR C 8
MHM1 D 0 A_JumpIfInventory("UmbrellaUpgrades",1,"FlattenCheck")
Goto ReadyX
FlattenCheck:
UMBR A 0 A_ReFire("Flatten")
Goto ReadyX
Flatten:
UMBR FFSTT 1
UMBR UUVW 2
UMBR X 0 A_PlaySound("hammer/jump",CHAN_AUTO)
MHM1 J 0 A_FireCustomMissile("TriggerProjectile",0,0,0,4,0,0)
UMBR X 4 A_FireCustomMissile("MaryUmbrella_Explosion2",0,0,0,4,0,-70)
UMBR WVUUTS 2
Goto ReadyX
AltFire:
UMBR D 0 A_JumpIf(z-floorz>0,"MidAir")
UMBR D 0 A_JumpIfInventory("UmbrellaUpgrades",2,"PrepareLiftoff")
Goto WaitCrash
PrepareLiftoff:
UMBR E 0 ACS_NamedExecuteAlways("PlayerMovement",0,TRUE,FALSE,0)
UMBR FG 2
UMBR HHIIJJKKLLMMLKJIHIJKLMLKJIHJLMKIHHGF 1
UMBR S 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,0)
UMBR EDC 1
MHM2 J 0 A_ReFire("Liftoff")
Goto CancelLiftoff
Liftoff:
UMBR C 0 A_PlaySound("lgirl/triple_jump",CHAN_VOICE,1.0,FALSE,1.5)
UMBR C 0 A_ChangeVelocity(0,0,12,CVF_REPLACE)
UMBR C 1
UMBR T 2 ACS_NamedExecuteAlways("MaryHammer_AltFire",0,0,5,0)
Goto WaitMidAir
CancelLiftoff:
UMBR CDEFGHHHHGGFFEEDDC 3
Goto ReadyX
MidAir:
UMBR D 0 A_JumpIfInventory("MaryHammer_MidAirDone",1,"WaitCrash")
UMBR D 0 ACS_NamedExecuteAlways("MaryHammer_AltFire",0,0,2,0)
UMBR ST 2
Goto WaitMidAir
WaitCrash:
UMBR C 1
Goto ReadyX
WaitMidAir:
UMBR U 0 A_JumpIfInventory("RequestBallThrow",3,"ThrowBall3_MidAir")
UMBR U 0 A_JumpIfInventory("RequestBallThrow",2,"ThrowBall2_MidAir")
UMBR U 0 A_JumpIfInventory("RequestBallThrow",1,"ThrowBall1_MidAir")
UMBR U 1
MHM2 J 0 A_ReFire("WaitMidAir")
Goto EndMidAir
EndMidAir:
UMBR T 2 ACS_NamedExecuteAlways("MaryHammer_AltFire",0,0,3,0)
UMBR S 2
Goto ReadyX
Select:
TNT1 AAAAAAAA 0 A_Raise
Loop
Deselect:
Lower:
UMBR BA 3 A_TakeInventory("MaryUmbrella_Intro",1)
DeselectLoop:
TNT1 AAAA 0 A_Lower
TNT1 A 3 A_Lower
Loop
Spawn:
WCUP A -1
Stop
//Common code
ThrowBall1:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall1",0,0,0,-8,0,12)
TNT1 A 0 A_TakeInventory("RequestBallThrow",10)
Goto ReadyX
ThrowBall2:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall2",0,0,0,-8,0,10)
TNT1 A 0 A_TakeInventory("RequestBallThrow",10)
Goto ReadyX
ThrowBall3:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall3",0,0,0,-8,0,9)
TNT1 A 0 A_TakeInventory("RequestBallThrow",10)
Goto ReadyX
ThrowBall1_MidAir:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall1",0,0,0,-8,0,12)
TNT1 A 0 A_TakeInventory("RequestBallThrow",10)
Goto WaitMidAir
ThrowBall2_MidAir:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall2",0,0,0,-8,0,10)
TNT1 A 0 A_TakeInventory("RequestBallThrow",10)
Goto WaitMidAir
ThrowBall3_MidAir:
TNT1 A 0
TNT1 A 0 A_FireCustomMissile("ThrownBall3",0,0,0,-8,0,9)
TNT1 A 0 A_TakeInventory("RequestBallThrow",10)
Goto WaitMidAir
Select:
TNT1 A 0
Goto Raise
Deselect:
"####" "#" 0
Goto Lower
Spawn:
PICK A -1
Stop
CDrink:
CRYF CBA 2
Drink:
JBF1 A 0
JBF1 A 0 A_TakeInventory("JuiceBoxA",1)
JBF1 A 2
Goto JuiceBox
JuiceBox:
"####" BCDEF 2
"####" GHIJ 3
"####" K 12
"####" LM 2
"####" N 5
"####" OPQ 2
"####" S 0 A_PlaySound("lgirl/suckstraw",CHAN_AUTO,0.5)
"####" STU 6
"####" V 32 ACS_NamedExecuteAlways("JuiceBoxRecover",0,0,0,0)
"####" W 16
"####" XYZ 2
"####" [ 2
"####" ^ 2
TNT1 A 0 A_SpawnItemEx("DroppedJuiceBoxA",velx,vely,32,velx*1.75,vely*1.75,7.25,0,SXF_NOCHECKPOSITION|SXF_ABSOLUTEPOSITION|SXF_ABSOLUTEVELOCITY|SXF_ABSOLUTEMOMENTUM)
Goto Ready
EnemyBounce:
TNT1 A 0 A_FireCustomMissile("MaryBounce_Explosion",0,0,0,4,0,-70)
TNT1 A 0 A_TakeInventory("BounceRequested",1)
Goto Ready
}
}

actor UmbrellaPuff_Damage : BulletPuff
{
DamageType "Umbrella"
}

actor StunPuff_Damage : BulletPuff
{
DamageType "Stun"
}

Actor JuiceBoxA_Spawn : CustomInventory 280
{
Radius 8
Height 16
Scale 0.75
States
{
Spawn:
JBG1 B -1
Stop
Pickup:
TNT1 A 0
TNT1 A 1 A_JumpIf(CallACS("JuiceBoxCheck",0,0,0,0)==FALSE,"Failure")
TNT1 A 1 A_GiveInventory("JuiceBoxA",1)
Stop
Failure:
TNT1 A 0
TNT1 A 1
Fail
}
}

Actor DroppedJuiceBoxA
{
Radius 4
Height 4
Mass 25
Scale 0.05
Gravity 0.75
-SOLID
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_Turn(90.0)
JBG1 A 70
Dirty:
JBG1 A 17 A_CheckProximity("Smelly","PlayerPawn",512.0,1,CPXF_ANCESTOR)
Loop
Smelly:
JBG1 A 2 A_SpawnParticle("BrightGreen",SPF_RELATIVE,45, Random(2,5),0,Random(5,13),Random(-4,4),2,Random(-0.025,0.025),Random(-0.025,0.025),Random(1.01,1.1),0,0,0,0.65)
Goto Dirty
}
}

//297 is available.

Actor MaryAirDash : FastProjectile
{
Radius 4
Height 8
Speed 64
DamageType "AirDash"
PROJECTILE
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_ChangeVelocity((-(velx))*6,(-(vely))*6,0,CVF_REPLACE)
TNT1 A 3
TNT1 A 0 A_Explode((10),128,0,0,1,0,0)
Death:
TNT1 A 1 A_FadeOut(1,1)
Loop
}
}

Actor TriggerProjectile
{
Radius 4
Height 8
Speed 24
Damage 0
PROJECTILE
+INVISIBLE
States
{
Spawn:
TNT1 A 0
TNT1 A 0
Death:
TNT1 A 1 A_FadeOut(0.25,1)
Loop
}
}

Actor TriggerProjectile_Hammer1 : TriggerProjectile { +INVISIBLE }
Actor TriggerProjectile_Hammer2 : TriggerProjectile { +INVISIBLE }
Actor TriggerProjectile_Hammer3 : TriggerProjectile { +INVISIBLE }
Actor TriggerProjectile_Hammer4 : TriggerProjectile { +INVISIBLE }
Actor TriggerProjectile_Hammer5 : TriggerProjectile { +INVISIBLE }
Actor TriggerProjectile_Hammer6 : TriggerProjectile { +INVISIBLE }
Actor TriggerProjectile_Hammer7 : TriggerProjectile { +INVISIBLE }
Actor TriggerProjectile_Hammer8 : TriggerProjectile { +INVISIBLE }

Actor MaryHammer_Explosion1	//Normal Attack
{
Radius 4
Height 8
Damage (0)
Speed 24
+NOGRAVITY
States
{
Spawn:
PART A 0
Death:
TNT1 A 0
TNT1 A 5 A_Explode((30),64,!XF_HURTSOURCE,FALSE,64)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}


Actor MaryHammer_Explosion3	//Hammer Spin
{
Radius 4
Height 8
Damage (0)
Speed 24
+NOGRAVITY
States
{
Spawn:
PART A 0
Death:
TNT1 A 0
TNT1 A 5 A_Explode((3),72,!XF_HURTSOURCE,FALSE,72)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}

Actor MaryHammer_Explosion4	//Hammer Bounce #1
{
Radius 4
Height 8
Damage (0)
Speed 24
+NOGRAVITY
States
{
Spawn:
PART A 0
Death:
TNT1 A 0
TNT1 A 5 A_Explode((75),500,!XF_HURTSOURCE,FALSE,500)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}

Actor MaryHammer_Explosion5	//Hammer Bounce #2
{
Radius 4
Height 8
Damage (0)
Speed 24
+NOGRAVITY
States
{
Spawn:
PART A 0
Death:
TNT1 A 0
TNT1 A 5 A_Explode((90),700,!XF_HURTSOURCE,FALSE,700)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}

Actor MaryHammer_Explosion6	//Hammer Bounce #3
{
Radius 4
Height 8
Damage (0)
Speed 24
+NOGRAVITY
States
{
Spawn:
PART A 0
Death:
TNT1 A 0
TNT1 A 5 A_Explode((105),900,!XF_HURTSOURCE,FALSE,900)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}

Actor MaryHammer_Explosion7	//Hammer Bounce #4
{
Radius 4
Height 8
Damage (0)
Speed 24
+NOGRAVITY
States
{
Spawn:
PART A 0
Death:
TNT1 A 0
TNT1 A 5 A_Explode((120),1200,!XF_HURTSOURCE,FALSE,1200)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}

Actor MaryHammer_Explosion8	//Hammer Jump
{
Radius 4
Height 8
Damage (0)
Speed 24
+NOGRAVITY
States
{
Spawn:
PART A 0
Death:
TNT1 A 0
TNT1 A 5 A_Explode((25),64,!XF_HURTSOURCE,FALSE,64)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}


Actor MaryUmbrella_Explosion1	//Normal Attack
{
Radius 4
Height 8
Damage (0)
Speed 24
DamageType "Umbrella"
+NOGRAVITY
+FORCEPAIN
States
{
Spawn:
PART A 0
Death:
TNT1 A 0
TNT1 A 5 A_Explode((24),48,!XF_HURTSOURCE,FALSE,48)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}

Actor MaryUmbrella_Explosion2	//Flatten
{
Radius 4
Height 8
Damage (0)
Speed 24
DamageType "Flatten"
+NOGRAVITY
+FORCEPAIN
States
{
Spawn:
PART A 0
Death:
TNT1 A 0
TNT1 A 5 A_Explode((15),48,!XF_HURTSOURCE,FALSE,48)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}

Actor XaneSword : XWeapon
{
Scale 0.1
Damage (0)
Weapon.SlotNumber 1
Tag "Arthas' Sword"
Inventory.Icon "WEAP_SWD"
//Inventory.Icon "WICO_AHM"
+MELEEWEAPON
+FLOATBOB
States
{
Ready:
SWDA A 2 A_WeaponReady(WRF_ALLOWRELOAD)
Loop
Fire:
SWDA BC 1
SWDA D 2
SWDA D 0 A_JumpIfInventory("SwordUpgrades",1,"S1_0")
Goto S2_0
S1_0:	//Initial swing (with upgrade)
SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA E 1
SWDA F 1 A_FireCustomMissile("XaneSword_Explosion2")	//Normal Swing
//SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA G 4
SWDA G 0 A_ReFire("S1_1")
Goto Fail1
S1_1:
//SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA H 1
SWDA I 1 A_FireCustomMissile("XaneSword_Explosion1")	//Normal Swing
SWDA IL 1
SWDA J 1
//SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA K 3
SWDA G 0 A_ReFire("S1_2")
Goto Fail2
S1_2:
//SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA L 1
SWDA M 1 A_FireCustomMissile("XaneSword_Explosion1")
SWDA N 1
//SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA O 3
SWDA G 0 A_ReFire("S1_3")
Goto Fail3
S1_3:
//SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA N 1
SWDA M 1 A_FireCustomMissile("XaneSword_Explosion1")
SWDA L 1
//SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA K 3
SWDA G 0 A_ReFire("S1_4")
Goto Fail2
S1_4:
//SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA J 1
SWDA LI 1
SWDA H 1 A_FireCustomMissile("XaneSword_Explosion1")	//Normal Swing
//SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA G 3
SWDA G 0 A_ReFire("S1to2_1")	//Transition to a special, downgraded set of second swings.
Goto Fail4

S2_0:	//Initial swing (without upgrade)
SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA E 1
SWDA F 1 A_FireCustomMissile("XaneSword_Explosion2")	//Initial Swing
//SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA G 5
SWDA G 0 A_ReFire("S2_1")
Goto Fail1
S2_1:
//SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA H 1
SWDA I 1 A_FireCustomMissile("XaneSword_Explosion1")	//Normal Swing
SWDA IL 1
SWDA J 1
//SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA K 5
SWDA G 0 A_ReFire("S2_2")
Goto Fail2
S2_2:
//SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA L 1
SWDA M 1 A_FireCustomMissile("XaneSword_Explosion1")
SWDA N 1
//SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA O 5
SWDA G 0 A_ReFire("S2_3")
Goto Fail3
S2_3:
//SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA N 1
SWDA M 1 A_FireCustomMissile("XaneSword_Explosion1")
SWDA L 1
//SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA K 5
SWDA G 0 A_ReFire("S2_4")
Goto Fail2
S2_4:
//SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA J 1
SWDA LI 1
SWDA H 1 A_FireCustomMissile("XaneSword_Explosion1")	//Normal Swing
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)	//Don't comment these out as it's to enable precise reflecting timing.
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA G 5
SWDA G 0 A_ReFire("S3_1")
Goto Fail4

//These are used when transitioning from the fast upgraded speed to the second swings.
S1to2_1:
//SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA H 1
SWDA I 1 A_FireCustomMissile("XaneSword_Explosion3")	//Less effective Swing
SWDA IL 1
SWDA J 1
//SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA K 5
SWDA G 0 A_ReFire("S1to2_2")
Goto Fail2
S1to2_2:
//SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA L 1
SWDA M 1 A_FireCustomMissile("XaneSword_Explosion3")
SWDA N 1
//SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA O 5
SWDA G 0 A_ReFire("S1to2_3")
Goto Fail3
S1to2_3:
//SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA N 1
SWDA M 1 A_FireCustomMissile("XaneSword_Explosion3")
SWDA L 1
//SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA K 5
SWDA G 0 A_ReFire("S1to2_4")
Goto Fail2
S1to2_4:
//SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
//SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
//SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA J 1
SWDA LI 1
SWDA H 1 A_FireCustomMissile("XaneSword_Explosion3")
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)	//Don't comment these out as it's to enable precise reflecting timing.
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA G 5
SWDA G 0 A_ReFire("S3_1")
Goto Fail4

S3_1:
SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA H 1
SWDA I 1 A_FireCustomMissile("XaneSword_Explosion3")	//Downgraded swings
SWDA IL 1
SWDA J 1
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA K 7
SWDA G 0 A_ReFire("S3_2")
Goto Fail2
S3_2:
SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA L 1
SWDA M 1 A_FireCustomMissile("XaneSword_Explosion3")
SWDA N 1
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA O 7
SWDA G 0 A_ReFire("S3_3")
Goto Fail3
S3_3:
SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA N 1
SWDA M 1 A_FireCustomMissile("XaneSword_Explosion3")
SWDA L 1
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA K 7
SWDA G 0 A_ReFire("S3_4")
Goto Fail2
S3_4:
SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA J 1
SWDA LI 1
SWDA H 1 A_FireCustomMissile("XaneSword_Explosion3")
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA G 7
SWDA G 0 A_ReFire("S4_1")
Goto Fail4

S4_1:
SWDA B 0 A_JumpIfInventory("SwordUpgrades",1,"S3_1")	//If upgraded, don't use the slowest speed!
SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA H 1
SWDA I 1 A_FireCustomMissile("XaneSword_Explosion3")	//Weaker swings
SWDA IL 1
SWDA J 1
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA K 8
SWDA G 0 A_ReFire("S4_2")
Goto Fail2
S4_2:
SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA L 1
SWDA M 1 A_FireCustomMissile("XaneSword_Explosion3")
SWDA N 1
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA O 8
SWDA G 0 A_ReFire("S4_3")
Goto Fail3
S4_3:
SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA N 1
SWDA M 1 A_FireCustomMissile("XaneSword_Explosion3")
SWDA L 1
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA K 8
SWDA G 0 A_ReFire("S4_4")
Goto Fail2
S4_4:
SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA J 1
SWDA LI 1
SWDA H 1 A_FireCustomMissile("XaneSword_Explosion3")
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA G 8
SWDA G 0 A_ReFire("S4_1")
Goto Fail4

Fail1:
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA G 7
SWDA RS 3
Goto Ready
Fail2:
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA J 7
SWDA TU 3
Goto Ready
Fail3:
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA O 7
SWDA PQ 3
Goto Ready
Fail4:
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA G 7
SWDA F 1 A_FireCustomMissile("XaneSword_Explosion1")	//Normal Swing
SWDA EDDCB 1
Goto Ready

AltFire:
SWDA A 1
SWDA A 0 A_JumpIfInventory("NearFloor",1,"ChargeSword1")
SWDA A 0 A_JumpIf(CallACS("CheckMiscScriptVariable",0,0,0,0)>0,"ChargeSword1")	//If something like a Drop Dash is happening, use the on-ground sword beam.
DropAttack:
MHM1 J 0 ACS_NamedExecuteAlways("PlayerMovement",0,TRUE,FALSE,FALSE)
SWDA SSSRRR 1 A_ChangeVelocity(velx,vely,0.0,CVF_REPLACE)
SWDA R 0 ACS_NamedExecute("LandingBounce",0,2,0,0)
DropAttackLoop:
SWDA G 1 A_JumpIfInventory("Variable4",1,"DropAttackCheck")
Loop
DropAttackCheck:
SWDA R 0 A_TakeInventory("Variable4",1)
SWDA R 0 A_JumpIfInventory("Variable5",1,"DropAttackSlash")
SWDA R 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
Goto Fail4
DropAttackSlash:
SWDA G 7 A_TakeInventory("Variable5",1)
SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA F 1
SWDA E 0 A_FireCustomMissile("XaneSwordBeam2_1",0,FALSE,-72)	//Sword Beam (powerful)
SWDA E 0 A_FireCustomMissile("XaneSwordBeam2_2",0,FALSE,-24)
SWDA E 0 A_FireCustomMissile("XaneSwordBeam2_3",0,FALSE,24)
SWDA E 1 A_FireCustomMissile("XaneSwordBeam2_4",0,FALSE,72)
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA D 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
SWDA D 4
SWDA CB 2
Goto Ready

ChargeSword1:
SWDA BC 2
SWDA D 8
SWDA D 0 A_JumpIfInventory("DisableAirDash",1,"ChargeSword2")
SWDA D 0 A_ReFire("ChargeSword2")
SWDA D 3
SWDA CB 2
Goto Ready
ChargeSword2:
SWDA CBSR 2
SWDA R 0 A_JumpIfInventory("DisableAirDash",1,"ChargeSword3")
SWDA R 0 A_ReFire("ChargeSword3")
ChargeSword3:
SWDA G 1
SWDA R 0 A_JumpIfInventory("DisableAirDash",1,"ChargeSword3")
SWDA G 0 A_ReFire("ChargeSword3")
ShootSwordBeam:
SWDA B 0 A_ChangeFlag("INVULNERABLE",TRUE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",TRUE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",TRUE)
SWDA F 1
SWDA E 0 A_FireCustomMissile("XaneSwordBeam1_1",0,FALSE,-36)	//Sword Beam (weak)
SWDA E 0 A_FireCustomMissile("XaneSwordBeam1_2",0,FALSE,-12)
SWDA E 0 A_FireCustomMissile("XaneSwordBeam1_3",0,FALSE,12)
SWDA E 1 A_FireCustomMissile("XaneSwordBeam1_4",0,FALSE,36)
SWDA B 0 A_ChangeFlag("INVULNERABLE",FALSE)
SWDA B 0 A_ChangeFlag("REFLECTIVE",FALSE)
SWDA B 0 A_ChangeFlag("AIMREFLECT",FALSE)
SWDA D 7
SWDA CB 2
Goto Ready

Reload:	//Xane's Claw. Keep consistent over all of Xane's weapons.
SWDA A 0
SWDA A 1
SWDA A 0 A_JumpIf(CallACS("CheckClawUse",0,0,0,0)==TRUE,"FireClaw")
Goto Ready
FireClaw:
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",8,"Player8A")
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",7,"Player7A")
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",6,"Player6A")
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",5,"Player5A")
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",4,"Player4A")
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",3,"Player3A")
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",2,"Player2A")
MHM1 L 0 A_JumpIfInventory("PlayerNumberX",1,"Player1A")
SWDA A 5 A_Log("Error: Player number was erased!")
Goto Ready
Player1A:
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,TRUE,FALSE,FALSE)
SWDA A 5 A_FireBullets(0, 0, 1, (0), "ClawCheck", !FBF_USEAMMO|FBF_NORANDOM|FBF_NORANDOMPUFFZ, 1440)	//A_FireCustomMissile("ClawCheck")
SWDA A 0 A_JumpIf(CallACS("ClawVerify",1,0,0,0)==TRUE,"Player1B")
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
Goto Ready
Player2A:
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,TRUE,FALSE,FALSE)
SWDA A 5 A_FireBullets(0, 0, 1, (0), "ClawCheck", !FBF_USEAMMO|FBF_NORANDOM|FBF_NORANDOMPUFFZ, 1440)	//A_FireCustomMissile("ClawCheck")
SWDA A 0 A_JumpIf(CallACS("ClawVerify",1,0,0,0)==TRUE,"Player2B")
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
Goto Ready
Player3A:
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,TRUE,FALSE,FALSE)
SWDA A 5 A_FireBullets(0, 0, 1, (0), "ClawCheck", !FBF_USEAMMO|FBF_NORANDOM|FBF_NORANDOMPUFFZ, 1440)	//A_FireCustomMissile("ClawCheck")
SWDA A 0 A_JumpIf(CallACS("ClawVerify",1,0,0,0)==TRUE,"Player3B")
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
Goto Ready
Player4A:
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,TRUE,FALSE,FALSE)
SWDA A 5 A_FireBullets(0, 0, 1, (0), "ClawCheck", !FBF_USEAMMO|FBF_NORANDOM|FBF_NORANDOMPUFFZ, 1440)	//A_FireCustomMissile("ClawCheck")
SWDA A 0 A_JumpIf(CallACS("ClawVerify",1,0,0,0)==TRUE,"Player4B")
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
Goto Ready
Player5A:
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,TRUE,FALSE,FALSE)
SWDA A 5 A_FireBullets(0, 0, 1, (0), "ClawCheck", !FBF_USEAMMO|FBF_NORANDOM|FBF_NORANDOMPUFFZ, 1440)	//A_FireCustomMissile("ClawCheck")
SWDA A 0 A_JumpIf(CallACS("ClawVerify",1,0,0,0)==TRUE,"Player5B")
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
Goto Ready
Player6A:
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,TRUE,FALSE,FALSE)
SWDA A 5 A_FireBullets(0, 0, 1, (0), "ClawCheck", !FBF_USEAMMO|FBF_NORANDOM|FBF_NORANDOMPUFFZ, 1440)	//A_FireCustomMissile("ClawCheck")
SWDA A 0 A_JumpIf(CallACS("ClawVerify",1,0,0,0)==TRUE,"Player6B")
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
Goto Ready
Player7A:
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,TRUE,FALSE,FALSE)
SWDA A 5 A_FireBullets(0, 0, 1, (0), "ClawCheck", !FBF_USEAMMO|FBF_NORANDOM|FBF_NORANDOMPUFFZ, 1440)	//A_FireCustomMissile("ClawCheck")
SWDA A 0 A_JumpIf(CallACS("ClawVerify",1,0,0,0)==TRUE,"Player7B")
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
Goto Ready
Player8A:
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,TRUE,FALSE,FALSE)
SWDA A 5 A_FireBullets(0, 0, 1, (0), "ClawCheck", !FBF_USEAMMO|FBF_NORANDOM|FBF_NORANDOMPUFFZ, 1440)	//A_FireCustomMissile("ClawCheck")
SWDA A 0 A_JumpIf(CallACS("ClawVerify",1,0,0,0)==TRUE,"Player8B")
SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
Goto Ready
Player1B:
//SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
SWDA A 35 A_FireCustomMissile("Claw1000")
Goto Ready
Player2B:
//SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
SWDA A 35 A_FireCustomMissile("Claw1001")
Goto Ready
Player3B:
//SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
SWDA A 35 A_FireCustomMissile("Claw1002")
Goto Ready
Player4B:
//SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
SWDA A 35 A_FireCustomMissile("Claw1003")
Goto Ready
Player5B:
//SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
SWDA A 35 A_FireCustomMissile("Claw1004")
Goto Ready
Player6B:
//SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
SWDA A 35 A_FireCustomMissile("Claw1005")
Goto Ready
Player7B:
//SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
SWDA A 35 A_FireCustomMissile("Claw1006")
Goto Ready
Player8B:
//SWDA A 0 ACS_NamedExecuteAlways("PlayerMovement",0,FALSE,FALSE,FALSE)
SWDA A 35 A_FireCustomMissile("Claw1007")
Goto Ready
WaitX:
SWDA A 3
SWDA A 0 A_ReFire("WaitX")
Goto Ready
EnemyBounce:
TNT1 A 0 A_FireCustomMissile("MaryBounce_Explosion",0,0,0,4,0,-70)
TNT1 A 0 A_TakeInventory("BounceRequested",1)
Goto Ready

Select:
SWDA A 0
Goto Raise
}
}

Actor XaneSword_Explosion1	//Other sword swings (first few only)
{
Radius 16
Height 32
Damage (0)
Speed 14
DamageType "Sword"
PROJECTILE
+NOGRAVITY
DeathSound "misc/sword"
States
{
Spawn:
TNT1 A 0
TNT1 A 2
FadeOut:
TNT1 A 1 A_FadeOut(1,1)
Loop
Death:
TNT1 A 0
TNT1 A 0 A_Scream
TNT1 A 0 A_Explode((12),40,!XF_HURTSOURCE,FALSE,36)
TNT1 AA 0 A_SpawnParticle("Yellow",SPF_FULLBRIGHT|SPF_INTERPOLATE|SPF_RELANG,8,4,0,0,Random(-1,1),Random(-1,1),0,Random(-0.5,0.5),Random(3,5),0,0,0,0.9,-1)
TNT1 AAA 0 A_SpawnParticle("Orange",SPF_FULLBRIGHT|SPF_INTERPOLATE|SPF_RELANG,8,4,0,0,Random(-2,2),Random(-1.75,1.75),0,Random(-0.5,0.5),Random(3,5),0,0,0,0.9,-1)
TNT1 AAAAA 0 A_SpawnParticle("Black",SPF_FULLBRIGHT|SPF_INTERPOLATE|SPF_RELANG,8,4,0,0,Random(-3,3),Random(-2.25,2.25),0,Random(-0.5,0.5),Random(3,5),0,0,0,0.9,-1)
}
}
Actor XaneSword_Explosion2	//Initial sword swing
{
Radius 16
Height 32
Damage (0)
Speed 14
DamageType "Sword"
PROJECTILE
+NOGRAVITY
DeathSound "misc/sword"
States
{
Spawn:
TNT1 A 0
TNT1 A 2
FadeOut:
TNT1 A 1 A_FadeOut(1,1)
Loop
Death:
TNT1 A 0
TNT1 A 0 A_Scream
TNT1 A 0 A_Explode((14),40,!XF_HURTSOURCE,FALSE,36)
TNT1 AA 0 A_SpawnParticle("Yellow",SPF_FULLBRIGHT|SPF_INTERPOLATE|SPF_RELANG,8,4,0,0,Random(-1,1),Random(-1,1),0,Random(-0.5,0.5),Random(3,5),0,0,0,0.9,-1)
TNT1 AAA 0 A_SpawnParticle("Orange",SPF_FULLBRIGHT|SPF_INTERPOLATE|SPF_RELANG,8,4,0,0,Random(-2,2),Random(-1.75,1.75),0,Random(-0.5,0.5),Random(3,5),0,0,0,0.9,-1)
TNT1 AAAAA 0 A_SpawnParticle("Black",SPF_FULLBRIGHT|SPF_INTERPOLATE|SPF_RELANG,8,4,0,0,Random(-3,3),Random(-2.25,2.25),0,Random(-0.5,0.5),Random(3,5),0,0,0,0.9,-1)
}
}
Actor XaneSword_Explosion3	//Other sword swings (all others)
{
Radius 16
Height 32
Damage (0)
Speed 14
DamageType "Sword"
PROJECTILE
+NOGRAVITY
+PAINLESS
DeathSound "misc/sword"
States
{
Spawn:
TNT1 A 0
TNT1 A 2
FadeOut:
TNT1 A 1 A_FadeOut(1,1)
Loop
Death:
TNT1 A 0
TNT1 A 0 A_Scream
TNT1 A 0 A_Explode((11),40,!XF_HURTSOURCE,FALSE,36)
TNT1 AA 0 A_SpawnParticle("Yellow",SPF_FULLBRIGHT|SPF_INTERPOLATE|SPF_RELANG,8,4,0,0,Random(-1,1),Random(-1,1),0,Random(-0.5,0.5),Random(3,5),0,0,0,0.9,-1)
TNT1 AAA 0 A_SpawnParticle("Orange",SPF_FULLBRIGHT|SPF_INTERPOLATE|SPF_RELANG,8,4,0,0,Random(-2,2),Random(-1.75,1.75),0,Random(-0.5,0.5),Random(3,5),0,0,0,0.9,-1)
TNT1 AAAAA 0 A_SpawnParticle("Black",SPF_FULLBRIGHT|SPF_INTERPOLATE|SPF_RELANG,8,4,0,0,Random(-3,3),Random(-2.25,2.25),0,Random(-0.5,0.5),Random(3,5),0,0,0,0.9,-1)
}
}

Actor XaneSwordBeam1_1	//Weak sword beam parts
{
Radius 16
Height 8
Damage (25)
Speed 42
Scale 3
RenderStyle Add
Alpha 0.75
+RIPPER
PROJECTILE
States
{
Spawn:
LASR B 0
See:
LASR "#" 30
Death:
LASR "#" 1 A_FadeOut(0.07,1)
Loop
}
}
Actor XaneSwordBeam1_2 : XaneSwordBeam1_1
{
States
{
Spawn:
LASR C 0
Goto See
}
}
Actor XaneSwordBeam1_3 : XaneSwordBeam1_1
{
States
{
Spawn:
LASR D 0
Goto See
}
}
Actor XaneSwordBeam1_4 : XaneSwordBeam1_1
{
States
{
Spawn:
LASR E 0
Goto See
}
}

Actor XaneSwordBeam2_1	//Powerful sword beam parts
{
Radius 24
Height 16
Damage (45)
Speed 48
Scale 6
RenderStyle Add
Alpha 0.75
+RIPPER
PROJECTILE
States
{
Spawn:
LASR B 0
See:
LASR "#" 65
Death:
LASR "#" 1 A_FadeOut(0.07,1)
Loop
}
}
Actor XaneSwordBeam2_2 : XaneSwordBeam2_1
{
States
{
Spawn:
LASR C 0
Goto See
}
}
Actor XaneSwordBeam2_3 : XaneSwordBeam2_1
{
States
{
Spawn:
LASR D 0
Goto See
}
}
Actor XaneSwordBeam2_4 : XaneSwordBeam2_1
{
States
{
Spawn:
LASR E 0
Goto See
}
}

//Claw objects
actor ClawCheck
{
Radius 2
Height 4
Speed 0
Scale 1
PROJECTILE
+MISSILE
-SOLID
var int user_velx;
var int user_vely;
var int user_velz;
States
{
Spawn:
TNT1 A 0
TNT1 B 0 A_SetUserVar("user_velx",velx)
TNT1 B 0 A_SetUserVar("user_vely",vely)
TNT1 B 0 A_SetUserVar("user_velz",velz)
TNT1 A 0 ACS_NamedExecute("ClawVerify",0,2,0,0)	//2 = Lock player in place temporarily.
TNT1 A 0 A_TakeInventory("Variable1",20)
TNT1 A 0 A_GiveInventory("Variable1",1)

TNT1 A 0 A_GiveInventory("Variable1",1)
TNT1 A 1 A_ChangeVelocity(user_velx, user_vely, user_velz, CVF_REPLACE)
TNT1 A 0 A_GiveInventory("Variable1",1)
TNT1 A 1 A_ChangeVelocity(user_velx, user_vely, user_velz, CVF_REPLACE)
TNT1 A 0 A_GiveInventory("Variable1",1)
TNT1 A 1 A_ChangeVelocity(user_velx, user_vely, user_velz, CVF_REPLACE)

TNT1 B 0 A_SetUserVar("user_velx",user_velx/3)
TNT1 B 0 A_SetUserVar("user_vely",user_vely/3)
TNT1 B 0 A_SetUserVar("user_velz",user_velz/3)
See:
TNT1 A 0 A_GiveInventory("Variable1",1)
TNT1 A 0 A_ChangeVelocity(user_velx, user_vely, user_velz, CVF_REPLACE)
TNT1 A 1 A_JumpIfInventory("NoWall",1,"GiveToken")	//Yes, NoWall = a point was nearby, not the other way around here!
TNT1 A 0 A_ChangeVelocity(user_velx, user_vely, user_velz, CVF_REPLACE)
TNT1 A 0 A_JumpIfInventory("Variable1",20,"Death")
Loop
Death:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
GiveToken:
TNT1 A 2 ACS_NamedExecute("ClawVerify",0,0,0,0)	//0 = Temporarily report valid hook spot to the claw.
Goto FadeOut	
}
}

actor ClawSpot 2019
{
Radius 16
Height 16
Scale 1.13
-SOLID
+NOGRAVITY
+NODAMAGETHRUST
+INVULNERABLE
+NOINTERACTION
States
{
Spawn:
TEND C 0
TEND C 1 A_RadiusGive("NoWall",28,RGF_MISSILES)
Loop
}
}

Actor Claw1000
{
Radius 4
Height 8
Speed 32
Scale 2.5
Damage (0)
DamageType "Stun"
//PROJECTILE
-SOLID
+NOGRAVITY
Friction 0
Args 0
var int user_x;
var int user_y;
var int user_z;
States
{
Spawn:
TNT1 A 0
TEND B 1 ACS_NamedExecuteAlways("ClawGenerate",0,Args[0],0,0)
See:
TEND B 1
TEND B 0 A_SetUserVar("user_x",velx)
TEND B 0 A_SetUserVar("user_y",vely)
TEND B 0 A_SetUserVar("user_z",velz)
TEND B 1
TEND B 0 A_ChangeFlag("SOLID",TRUE)
TEND BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB 1 A_JumpIf(min(velx,vely)==0.0,"Death")
Retract:
TEND B 0 A_ChangeVelocity(-velx,-vely,-velz,CVF_REPLACE)
TEND B 50
Goto FadeOut
Pain:
TEND B 0
TEND B 0 A_ChangeVelocity(-user_x,-user_y,-user_z,CVF_REPLACE)
EnemyRetract:
TEND B 1
TEND B 0 A_CheckProximity("FadeOut","XanePlayer",32.0,1)//,CPXF_ANCESTOR)
Loop
Death:
TNT1 A 0
TNT1 A 0 A_Explode((27),32,!XF_HURTSOURCE,FALSE,32)
TEND BB 1 A_Stop
WaitForRetract:
TEND B 1 A_JumpIfInventory("Variable1",1,"Pain")
Loop
FadeOut:
TEND B 1 A_FadeOut(1,1)
Loop
}
}
Actor Claw1001 : Claw1000 { Args 1 }
Actor Claw1002 : Claw1000 { Args 2 }
Actor Claw1003 : Claw1000 { Args 3 }
Actor Claw1004 : Claw1000 { Args 4 }
Actor Claw1005 : Claw1000 { Args 5 }
Actor Claw1006 : Claw1000 { Args 6 }
Actor Claw1007 : Claw1000 { Args 7 }

Actor ClawChain
{
Scale 0.75
Radius 2
Height 4
-SOLID
+NOGRAVITY
+NOINTERACTION
States
{
Spawn:
TEND A -1
Stop
}
}

Actor MaryBounce_Explosion
{
Damage (0)
Radius 4
Height 8
Speed 16
DamageType "Bounce"
PROJECTILE
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_Explode((20),64,0,0,64,0,"BulletPuff","Bounce")
FadeOut:
TNT1 A 1 A_FadeOut(1,1)
Loop
}
}

Actor Mary_LookAtHammer : Inventory { Inventory.MaxAmount 1 }
Actor MaryHammer_MidAirDone : Inventory { Inventory.MaxAmount 1 }
Actor MaryHammer_Water : Inventory { Inventory.MaxAmount 1 }
Actor JuiceBoxA : Inventory { Inventory.MaxAmount 1	 }
Actor FruitA : Inventory { Inventory.MaxAmount 1	 }
Actor MHammer_Active : Inventory { Inventory.MaxAmount 1 }
Actor Mary_HammerUses : Inventory { Inventory.MaxAmount 16 }

//298-299 availaible.