Actor ForceFlatten : Inventory { Inventory.MaxAmount 1 }
Actor ForceJump : Inventory { Inventory.MaxAmount 1 }
Actor CryingBonus : Inventory { Inventory.MaxAmount 1 }	//If the player cries near a monster, this will give a reward upon death of some monsters.

actor ForceRailJump
{
+INVISIBLE
+NOGRAVITY
-SOLID
States
{
Spawn:
TNT1 A 0
TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_RadiusGive("ForceJump", 96, RGF_MONSTERS, 1)
Death:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}
Actor XMonster
{
PainChance 256
MONSTER
//$Title Unnamed Monster
//$Category monsters
States
{
Spawn:
UNKN A -1
Stop
Death.Flatten:
"####" "#" 0 A_ScreamAndUnblock
"####" "#" 1 A_SetScale(scalex, scaley-0.1)
"####" "#" 1 A_SetScale(scalex, scaley-0.1)
"####" "#" 1 A_SetScale(scalex, scaley-0.1)
"####" "#" 1 A_SetScale(scalex, scaley-0.1)
"####" "#" 1 A_SetScale(scalex, scaley-0.1)
"####" "#" 1 A_SetScale(scalex, scaley-0.1)
"####" "#" 1 A_SetScale(scalex, scaley-0.1)
"####" "#" 1 A_SetScale(scalex, scaley-0.1)
"####" "#" 1 A_SetScale(scalex, scaley-0.1)
"####" "#" 1 A_SetScale(scalex, scaley-0.1)
"####" "#" 1 A_SetScale(scalex, scaley-0.05)
"####" "#" 1 A_SetScale(scalex, scaley-0.05)
"####" "#" 1 A_SetScale(scalex, scaley-0.05)
"####" "#" 1 A_SetScale(scalex, scaley-0.05)
"####" "#" 1 A_SetScale(scalex, scaley-0.05)
"####" "#" 1 A_SetScale(scalex, scaley-0.05)
"####" "#" 1 A_SetScale(scalex, scaley-0.05)
"####" "#" 1 A_SetScale(scalex, scaley-0.05)
"####" "#" 1 A_SetScale(scalex, scaley-0.05)
"####" "#" 1 A_SetScale(scalex, scaley-0.05)
FadeOut:
"####" "#" 1 A_FadeOut(0.5,1)
Loop
}
}

Actor KWPart// : PotteryBit
{
Radius 1
Height 2
Gravity 0.35
-MISSILE
-NOTELEPORT

States
{
Spawn:
TNT1 G 0
TNT1 G 1 A_Jump(128,"G","H","I","J")
Loop
G:
"####" G 0
Goto Render
H:
"####" H 0
Goto Render
I:
"####" I 0
Goto Render
J:
"####" J 0
Goto Render
K:
"####" K 0
Goto Render
L:
"####" L 0
Goto Render
N:
"####" N 0
Goto Render
O:
"####" O 0
Goto Render
P:
"####" P 0
Goto Render
Q:
"####" Q 0
Goto Render
Render:
"####" "#" 1 A_JumpIf(velz==0.0&&z-floorz<2.5,"BecomeFlat")
Loop
BecomeFlat:
"####" "#" 0 A_ChangeFlag("FLATSPRITE",TRUE)
"####" "#" 0 A_SetScale(scalex+0.33)
"####" "#" 140
FadeOut:
"####" "#" 1 A_FadeOut(0.05,1)
Loop
}
}

Actor TRPart : KWPart
{
Scale 1.5
States
{
Spawn:
TROL Q 0
TROL Q 0 A_QueueCorpse
TROL Q 0 A_Jump(128,"H","O","I","N","J","P","Q")
Loop
}
}

Actor SoapPart : TRPart { Translation "68:68=244:244", "58:58=242:242", "67:67=242:242", "69:69=244:244", "5:5=244:244", "102:111=242:242" }

Actor BloodParts : TRPart { Translation "64:71=104:111", "192:207=96:111", "72:79=102:111", "56:63=102:111" }

Actor Troll : XMonster 303
{
Scale 1.2
Radius 28
Height 64
Health 150
Mass 200
Speed 3
Damage (1)
MONSTER
SeeSound "troll/sight"
ActiveSound "troll/active"
PainSound "troll/pain"
DeathSound "troll/death"
DamageFactor "Glass", 1.9
//+STRIFEDAMAGE
+NOGRAVITY
+DONTHARMCLASS	//This stops trolls from hurting eachother with their slams.
//$Title Cyclops Troll
//$Category monsters/Tier 2
//$Color 1
//$Arg0 Ambush?
//$Arg1 Glass Line ID
//$Arg2 Glass Thing ID
//$Arg3 Ambush Radius
//$Arg3Default 842
//$Arg3RenderStyle Circle
//$Arg3RenderColor 607080
States
{
Spawn:
TNT1 A 0
TNT1 A 8
TNT1 A 0 ACS_NamedExecuteAlways("ColorCoin",0,0,0,0)
TNT1 A 0 A_JumpIf(Args[0]==1,"AmbushJump")
TROL K 0 A_ChangeFlag("NOGRAVITY",FALSE)
TROL ABAC 4 A_Look
Goto Spawn+3
AmbushJump:
TNT1 A 0 A_ChangeFlag("INVULNERABLE",TRUE)
TNT1 A 3 A_CheckProximity("Ambush","PlayerPawn",Args[3],1,CPXF_ANCESTOR)
Loop
Ambush:
TROL K 0 A_ChangeFlag("NOGRAVITY",FALSE)
TROL K 0 A_ChangeVelocity(7,0,24,CVF_RELATIVE|CVF_REPLACE)
TROL K 11
TROL K 0 ACS_NamedExecuteAlways("BreakGlass",0,Args[1],Args[2],TRUE)
TROL K 0 A_ChangeVelocity(8,0,8,CVF_RELATIVE|CVF_REPLACE)
TROL K 12 A_GiveInventory("Variable1",1)
TNT1 A 0 A_ChangeFlag("INVULNERABLE",FALSE)
Look:
TROL K 2 A_Look
Loop
See: 
TROL K 0 A_ChangeFlag("NOGRAVITY",FALSE)
TROL K 0 A_JumpIfInventory("Variable1",1,"Melee")
TROL K 0 A_JumpIf(CallACS("GetSpecialStatus",32,0,0,0),"Cheat")
TROL ABAC 3 A_Chase("Melee","Missile2")
TROL D 3 A_Chase("","")
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
See2:
TROL EFED 3 A_Chase("","")
TROL C 3 A_Chase("Melee","Missile1")
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
Loop
Melee:
TROL K 0 A_TakeInventory("Variable1",1)
TROL K 8
TROL K 0 A_JumpIf(CallACS("GetSpecialStatus",32,0,0,0),"Cheat")
TROL L 3
TROL K 0 A_JumpIf(CallACS("GetSpecialStatus",32,0,0,0),"Cheat")
TROL K 0 A_JumpIf(velz==0.0,"FireJumpSlam")
Goto SlamRevert
FireJumpSlam:
TROL M 0 A_PlaySound("troll/smash", CHAN_VOICE, 0.75, FALSE)
TROL M 0 A_CustomMissile("Troll_Explosion1",32,32,0,CMF_ABSOLUTEPITCH,-90)
TROL M 36 A_Quake(2,17,0,512)
TROL K 0 A_JumpIf(CallACS("GetSpecialStatus",32,0,0,0),"Cheat")
TROL K 0 ACS_NamedExecuteAlways("ShowTutorial",0,3,0,0)
SlamRevert:
TROL L 7
TROL K 0 A_JumpIf(CallACS("GetSpecialStatus",32,0,0,0),"Cheat")
Goto See
Missile1:
TROL K 0 A_JumpIfCloser(256,"Melee")
Goto See
Missile2:
TROL K 0 A_JumpIfCloser(256,"Melee")
Goto See2
Pain:
TIGR A 0 A_SpawnItem("HurtMonster",64,32)
TROL L 0 A_Pain
TROL L 0 A_ChangeFlag("INVULNERABLE",TRUE)
TROL LMLM 1
TROL L 0 A_ChangeFlag("INVULNERABLE",FALSE)
TROL LMLMLMLMLMLML 1
TROL K 0 A_JumpIf(CallACS("GetSpecialStatus",32,0,0,0),"Cheat")
TROL M 17
TROL L 3
Goto Melee
Pain.Stun:
TROL L 0 A_Pain
TROL L 3 A_ChangeVelocity(0,0,0,CVF_REPLACE)
TROL MMMMMMLLLLLLMMMMLLLLLMMMMLLLLMMMLLLMMLLML 1
Goto See
Pain.Flatten:
TROL L 0 A_ChangeFlag("NOPAIN",TRUE)
TROL LLLLL 1 A_SetScale(scalex, scaley-0.1)
TROL MM 1 A_SetScale(scalex, scaley-0.05)
TROL M 70
TROL MM 1 A_SetScale(scalex, scaley+0.05)
TROL LLLLLKK 1 A_SetScale(scalex, scaley+0.1)
TROL KK 1 A_SetScale(scalex, scaley-0.1)
TROL K 0 A_ChangeFlag("NOPAIN",FALSE)
Goto Melee
Pain.AirDash:
"####" "#" 0 A_FaceTarget
"####" "#" 0 A_ChangeVelocity(-22.5,Random(-2,2),11.75,CVF_REPLACE|CVF_RELATIVE)
Goto Pain
Pain.Fire:
TROL M 0 A_ChangeFlag("INVULNERABLE",TRUE)
TROL M 0 A_CustomMissile("BurningPerson",32,32,0,CMF_ABSOLUTEPITCH,-90)
TROL LLMM 1 A_SpawnItemEx("FlowerProjectile3_Trail",Random(-36,36),Random(-36,36),Random(0,76),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION)
TROL M 0 A_CustomMissile("BurningPerson",32,32,0,CMF_ABSOLUTEPITCH,-90)
TROL LLMM 1 A_SpawnItemEx("FlowerProjectile3_Trail",Random(-36,36),Random(-36,36),Random(0,76),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION)
TROL M 0 A_CustomMissile("BurningPerson",32,32,0,CMF_ABSOLUTEPITCH,-90)
TROL LLMM 1 A_SpawnItemEx("FlowerProjectile3_Trail",Random(-36,36),Random(-36,36),Random(0,76),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION)
TROL M 0 A_ChangeFlag("INVULNERABLE",FALSE)
FireJump:
TROL M 2 A_FaceTarget(90)
TROL L 3 A_ChangeVelocity(10.25,0,14.75,CVF_RELATIVE|CVF_REPLACE)
FireJumpLoop:
TROL K 1 A_JumpIf(z-floorz<48.5,"FireJumpPrepare")
Loop
FireJumpPrepare:
TROL L 1 A_JumpIf(z-floorz<4.5,"FireJumpSlam")
Loop
Cheat:
DANC B 0 ACS_NamedExecuteAlways("SpecialFall",0,-1,0,0)
Goto Pain
Death.Fire:
TROL G 0 A_GiveInventory("Variable1",1)
Death:
MDeath:
TROL G 0 A_ChangeFlag("NOCLIP", TRUE)	//Prevent getting stuck on other monsters or the player.
TROL G 0 A_ScreamAndUnblock
TROL G 0 A_ChangeFlag("LOWGRAVITY",1)
TROL G 0 A_ChangeVelocity(0,0,12.75,CVF_RELATIVE)
TROL GGGGGGGGGGGGGGGGGGGG 1 A_SpawnItemEx("TempBlood",0,0,0,Random(-2.5,2.5),Random(-2.5,2.5),Random(0,-1),Random(0,360),SXF_TRANSFERTRANSLATION|SXF_NOCHECKPOSITION|SXF_CLIENTSIDE,6)
TROL G 0 A_ChangeFlag("LOWGRAVITY",0)
FallLoop:
TROL G 0 A_SpawnItemEx("TempBlood",0,0,0,Random(-2.5,2.5),Random(-2.5,2.5),Random(0,-1),Random(0,360),SXF_TRANSFERTRANSLATION|SXF_NOCHECKPOSITION|SXF_CLIENTSIDE,6)
TROL G 1 A_CheckFloor("XDeath")
Loop
XDeath:
TNT1 A 0 A_GiveInventory("IncreaseCombo",1,AAPTR_TARGET)
TNT1 A 0 A_GiveInventory("ScoreX",15,AAPTR_TARGET)
TROL GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG 0 A_SpawnItemEx("TRPart",0,0,0,Random(-4.5,4.5),Random(-4.5,4.5),Random(3,6),Random(0,360),SXF_TRANSFERTRANSLATION|SXF_NOCHECKPOSITION|SXF_CLIENTSIDE,12)
TNT1 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG 0 A_SpawnItemEx("TRPart",0,0,0,Random(-4.5,4.5),Random(-4.5,4.5),Random(3,6),Random(0,360),SXF_TRANSFERTRANSLATION|SXF_NOCHECKPOSITION|SXF_CLIENTSIDE,12)
TROL G 0 A_JumpIfInventory("Variable1",1,"SpawnBlobs")
Goto FadeOut
SpawnBlobs:
TROL G 0 A_SpawnItemEx("FireBlob",0,0,4,0,0,7.5,0,SXF_NOCHECKPOSITION)
TROL G 0 A_SpawnItemEx("FireBlob",24,0,4,-5.5,0,7.5,0,SXF_NOCHECKPOSITION)
TROL G 0 A_Turn(90)
TROL G 0 A_SpawnItemEx("FireBlob",24,0,4,-5.5,0,7.5,0,SXF_NOCHECKPOSITION)
TROL G 0 A_Turn(90)
TROL G 0 A_SpawnItemEx("FireBlob",24,0,4,-5.5,0,7.5,0,SXF_NOCHECKPOSITION)
TROL G 0 A_Turn(90)
TROL G 0 A_SpawnItemEx("FireBlob",24,0,4,-5.5,0,7.5,0,SXF_NOCHECKPOSITION)
Goto FadeOut
Drown:
TNT1 A 0 A_GiveInventory("IncreaseCombo",1,AAPTR_TARGET)
TNT1 A 0 A_GiveInventory("ScoreX",20,AAPTR_TARGET)
TNT1 A 0 A_ChangeFlag("COUNTKILL",FALSE)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}

Actor FireBlob
{
Radius 16
Height 32
Damage (1)
Health 32767
Speed 12
RenderStyle Subtract
+INVULNERABLE
+BUDDHA
-LOOKALLAROUND
-SOLID
-ISMONSTER
-COUNTKILL
States
{
Spawn:
BLOB A 0
//BLOB A 0 A_PlaySound("grind/loop", CHAN_VOICE, 1.0, TRUE, 4.0)
BLOB A 0 A_TakeInventory("Variable1",70)
BLOB A 0 A_TakeInventory("Variable2",70)
CheckForFloor:
COP1 AAAAAAAA 0 { A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(4,16),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION); }
TROL M 0 A_CustomMissile("BurningPerson",32,32,0,CMF_ABSOLUTEPITCH,-90)
BLOB C 1 A_JumpIf(z-floorz<3.5,"LookBurn")
Loop
LookBurn:
COP1 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 768, 0, 20, "StartBurn")
COP1 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 768, 0, 45, "StartBurn")
COP1 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 768, 0, 70, "StartBurn")
COP1 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 768, 0, 180, "StartBurn")
COP1 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 768, 0, 360, "StartBurn")
Goto FadeOut
StartBurn:
COP1 AAAAAAAA 0 { A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(4,16),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION); }
TROL M 0 A_CustomMissile("BurningPerson",32,32,0,CMF_ABSOLUTEPITCH,-90)
BLOB A 1 A_Chase("","")
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckCoolOffTo2")
Burn2:
BLOB C 0 A_JumpIfInventory("Variable2", 1, "FireDeath")
COP1 AAAAAAAA 0 { A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(4,16),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION); }
BLOB B 1 A_Chase("","")
COP1 AAAAAAAA 0 { A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(4,16),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION); }
//TROL M 0 A_CustomMissile("BurningPerson",32,32,0,CMF_ABSOLUTEPITCH,-90)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckCoolOffTo3")
Burn3:
BLOB C 0 A_JumpIfInventory("Variable2", 1, "FireDeath")
BLOB C 1 A_Chase("","")
COP1 AAAAAAAA 0 { A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(4,16),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION); }
BLOB B 1 A_Chase("","")
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckCoolOffTo4")
Burn4:
BLOB C 0 A_JumpIfInventory("Variable2", 1, "FireDeath")
COP1 A 0 A_ClearTarget
COP1 A 0 A_ClearLastHeard
COP1 B 0 A_GiveInventory("Variable1",1)
COP1 B 0 A_JumpIfInventory("Variable1",35,"FireDeath")
COP1 A 0 A_ChangeFlag("FRIENDLY",TRUE)
COP1 A 0 A_ChangeFlag("LOOKALLAROUND",FALSE)
COP1 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 768, 0, 20, "StartBurn")
COP1 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 768, 0, 45, "StartBurn")
COP1 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 768, 0, 70, "StartBurn")
COP1 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 768, 0, 180, "StartBurn")
COP1 A 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 768, 0, 360, "StartBurn")
COP1 A 0 A_Log("ERROR: Fire Blob couldn't find a target!")
Goto StartBurn
FireDeath:
//COP1 B 0 A_PlaySound("grind/end", CHAN_VOICE, 1.0, FALSE, 3.0)
Goto DieFire
CheckCoolOffTo2:
FIGH A 0 ACS_NamedExecuteAlways("GetSpecialStatus",0,0,TRUE,0)	//This checks if the enemy is in water and gives them the "Variable2" inventory item.
Goto Burn2
CheckCoolOffTo3:
FIGH A 0 ACS_NamedExecuteAlways("GetSpecialStatus",0,0,TRUE,0)	//This checks if the enemy is in water and gives them the "Variable2" inventory item.
Goto Burn3
CheckCoolOffTo4:
FIGH A 0 ACS_NamedExecuteAlways("GetSpecialStatus",0,0,TRUE,0)	//This checks if the enemy is in water and gives them the "Variable2" inventory item.
Goto Burn4
DieFire:
BLOB A 1 { A_FadeOut(0.1,1); A_SetScale(1.0,scaley-0.1,AAPTR_DEFAULT,TRUE); }
Loop
}
}

Actor HurtMonster	//Used for bouncing on enemies.
{
+NOINTERACTION
+NOCLIP
States
{
Spawn:
TNT1 A 0
TNT1 A 0 ACS_NamedExecute("IndicatePain",0,0,0,0)
TNT1 A 6
Death:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}

Actor Troll_Explosion1
{
Damage (0)
Radius 4
Height 8
Speed 16
PROJECTILE
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_Explode((12),160,!XF_HURTSOURCE,0,1,0,0)
FadeOut:
TNT1 A 1 A_FadeOut(1,1)
Loop
}
}

Actor TigerPain : Inventory { Inventory.MaxAmount 3 }

Actor Tiger1 : XMonster 307
{
Health 225
Radius 28
Height 64
Mass 150
Speed 20
Damage 7
//PainChance 172
MinMissileChance 244
Translation "250:250=232:232", "64:73=111:125" //Troll guts recolor
Obituary "%k was eaten alive by the tiger."
+JUMPDOWN
MONSTER
DamageFactor "Bounce", 2.0
SeeSound "m3/sight"
ActiveSound "tiger/active"
PainSound "m3/pain"
DeathSound "m3/death"
//$Title Tiger
//$Category monsters/Tier 2
//$Sprite TIGRC0
//$Color 17
States
{
Spawn:
TIGR AAB 5 A_Look
Loop
See:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR A 0 A_JumpIfCloser(412,"Fast")
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR AAAB 1 A_Chase("See","See")
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR BBCCC 1 A_Chase("See","See")
Loop
Chase:
TIGR A 0 A_JumpIfCloser(768,"ChaseSlow",TRUE)
TIGR A 0 A_FaceTarget
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR A 2 A_ChangeVelocity(24,0,0,CVF_REPLACE|CVF_RELATIVE)
TIGR B 0 A_FaceTarget
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR B 2 A_ChangeVelocity(24,0,0,CVF_REPLACE|CVF_RELATIVE)
TIGR C 0 A_FaceTarget
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR C 2 A_ChangeVelocity(24,0,0,CVF_REPLACE|CVF_RELATIVE)
TIGR A 0 A_Jump(32,"JumpCheck")
Loop
ChaseSlow:
TIGR A 0 A_FaceTarget
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR A 3 A_ChangeVelocity(12,0,0,CVF_REPLACE|CVF_RELATIVE)
TIGR B 0 A_FaceTarget
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR B 3 A_ChangeVelocity(12,0,0,CVF_REPLACE|CVF_RELATIVE)
TIGR C 0 A_FaceTarget
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR C 3 A_ChangeVelocity(12,0,0,CVF_REPLACE|CVF_RELATIVE)
TIGR A 0 A_Jump(24,"JumpCheck")
TIGR A 0 A_JumpIfCloser(160,"Melee")
Goto Chase
JumpCheck:
TIGR A 0 A_JumpIfCloser(384,"Chase",TRUE)
TIGR A 4
TIGR B 3 A_FaceTarget
TIGR C 0 A_ChangeVelocity(9,0,6,CVF_RELATIVE|CVF_REPLACE)
JumpCheckLoop:
TIGR C 1
TIGR C 0 A_CheckFloor("Land")
Loop
Fast:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR A 0 A_JumpIfCloser(256,"Medium")
PainFast:
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR AAA 1 A_Chase
TIGR "#" 2 A_ChangeVelocity(15,Random(-3,3),velz*2,CVF_REPLACE|CVF_RELATIVE)
TIGR AAA 1 A_Chase
TIGR "#" 2 A_ChangeVelocity(15,Random(-3,3),velz*2,CVF_REPLACE|CVF_RELATIVE)
TIGR AAA 1 A_Chase
TIGR "#" 2 A_ChangeVelocity(15,Random(-3,3),velz*2,CVF_REPLACE|CVF_RELATIVE)
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR BBB 1 A_Chase
TIGR "#" 2 A_ChangeVelocity(15,Random(-3,3),velz*2,CVF_REPLACE|CVF_RELATIVE)
TIGR BBB 1 A_Chase
TIGR "#" 2 A_ChangeVelocity(15,Random(-3,3),velz*2,CVF_REPLACE|CVF_RELATIVE)
TIGR BBB 1 A_Chase
TIGR "#" 2 A_ChangeVelocity(15,Random(-3,3),velz*2,CVF_REPLACE|CVF_RELATIVE)
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR CCC 1 A_Chase
TIGR "#" 2 A_ChangeVelocity(15,Random(-3,3),velz*2,CVF_REPLACE|CVF_RELATIVE)
TIGR CCC 1 A_Chase
TIGR "#" 2 A_ChangeVelocity(15,Random(-3,3),velz*2,CVF_REPLACE|CVF_RELATIVE)
TIGR CCC 1 A_Chase
TIGR "#" 2 A_ChangeVelocity(15,Random(-3,3),velz*2,CVF_REPLACE|CVF_RELATIVE)
Goto See
Medium:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR A 0 A_JumpIfCloser(128,"Slow")
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR AA 2 A_Chase
TIGR "#" 1 A_ChangeVelocity(10,Random(-2,2),velz*2,CVF_REPLACE|CVF_RELATIVE)
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR BB 2 A_Chase
TIGR "#" 1 A_ChangeVelocity(10,Random(-2,2),velz*2,CVF_REPLACE|CVF_RELATIVE)
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR CC 2 A_Chase
TIGR "#" 1 A_ChangeVelocity(10,Random(-2,2),velz*2,CVF_REPLACE|CVF_RELATIVE)
Goto See
Slow:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR A 3 A_Chase
TIGR "#" 2 A_ChangeVelocity(7,Random(-1.5,1.5),velz*2,CVF_REPLACE|CVF_RELATIVE)
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR B 3 A_Chase
TIGR "#" 2 A_ChangeVelocity(7,Random(-1.5,1.5),velz*2,CVF_REPLACE|CVF_RELATIVE)
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR C 3 A_Chase
TIGR "#" 2 A_ChangeVelocity(7,Random(-1.5,1.5),velz*2,CVF_REPLACE|CVF_RELATIVE)
Goto See
DistanceChecks:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR C 0 A_JumpIfCloser(256,"Dis1")
TIGR C 0 A_GiveInventory("Weakness",1)
TIGR C 12 A_ChangeVelocity(Random(16,24),Random(-0.85,0.85),12,CVF_RELATIVE|CVF_REPLACE,AAPTR_DEFAULT)
Goto MissileAir
Dis1:
TIGR C 0 A_JumpIfCloser(160,"Dis2")
TIGR C 0 A_GiveInventory("Weakness",1)
TIGR C 1 A_ChangeVelocity(Random(13,17),Random(-1.5,1.5),10,CVF_RELATIVE|CVF_REPLACE,AAPTR_DEFAULT)
TIGR C 11 ACS_NamedExecuteAlways("EnemyShadow",0,0,0,0)
Goto MissileAir
Dis2:
TIGR C 0 A_GiveInventory("Weakness",1)
TIGR C 0 A_JumpIfCloser(164,"Melee")
TIGR C 1 A_ChangeVelocity(Random(12.25,16.25),Random(-1.02,1.02),7,CVF_RELATIVE|CVF_REPLACE,AAPTR_DEFAULT)
TIGR C 11 ACS_NamedExecuteAlways("EnemyShadow",0,0,0,0)
Goto MissileAir
Melee:
TIGR C 0 A_JumpIf(velz!=0.0,"Fast")
TIGR A 2 A_FaceTarget
TIGR B 2 A_ChangeVelocity(-8.5,Random(-8,8),6,CVF_RELATIVE|CVF_REPLACE,AAPTR_DEFAULT)
TIGR CBAB 2
TIGR D 0 A_GiveInventory("Weakness",1)
TIGR C 1 A_ChangeVelocity(20,Random(-0.75,0.75),6.75,CVF_RELATIVE|CVF_REPLACE,AAPTR_DEFAULT)
TIGR C 2 ACS_NamedExecuteAlways("EnemyShadow",0,0,0,0)
Goto CheckFloorLoop
CheckFloorLoop:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR C 3 A_CheckFloor("SecXaneAttempt")
TIGR C 0 A_CustomMissile("TigerExplosion",4,0,0,CMF_ABSOLUTEPITCH,-90)
Loop
SecXaneAttempt:
TIGR D 0 A_TakeInventory("Weakness",1)
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR DDCB 3
TIGR C 0 A_JumpIf(velz!=0.0,"Fast")
TIGR A 0 A_FaceTarget
TIGR D 0 A_GiveInventory("Weakness",1)
TIGR A 1 A_ChangeVelocity(20,Random(-1.5,1.5),6.75,CVF_RELATIVE|CVF_REPLACE,AAPTR_DEFAULT)
TIGR A 2 ACS_NamedExecuteAlways("EnemyShadow",0,0,0,0)
TIGR BC 2
Goto CheckFloorLoopSecond
CheckFloorLoopSecond:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR C 3 A_CheckFloor("TigerLandLong")
TIGR C 0 A_CustomMissile("TigerExplosion",4,0,0,CMF_ABSOLUTEPITCH,-90)
Loop
Pain:
TIGR A 0 A_JumpIfInventory("Weakness",1,"Weakness")
TIGR A 0 A_SpawnItem("HurtMonster",64,32)
TIGR A 0 A_PigPain
TIGR A 0 A_ChangeFlag("INVULNERABLE",TRUE)
TIGR DBAB 1 A_FaceTarget
TIGR A 0 A_ChangeFlag("INVULNERABLE",FALSE)
TIGR D 6
TIGR AB 1
Goto PainFast
Weakness:
TIGR D 0 A_ChangeFlag("INVULNERABLE",TRUE)
TIGR D 0 A_ChangeFlag("NOPAIN",TRUE)
TIGR A 0 A_SpawnItem("HurtMonster",64,32)
TIGR D 0 A_TakeInventory("Weakness",1)
TIGR D 0 A_PlaySound("wok/g34",CHAN_VOICE,1.0,FALSE,0.75)
TIGR D 0 A_FaceTarget
TIGR D 1 A_ChangeVelocity(-20,Random(-0.75,0.75),14,CVF_REPLACE|CVF_RELATIVE)
TIGR C 2 ACS_NamedExecuteAlways("EnemyShadow",0,0,0,0)
WeaknessCheckFloor:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR D 1 A_CheckFloor("WeaknessBounce")
Loop
WeaknessBounce:
TIGR D 0 A_ChangeFlag("INVULNERABLE",FALSE)
TIGR D 0 A_ChangeVelocity(-15,min(velx,vely)*2,10.5,CVF_REPLACE|CVF_RELATIVE)
TIGR A 1 A_DamageSelf(45,"None")
TIGR B 1 ACS_NamedExecuteAlways("EnemyShadow",0,0,0,0)
TIGR A 1 A_ChangeFlag("NOPAIN",FALSE)
WeaknessCheckFloor2:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR D 1 A_CheckFloor("Fast")
Loop
Pain.AirDash:
TIGR A 0 A_JumpIfInventory("Weakness",1,"Weakness")
"####" "#" 0 A_FaceTarget
"####" "#" 0 A_ChangeVelocity(-24,Random(-6.25,6.25),12.5,CVF_REPLACE|CVF_RELATIVE)
Goto Pain
Missile:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR A 0 A_FaceTarget
TIGR AAAB 3 
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR A 0 A_JumpIf(velz==0.0,"DistanceChecks")
Goto Fast
MissileAir:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR C 3 A_CheckFloor("TigerLand")
TIGR C 0 A_CustomMissile("TigerExplosion",4,0,0,CMF_ABSOLUTEPITCH,-90)
Loop
CheckDeath:
TIGR D 0 A_TakeInventory("Weakness",1)
DANC B 0 A_ChangeFlag("INVULNERABLE",FALSE)
DANC B 0 ACS_NamedExecuteAlways("SpecialFall",0,-1,0,0)
TIGR AABBCCBBABCB 3
Goto See
TigerLand:
TIGR D 0 A_TakeInventory("Weakness",1)
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR D 0 A_ChangeFlag("MISSILEMORE",FALSE)
TIGR D 0 A_ChangeFlag("MISSILEEVENMORE",FALSE)
TIGR D 30
TIGR AB 2
TIGR C 0 A_FaceTarget
TIGR C 15 A_ChangeVelocity(Random(-2.25,2.25),Random(-3.25,3.25),Random(3.5,6.75),CVF_RELATIVE|CVF_REPLACE)
TIGR B 2
Goto See
TigerLandLong:
TROL A 0 ACS_NamedExecuteAlways("PlayFootstepSound",0,1,0,0)
TIGR D 0 A_ChangeFlag("MISSILEMORE",FALSE)
TIGR D 0 A_ChangeFlag("MISSILEEVENMORE",FALSE)
TIGR D 0 A_TakeInventory("Weakness",1)
TIGR D 70
TIGR AB 2
TIGR C 0 A_FaceTarget
TIGR C 15 A_ChangeVelocity(Random(-2.25,2.25),Random(-3.25,3.25),Random(3.5,6.75),CVF_RELATIVE|CVF_REPLACE)
TIGR B 2
Goto See
Death.Umbrella:
FIGH D 0 A_ScreamAndUnblock
FIGH D 0 A_FaceTarget
FIGH D 0 A_ChangeVelocity(-20,Random(-1.25,1.25),13.75,CVF_RELATIVE|CVF_REPLACE)
Goto QuickDeathFinish
Death.AirDash:
FIGH D 0 A_ScreamAndUnblock
FIGH D 0 A_FaceTarget
FIGH D 0 A_ChangeVelocity(-31.5,Random(-0.25,0.25),14.25,CVF_RELATIVE|CVF_REPLACE)
QuickDeathFinish:
TIGR CBA 2
AwaitSplatter:
TIGR D 1
TIGR D 0 A_JumpIf(velx==0.0,"DeathSkipAnimation")
TIGR D 0 A_JumpIf(vely==0.0,"DeathSkipAnimation")
TIGR D 0 A_JumpIf(velz==0.0,"DeathSkipAnimation")
Loop
Death:
TIGR A 0 A_SpawnItem("HurtMonster",64,32)
TIGR CBAD 1
DeathSkipAnimation:
TIGR A 0 A_GiveInventory("Weakness",1,AAPTR_TARGET)	//Outdated "insult" command
TIGR A 0 A_GiveInventory("ScoreX",300,AAPTR_TARGET)
TIGR A 0 A_ScreamAndUnblock
TNT1 DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD 0 A_SpawnItemEx("BloodParts",0,0,0,Random(-4.5,4.5),Random(-4.5,4.5),Random(3,6),Random(0,360),SXF_TRANSFERTRANSLATION|SXF_NOCHECKPOSITION|SXF_CLIENTSIDE,12)
Goto FadeOut
FadeOut:
TNT1 A 1 A_FadeOut(0.1,FTF_REMOVE)
Goto FadeOut
}
}

Actor TigerExplosion
{
Radius 4
Height 8
Damage (0)
Speed 0
PROJECTILE
States
{
Spawn:
TNT1 A 0
Goto See
See:
TNT1 A 0 A_Explode((5),48,0,0,1,0,0)
Goto FadeOut
FadeOut:
TNT1 A 1 A_FadeOut(1,1)
Loop
}
}

Actor TigerExplosionA
{
Radius 4
Height 8
Damage (0)
Speed 0
PROJECTILE
States
{
Spawn:
TNT1 A 0
Goto See
See:
TNT1 A 0 A_Explode((2),48,0,0,1,0,0)
Goto FadeOut
FadeOut:
TNT1 A 1 A_FadeOut(1,1)
Loop
}
}

Actor Tiger2: Tiger1 308
{
Health 75
Radius 24
Height 56
Mass 150
Speed 18
Scale 0.8
Damage 5
//PainChance 255
MinMissileChance 244
Translation "106:106=1:1", "105:105=0:0", "118:118=217:217", "117:117=98:98", "130:130=114:114", "240:246=128:130", "116:116=217:217" //Troll guts recolor
//Obituary "%k got scared by the scaredy-cat."
+JUMPDOWN
+MISSILEMORE
MONSTER
SeeSound "wtiger/sight"
ActiveSound "wtiger/active"
AttackSound "wtiger/attack"
PainSound "wtiger/pain"
DeathSound "wtiger/death"
//$Title Weak Tiger
//$Category monsters/Tier 1
//$Sprite EDITA0
//$Color 16
States
{
Spawn:
TIGR AAB 5 A_LookEx(LOF_NOSOUNDCHECK,0,512,0,35)
Loop
See:
TIGR C 0 A_TakeInventory("DisableAutoJump",1)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR A 0 A_TakeInventory("TigerPain",1)
TIGR A 2
TIGR AABBBCCC 2 A_Chase
TIGR A 0 A_ChangeFlag("FRIGHTENED",FALSE)
Loop
Dodge:
TIGR A 0 A_FaceTarget
TIGR A 1 A_ChangeVelocity(-8,Random(-1,1),6.5,CVF_RELATIVE|CVF_REPLACE)
TIGR B 1
DodgeLoop:
TIGR C 1 A_CheckFloor("DodgeLand")
Loop
DodgeLand:
TIGR A 0 A_ChangeFlag("FRIGHTENED",TRUE)
TIGR DDAB 1
Goto See
Hesitate:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR A 0 A_PlaySound("wtiger/weakness",CHAN_VOICE,1.0)
TIGR AAAAAAAAAAAAAAAAAAAAAAAA 1 { A_Turn(180.0); A_ChangeVelocity(Random(-0.75,0.75),4,0,CVF_RELATIVE|CVF_REPLACE); }
RunAway:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR A 0 A_ChangeFlag("FRIGHTENED",TRUE)
TIGR A 0 A_ChangeFlag("NOPAIN",TRUE)
TIGR ABCABC 1 { A_Chase(0,0); A_DamageSelf((2),"Normal"); }
TIGR A 0 A_JumpIfCloser(256,"RunAway")
TIGR A 0 A_ChangeFlag("NOPAIN",FALSE)
TIGR AAABBBAABBAB 4 A_ChangeFlag("FRIGHTENED",FALSE)
Goto See
DistanceChecks:
TIGR C 0 A_GiveInventory("DisableAutoJump",1)
TIGR C 0 A_JumpIfCloser(420,"Dis1")
Jump:
TIGR C 1 A_ChangeVelocity(Random(12,17),Random(-0.85,0.85),Random(10,13),CVF_RELATIVE|CVF_REPLACE,AAPTR_DEFAULT)
TIGR C 11 ACS_NamedExecuteAlways("EnemyShadow",0,0,0,0)
Goto MissileAir
Dis1:
TIGR C 0 A_JumpIfCloser(224,"Melee")
TIGR C 1 A_ChangeVelocity(Random(9,14),Random(-2.5,2.5),Random(9,12),CVF_RELATIVE|CVF_REPLACE,AAPTR_DEFAULT)
TIGR C 11 ACS_NamedExecuteAlways("EnemyShadow",0,0,0,0)
Goto MissileAir
Dis2:
TIGR C 1 A_ChangeVelocity(Random(6.25,10.5),Random(-3.04,3.04),Random(7,10),CVF_RELATIVE|CVF_REPLACE,AAPTR_DEFAULT)
TIGR C 11 ACS_NamedExecuteAlways("EnemyShadow",0,0,0,0)
Goto MissileAir
Melee:
TIGR C 0 A_JumpIf(velz!=0.0,"See")
TIGR C 0 A_GiveInventory("DisableAutoJump",1)
TIGR A 0 { A_PlaySound("wtiger/charge",CHAN_AUTO); A_FaceTarget; }
TIGR AADADADD 1 A_ChangeVelocity(-10,0,velz,CVF_REPLACE|CVF_RELATIVE)
TIGR D 24 A_ChangeVelocity(-8,0,velz,CVF_REPLACE|CVF_RELATIVE)
TIGR DAD 1 A_ChangeVelocity(6,0,velz,CVF_REPLACE|CVF_RELATIVE)
TIGR C 0 A_JumpIfCloser(96,"Hesitate")
TIGR A 2 A_FaceTarget
TIGR B 1 A_ChangeVelocity(-8.5,Random(-8,8),6,CVF_RELATIVE|CVF_REPLACE,AAPTR_DEFAULT)
TIGR B 1 ACS_NamedExecuteAlways("EnemyShadow",0,0,0,0)
TIGR CBAB 2
TIGR C 1 A_ChangeVelocity(20,Random(-1.5,1.5),6.75,CVF_RELATIVE|CVF_REPLACE,AAPTR_DEFAULT)
TIGR C 2 ACS_NamedExecuteAlways("EnemyShadow",0,0,0,0)
Goto CheckFloorLoop
CheckFloorLoop:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR C 3 A_CheckFloor("SecXaneAttempt")
TIGR C 0 A_CustomMissile("TigerExplosion",4,0,0,CMF_ABSOLUTEPITCH,-90)
Loop
SecXaneAttempt:
TIGR DDCB 3
TIGR C 0 A_JumpIf(velz!=0.0,"See")
TIGR A 0 A_FaceTarget(120.0,0,0,0)
TIGR A 1 A_ChangeVelocity(20,Random(-1.5,1.5),6.75,CVF_RELATIVE|CVF_REPLACE,AAPTR_DEFAULT)
TIGR A 2 ACS_NamedExecuteAlways("EnemyShadow",0,0,0,0)
TIGR BC 2
Goto CheckFloorLoopSecond
CheckFloorLoopSecond:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR C 3 A_CheckFloor("TigerLand")
TIGR C 0 A_CustomMissile("TigerExplosion",4,0,0,CMF_ABSOLUTEPITCH,-90)
Loop
Pain:
TIGR A 0 A_SpawnItem("HurtMonster",64,32)
TIGR A 0 A_JumpIfInventory("TigerPain",3,"Pain3")
TIGR A 0 A_JumpIfInventory("TigerPain",2,"Pain2")
TIGR A 0 A_ChangeVelocity(-6.75,Random(-2.5,2.5),6.75,CVF_RELATIVE|CVF_REPLACE,AAPTR_DEFAULT)
PainCommon:
TIGR A 0 A_PigPain
TIGR A 0 A_GiveInventory("TigerPain",1)
TIGR C 0 A_TakeInventory("DisableAutoJump",1)
TIGR A 0 A_ChangeFlag("INVULNERABLE",TRUE)
TIGR AAAB 1
TIGR A 0 A_ChangeFlag("INVULNERABLE",FALSE)
TIGR BCCCBBAABCCBABCBABCB 1
TIGR A 0
Goto Dodge
Pain2:
TIGR A 0 A_ChangeVelocity(-13.5,Random(-3.5,3.5),7,CVF_RELATIVE|CVF_REPLACE,AAPTR_DEFAULT)
Goto PainCommon
Pain3:
TIGR A 0 A_ChangeVelocity(-20,Random(-4.5,4.5),7.25,CVF_RELATIVE|CVF_REPLACE,AAPTR_DEFAULT)
Goto PainCommon
Grind:	//Grinding on a rail.
FIGH B 0 A_TakeInventory("ForceJump",1)
TIGR A 4
TIGR BC 1 A_JumpifInventory("ForceJump",1,"GrindEnd")
Goto Grind+2
GrindEnd:
TIGR B 3
TIGR C 14 A_ChangeVelocity(-6,0,7,CVF_REPLACE|CVF_RELATIVE)
TIGR BAAB 2
TIGR C 16 A_ChangeVelocity(16,0,15,CVF_REPLACE|CVF_RELATIVE)
TIGR C 0 A_TakeInventory("DisableAutoJump",1)
GrindEndLoop:
TIGR C 0 A_CheckFloor("TigerLand")
TIGR C 1 A_JumpIf(velz==0.0,"TigerLand")
Loop
Pain.AirDash:
"####" "#" 0 A_FaceTarget
"####" "#" 0 A_ChangeVelocity(-32,Random(-3.75,3.75),15,CVF_REPLACE|CVF_RELATIVE)
Goto Pain
Missile:
TIGR A 0 A_FaceTarget
TIGR AAAB 3 
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR B 0 A_JumpIfInTargetLOS("MissileCheck",90)
Goto Spawn
MissileCheck:
TIGR C 0 A_JumpIf(velz==0.0,"DistanceChecks")
Goto See
MissileAir:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
TIGR C 3 A_CheckFloor("TigerLand")
TIGR C 0 A_CustomMissile("WTigerExplosion",4,0,0,CMF_ABSOLUTEPITCH,-90)
Loop
CheckDeath:
TIGR D 0 A_GiveInventory("DisableAutoJump",1)
TIGR D 0 A_TakeInventory("Weakness",1)
DANC B 0 A_ChangeFlag("INVULNERABLE",FALSE)
DANC B 0 ACS_NamedExecuteAlways("SpecialFall",0,-1,0,0)
TIGR AABBCCBBABCB 3
TIGR D 0 A_TakeInventory("DisableAutoJump",1)
Goto See
Death:
TIGR A 0 A_ScreamAndUnblock
TIGR ABCD 1
Explode:
TNT1 A 0 A_GiveInventory("IncreaseCombo",1,AAPTR_TARGET)
TNT1 A 0 A_GiveInventory("ScoreX",5,AAPTR_TARGET)
TNT1 DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD 0 A_SpawnItemEx("TRPart",0,0,0,Random(-4.5,4.5),Random(-4.5,4.5),Random(3,6),Random(0,360),SXF_TRANSFERTRANSLATION|SXF_NOCHECKPOSITION|SXF_CLIENTSIDE,12)
Goto FadeOut
TigerLand:
TIGR D 50
TIGR AB 2
TIGR C 0 A_FaceTarget
TIGR C 15 A_ChangeVelocity(Random(-2,2),Random(-5.25,5.25),Random(3,7),CVF_RELATIVE|CVF_REPLACE)
TIGR C 0 A_TakeInventory("DisableAutoJump",1)
TIGR B 2
Goto See
}
}

Actor Tiger3 : Tiger1 305
{
Translation "106:106=243:243", "105:105=242:242", "103:103=58:58", "118:118=241:241", "116:117=240:240", "130:130=240:240", "109:109=60:60", "102:102=245:245"
//$Title Snow Tiger
//$Sprite EDITSTIG
}

Actor WTigerExplosion : TigerExplosion	
{
Damage (0)
States
{
See:
TNT1 A 0 A_Explode((3),48,0,0,1,0,0)
Goto FadeOut
}
}

Actor DGhosts1Explosion : TigerExplosion	
{
Damage (0)
States
{
See:
TNT1 A 0 A_Explode((1),32,0,0,1,0,0)
Goto FadeOut
}
}

Actor BlobA_Size3 309
{
Radius 24
Height 24
Scale 1.34
Health 25
Speed 5
Mass 30
RenderStyle SoulTrans
//PainChance 255
MONSTER
PainSound "blob/pain"
DeathSound "blob/death1"
//$Title Blue Blob
//$Color 9
States
{
Spawn:
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB ABACABAC 3
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
Idle:
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB A 2 A_Look
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB A 2 A_Look
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB A 2 A_Look
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB B 2 A_Look
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB B 2 A_Look
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB B 2 A_Look
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB A 2 A_Look
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB A 2 A_Look
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB A 2 A_Look
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB C 2 A_Look
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB C 2 A_Look
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB C 2 A_Look
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB A 0 A_ChangeFlag("SOLID",TRUE)
BLOB A 0 A_ChangeFlag("NOCLIP",FALSE)
Loop
See:
BLOB A 0 A_ChangeFlag("SOLID",TRUE)
BLOB A 0 A_ChangeFlag("NOCLIP",FALSE)
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB AAAAA 1 A_Wander
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB BBBBB 1 A_Wander
BLOB A 0 A_Chase
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB AAAA 1 A_Wander
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB CCCC 1 A_Wander
BLOB A 0 A_Chase
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
Loop
Missile:
BLOB B 0 A_Jump(128, "Melee", "ForgetTarget")
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB B 2
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB A 6 A_ChangeVelocity(Random(-1,1),Random(-1,1),10,CVF_REPLACE|CVF_RELATIVE)
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB C 10
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
Goto See
ForgetTarget:
BLOB ABACABAC 1
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB A 0 A_ClearTarget
BLOB ABAC 8
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
Goto Idle
Melee:
BLOB B 1
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB A 13 A_ChangeVelocity(Random(-4,4),Random(-4,4),6,CVF_REPLACE|CVF_RELATIVE)
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB C 13
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
Goto ForgetTarget
Pain:
TIGR A 0 A_SpawnItem("HurtMonster",64,32)
BLOB BABA 1 A_Pain
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
BLOB ACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBA 1 A_Wander
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
Goto Missile
Pain.AirDash:
"####" "#" 0 A_FaceTarget
"####" "#" 16 A_ChangeVelocity(-20,Random(-4.5,4.5),12.5,CVF_REPLACE|CVF_RELATIVE)
BLOB A 0 A_JumpIf(waterlevel==3,"Death")
Goto Pain
Death:
Pain.Flatten:
BLOB A 0 A_ScreamAndUnblock
BLOB C 1 A_SetScale(1.05,1.0)
BLOB C 1 A_SetScale(1.1,0.9)
BLOB C 1 A_SetScale(1.2,0.8)
BLOB C 1 A_SetScale(1.3,0.7)
BLOB C 1 A_SetScale(1.4,0.6)
BLOB C 1 A_SetScale(1.5,0.5)
BLOB C 1 A_SetScale(1.6,0.4)
BLOB C 1 A_SetScale(1.7,0.3)
BLOB C 1 A_SetScale(1.8,0.2)
BLOB C 1 A_SetScale(2.0,0.1)
BLOB C 1 A_SetScale(2.25,0.05)
BLOB C 2 A_SetScale(2.5,0.025)
BLOB C 3 A_SetScale(2.75,0.01)
TNT1 A 0 A_GiveInventory("IncreaseCombo",1,AAPTR_TARGET)
TNT1 A 0 A_GiveInventory("ScoreX",5,AAPTR_TARGET)
BLOB CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC 0 A_SpawnParticle("BrightBlue",0,35,Random(3,5),Random(0,359),Random(-8,8),Random(-8,8),Random(0,6),Random(-5.5,5.5),Random(-5.5,5.5),Random(6.25,8.5),0,0,-1.25)
BLOB C 0 A_SpawnItemEx("BlobA_Size2",-8,-8,1,-6,-6,8,0,SXF_NOCHECKPOSITION)
BLOB C 0 A_SpawnItemEx("BlobA_Size2",8,-8,1,6,-6,8,0,SXF_NOCHECKPOSITION)
BLOB C 0 A_SpawnItemEx("BlobA_Size2",8,8,1,6,6,8,0,SXF_NOCHECKPOSITION)
BLOB C 0 A_SpawnItemEx("BlobA_Size2",-8,8,1,-6,6,8,0,SXF_NOCHECKPOSITION)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}

Actor BlobA_Size2 : BlobA_Size3
{
Radius 18
Height 18
Scale 1
Health 15
Speed 4
Mass 20
-SOLID
PainSound "blob/pain"
DeathSound "blob/death2"
States
{
Spawn:
BLOB ABACABAC 3
Idle:
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB A 2 A_Look
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB A 2 A_Look
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB A 2 A_Look
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB B 2 A_Look
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB B 2 A_Look
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB B 2 A_Look
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB A 2 A_Look
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB A 2 A_Look
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB A 2 A_Look
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB C 2 A_Look
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB C 2 A_Look
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB C 2 A_Look
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB A 0 A_ChangeFlag("SOLID",TRUE)
BLOB A 0 A_ChangeFlag("NOCLIP",FALSE)
Loop
See:
BLOB A 0 A_ChangeFlag("SOLID",TRUE)
BLOB A 0 A_ChangeFlag("NOCLIP",FALSE)
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB AAAAA 1 A_Wander
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB BBBBB 1 A_Wander
BLOB A 0 A_Chase
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB AAAA 1 A_Wander
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
BLOB CCCC 1 A_Wander
BLOB A 0 A_Chase
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_JumpIfCloser(96,"ForcePain")
Loop
Missile:
BLOB B 0 A_Jump(128, "Melee", "ForgetTarget")
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB B 2
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 6 A_ChangeVelocity(Random(-2,2),Random(-2,2),9.5,CVF_REPLACE|CVF_RELATIVE)
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB C 10
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
Goto See
ForgetTarget:
BLOB ABACABAC 1
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 0 A_ClearTarget
BLOB ABAC 8
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
Goto Idle
Melee:
BLOB B 1
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB A 13 A_ChangeVelocity(Random(-8,8),Random(-8,8),5,CVF_REPLACE|CVF_RELATIVE)
BLOB C 13
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
Goto ForgetTarget
ForcePain:
BLOB A 0 A_DamageSelf(15)
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
Pain:
TIGR A 0 A_SpawnItem("HurtMonster",64,32)
BLOB BABA 1 A_Pain
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
BLOB ACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBAACCABBACCABBA 1 A_Wander
BLOB A 0 A_JumpIf(waterlevel>1,"Death")
Goto Missile
Death:
Pain.Flatten:
BLOB A 0 A_ScreamAndUnblock
TNT1 A 0 A_GiveInventory("IncreaseCombo",1,AAPTR_TARGET)
BLOB CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC 0 A_SpawnParticle("BrightBlue",0,35,Random(3,5),Random(0,359),Random(-8,8),Random(-8,8),Random(0,6),Random(-5.5,5.5),Random(-5.5,5.5),Random(6.25,8.5),0,0,-1.25)
BLOB C 0 A_SpawnItemEx("BlobA_Size1",-8,0,1,-6,0,8,0,SXF_NOCHECKPOSITION)
BLOB C 0 A_SpawnItemEx("BlobA_Size1",8,0,1,6,0,8,0,SXF_NOCHECKPOSITION)
BLOB C 0 A_SpawnItemEx("BlobA_Size1",0,8,1,0,6,8,0,SXF_NOCHECKPOSITION)
BLOB C 0 A_SpawnItemEx("BlobA_Size1",0,8,1,0,6,8,0,SXF_NOCHECKPOSITION)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}

Actor BlobA_Size1 : BlobA_Size3
{
Radius 8
Height 8
Scale 0.5
Health 5
Speed 4
Mass 10
+BRIGHT
-SOLID
PainSound "blob/pain"
DeathSound "blob/death3"
States
{
Spawn:
BLOB ABACABAC 6
Idle:
BLOB A 0 A_JumpIf(waterlevel>0,"Death")
TNT1 A 0 A_CheckProximity("Death","PlayerPawn",72.0,1,CPXF_ANCESTOR)
BLOB A 3 A_Look
BLOB A 0 A_JumpIf(waterlevel>0,"Death")
TNT1 A 0 A_CheckProximity("Death","PlayerPawn",72.0,1,CPXF_ANCESTOR)
BLOB B 3 A_Look
BLOB A 0 A_JumpIf(waterlevel>0,"Death")
TNT1 A 0 A_CheckProximity("Death","PlayerPawn",72.0,1,CPXF_ANCESTOR)
BLOB A 3 A_Look
BLOB A 0 A_JumpIf(waterlevel>0,"Death")
TNT1 A 0 A_CheckProximity("Death","PlayerPawn",72.0,1,CPXF_ANCESTOR)
BLOB C 3 A_Look
BLOB A 0 A_ChangeFlag("SOLID",TRUE)
BLOB A 0 A_ChangeFlag("NOCLIP",FALSE)
Loop
See:
BLOB A 0 A_ChangeFlag("SOLID",TRUE)
BLOB A 0 A_ChangeFlag("NOCLIP",FALSE)
BLOB AAAAAAA 1 A_Wander
BLOB A 0 A_JumpIf(waterlevel>0,"Death")
BLOB A 0 A_JumpIfCloser(64,"Death")
BLOB BBBBBBB 1 A_Wander
BLOB A 0 A_JumpIf(waterlevel>0,"Death")
BLOB A 0 A_JumpIfCloser(64,"Death")
BLOB A 0 A_Chase
BLOB A 0 A_JumpIf(waterlevel>0,"Death")
BLOB A 0 A_JumpIfCloser(64,"Death")
BLOB AAAAAAA 1 A_Wander
BLOB A 0 A_JumpIf(waterlevel>0,"Death")
BLOB A 0 A_JumpIfCloser(64,"Death")
BLOB CCCCCCC 1 A_Wander
BLOB A 0 A_JumpIf(waterlevel>0,"Death")
BLOB A 0 A_JumpIfCloser(64,"Death")
BLOB A 0 A_Chase
BLOB A 0 A_JumpIf(waterlevel>0,"Death")
BLOB A 0 A_JumpIfCloser(64,"Death")
Loop
Missile:
BLOB B 0 A_Jump(128, "See")
BLOB B 2
BLOB A 0 A_JumpIf(waterlevel>0,"Death")
BLOB A 6 A_ChangeVelocity(Random(-4,4),Random(-4,4),7.75,CVF_REPLACE|CVF_RELATIVE)
BLOB C 10
BLOB A 0 A_JumpIf(waterlevel>0,"Death")
Goto See
Pain:
TIGR A 0 A_SpawnItem("HurtMonster",64,32)
BLOB BABA 1 A_Pain
BLOB A 0 A_JumpIf(waterlevel>0,"Death")
Goto Missile
Death:
Pain.Flatten:
BLOB A 0 A_ScreamAndUnblock
TNT1 A 0 A_GiveInventory("ScoreX",5,AAPTR_TARGET)
BLOB CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC 0 A_SpawnParticle("BrightBlue",0,35,Random(3,5),Random(0,359),Random(-8,8),Random(-8,8),Random(0,6),Random(-5.5,5.5),Random(-5.5,5.5),Random(6.25,8.5),0,0,-1.25)
FadeOut:
TNT1 A 1 A_FadeOut(0.5,1)
Loop
}
}

Actor Cop1_Enemy : XMonster 310
{
Radius 12
Height 48
Health 50
Speed 10
Damage 8
+LOOKALLAROUND
+MISSILEMORE
+MISSILEEVENMORE
DamageFactor "Fire", 1.5
ActiveSound "cop2/walkietalkie"
PainSound "cop2/pain"
DeathSound "cop2/death"
//$Title Blue HCPD Cop
//$Arg0Title Behavior
//0: Arena (more basic behavior)
//1: Follow path follower indicated by args[1].
//2: Standard behavior.
//$Arg0Default 2
//$Arg1Title Path follower TID
States
{
Spawn:
COP1 A 0 A_JumpIf(Args[0]==0,"BasicBehavior")
COP1 A 0 A_JumpIf(Args[0]==1,"FollowPath")
COP1 ABCBABCBABCBABCB 7 A_LookEx(0, 64, 256, 320, 40, "Walk")
COP1 A 0 A_JumpIfInventory("CDeath",1,"ForceTarget")
COP1 A 0 A_Jump(48, "ReceiveMessage")
Loop
FollowPath:
COP1 A 0 ACS_NamedExecuteAlways("EnemyFollowPath",0,args[1],0,0)
WalkAnimation:
COP1 ABCB 2
Loop
ForceTarget:
COP1 A 0 A_LookEx(0, 0, 768, 768, 360, "React")
COP1 A 0 A_TakeInventory("CDeath",1)
COP1 A 0 A_PlaySound("c3/r3",CHAN_VOICE,1.0,FALSE,0.95)	//Angrily grunt, indicating the cop knew about the death but couldn't find any players.
Goto Spawn
ReceiveMessage:
COP1 A 0 A_PlaySound("cop2/walkietalkie",CHAN_VOICE,1.0,FALSE,1.13)
COP1 BC 3
COP1 D 80
COP1 C 3 A_PlaySound("cop2/pain",CHAN_VOICE,1.0)
COP1 B 3 
Goto Spawn
BasicBehavior:
COP1 A 0 A_ChangeFlag("LOOKALLAROUND",TRUE)
COP1 AAAABBBBCCCCBBBB 1 A_Look
Loop
See:	//For "basic behavior" above.
COP1 AAABBBCCCBBBAAABBBCCCBBB 1 A_Chase("","")
Walk:
COP1 A 0 A_TakeInventory("CDeath",1)
COP1 A 0 A_TakeInventory("CPain",1)
COP1 J 0 A_ChangeFlag("LOWGRAVITY",FALSE)
COP1 J 0 A_ChangeFlag("INVULNERABLE",FALSE)
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 A 0 A_CheckProximity("See2","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
Goto JumpAway	//Doesn't really "jump away" here, obviously.
See2:
TNT1 A 0 A_JumpIfInventory("Variable1",1,"JumpShoot")	//Still have anger towards the crying girl, cop? Let it out!
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
COP1 AB 3 A_Chase
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 CD 3 A_Chase
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 J 0 A_CheckProximity("See3","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
Goto JumpAway
See3:
TNT1 A 0 A_JumpIfInventory("Variable1",1,"JumpShoot")	//Still have anger towards the crying girl, cop? Let it out!
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
COP1 A 0 A_CheckProximity("See2","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
COP1 EDCB 3 A_Chase
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 J 0 A_CheckProximity("Walk","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
Goto JumpAway
ReactPain:
TNT1 A 0 A_JumpIfInventory("Variable1",1,"JumpShoot")	//Still have anger towards the crying girl, cop? Let it out!
COP1 A 0 A_TakeInventory("CPain",1)
COP1 A 0 A_PlaySound("cop2/witness_pain",CHAN_AUTO,1.0)
Goto Missile
React:
TNT1 A 0 A_JumpIfInventory("Variable1",1,"JumpShoot")	//Still have anger towards the crying girl, cop? Let it out!
COP1 I 0 A_CheckLOF("ContinueReaction",CLOFF_JUMPENEMY)
COP1 A 0 A_TakeInventory("CDeath",1)
COP1 A 0 A_GiveInventory("CPain",1)
ContinueReaction:
COP1 A 0 A_PlaySound("cop2/witness",CHAN_VOICE,1.0)
COP1 AAABBBAABBABABACACADADCB 1
Angry:
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 ABC 2 A_Chase(0,0)
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 ABC 2 A_Chase(0,0)
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 ABC 2 A_Chase(0,0)
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 A 0 A_Jump(42,"Attempt")
COP1 J 0 A_CheckProximity("Angry","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
Goto JumpAway
Attempt:
COP1 D 2
COP1 I 0 A_CheckLOF("Proceed",CLOFF_JUMPENEMY)
Goto Angry
Proceed:
COP1 A 0 A_TakeInventory("CDeath",1)
COP1 A 0 A_TakeInventory("CPain",1)
COP1 AABBCGHI 2 A_FaceTarget
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 A 0 A_PlaySound("weapon/gun1", CHAN_AUTO,1.0,FALSE,0.5)
COP1 J 4 A_CustomMissile("Cop1Bullet_Angry",32,8,0)
COP1 A 0 A_PlaySound("weapon/gun1", CHAN_AUTO,1.0,FALSE,0.5)
COP1 K 3 A_CustomMissile("Cop1Bullet_Angry",32,8,0)
COP1 L 2 A_ChangeFlag("LOWGRAVITY",FALSE)
COP1 KLL 2
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
Goto Walk
Missile:
COP1 A 0
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 A 2
COP1 I 0 A_CheckLOF("Fire",CLOFF_JUMPENEMY)
COP1 J 0 A_CheckProximity("Missile2","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
Goto JumpAway
Fire:
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 AB 1
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 C 17
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 G 17
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 HI 3
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 A 0 A_PlaySound("weapon/gun1", CHAN_AUTO,1.0,FALSE,0.5)
COP1 J 3 A_CustomMissile("Cop1Bullet",32,8,0)
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 J 0 A_CheckProximity("Missile2","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
Goto JumpAway
Missile2:
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 KLL 3
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 AB 2
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 C 35
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 B 2
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
Goto Walk
Pain:
"####" "#" 0 A_ChangeFlag("LOWGRAVITY",FALSE)
COP1 J 0 A_JumpIfInventory("Weakness",1,"Weakness")
TIGR A 0 A_SpawnItem("HurtMonster",64,32)
TIGR A 0 A_ChangeFlag("INVULNERABLE",TRUE)
COP1 P 3 A_Pain
TIGR A 0 A_ChangeFlag("INVULNERABLE",FALSE)
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 P 3
TNT1 A 0 A_RadiusGive("CPain",768,RGF_MONSTERS|RGF_NOTARGET)
TNT1 A 0 A_JumpIfInventory("Variable1",1,"JumpShoot")	//Still have anger towards the crying girl, cop? Let it out!
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
Goto Walk
Weakness:
COP1 A 0 A_ChangeFlag("NOPAIN",TRUE)
COP1 A 0 A_TakeInventory("Weakness",1)
COP1 D 2 A_ChangeVelocity(-4,8,0,CVF_REPLACE|CVF_RELATIVE)
COP1 PPPPPPPPPPPPPPPP 1 A_ChangeVelocity(-velx,-vely,0,CVF_REPLACE)
COP1 D 6 A_ChangeVelocity(0,0,0,CVF_REPLACE)
COP1 A 0 A_DamageSelf(13)
COP1 A 0 A_ChangeFlag("NOPAIN",FALSE)
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 CB 3
COP1 A 0 A_JumpIfInventory("Animation2",1,"Crying",AAPTR_TARGET)
COP1 A 0 A_JumpIfHealthLower(7,"FinishHim")
Goto Walk
FinishHim:
COP1 B 1 A_DamageSelf(7)
UNKN A 1 A_Log("ERROR: Cop didn't die from finisher!\nReport to Xane!") 
Stop

//Crying response
Crying:
COP1 A 0 A_GiveInventory("CryingBonus",1)	//Reward the player when this enemy is killed now.
COP1 A 0 A_GiveInventory("Variable1",5)	//Variable1: Times to attack the player cheaply after hearing crying.
COP1 A 0 A_JumpIfHealthLower(7,"FinishHim")
COP1 A 0 A_PlaySound("c3/r3",CHAN_VOICE,1.0,FALSE)	//Angry grunt
COP1 B 2 A_ChangeVelocity(-4,8,0,CVF_REPLACE|CVF_RELATIVE)
COP1 ABCDCBABCDCBABCDCBABCDCBABCDCB 1 A_ChangeVelocity(-velx,-vely,0,CVF_REPLACE)
COP1 A 0 A_Stop
JumpShoot:
COP1 A 0 A_TakeInventory ("Variable1",1)
COP1 A 0 A_ChangeFlag("LOWGRAVITY",TRUE)
COP1 A 0 A_PlaySound("misc/shutup",CHAN_VOICE,1.0)
COP1 ABCD 1 A_FaceTarget 
COP1 E 4 A_ChangeVelocity(0,4,10,CVF_RELATIVE|CVF_REPLACE)
COP1 F 4
COP1 GHI 2
COP1 J 0 A_ChangeFlag("INVULNERABLE",TRUE)
COP1 J 2 A_CustomMissile("Cop1Bullet_Angry",32,8,0)
COP1 KL 2 A_ChangeFlag("LOWGRAVITY",FALSE)
COP1 J 0 A_ChangeFlag("INVULNERABLE",TRUE)
COP1 J 2 A_CustomMissile("Cop1Bullet_Angry",32,8,0)
COP1 KL 2 A_ChangeFlag("LOWGRAVITY",FALSE)
COP1 J 0 A_ChangeFlag("INVULNERABLE",TRUE)
COP1 J 2 A_CustomMissile("Cop1Bullet_Angry",32,8,0)
COP1 K 4
COP1 L 17 A_ChangeFlag("LOWGRAVITY",FALSE)
COP1 L 0 A_JumpIfInventory("Variable1",1,"JumpShoot")
Goto Walk

Death.Fire:
"####" "#" 0 A_ChangeFlag("LOWGRAVITY",FALSE)
COP1 A 0 A_ChangeFlag("NOPAIN",TRUE)
COP1 A 0 A_ChangeFlag("INVULNERABLE",TRUE)
COP1 A 0 A_ChangeFlag("SHOOTABLE",FALSE)
COP1 A 0 A_TakeInventory("Variable1",70)
COP1 A 0 A_TakeInventory("Variable3",70)
COP1 A 0 ACS_NamedExecuteAlways("ColorCoin",0,3,0,0)
COP1 A 0 A_JumpIfInventory("Variable3",1,"Burn1")
TNT1 A 0 A_GiveInventory("Variable3",1)	//Variable3 indicates whether this enemy has already given a combo.
TNT1 A 0 A_RadiusGive("IncreaseCombo",512,RGF_PLAYERS)
TNT1 AAAAA 0 A_RadiusGive("ScoreX",512,RGF_PLAYERS)
Burn1:
COP1 B 0 A_JumpIfInventory("Variable2",1,"FireDeath")
COP1 A 0 A_PlaySound("grind/loop", CHAN_VOICE, 1.0, TRUE, 4.0)
COP1 AAAAAAAA 0 { A_RadiusGive("CDeath",384,RGF_MONSTERS|RGF_NOTARGET); A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(8,48),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION); }
TROL M 0 A_CustomMissile("BurningPerson",32,32,0,CMF_ABSOLUTEPITCH,-90)
COP1 A 1 A_Chase("","")
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckCoolOffTo2")
Burn2:
COP1 B 0 A_JumpIfInventory("Variable2",1,"FireDeath")
COP1 AAAAAAAA 0 { A_RadiusGive("CDeath",384,RGF_MONSTERS|RGF_NOTARGET); A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(8,48),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION); }
COP1 B 1 A_Chase("","")
COP1 AAAAAAAA 0 { A_RadiusGive("CDeath",384,RGF_MONSTERS|RGF_NOTARGET); A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(8,48),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION); }
TROL M 0 A_CustomMissile("BurningPerson",32,32,0,CMF_ABSOLUTEPITCH,-90)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckCoolOffTo3")
Burn3:
COP1 B 0 A_JumpIfInventory("Variable2",1,"FireDeath")
COP1 C 1 A_Chase("","")
COP1 AAAAAAAA 0 { A_RadiusGive("CDeath",384,RGF_MONSTERS|RGF_NOTARGET); A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(8,48),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION); }
COP1 B 1 A_Chase("","")
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckCoolOffTo4")
Burn4:
COP1 B 0 A_JumpIfInventory("Variable2",1,"FireDeath")
COP1 A 0 ACS_NamedExecuteAlways("ColorCoin",0,3,0,0)
COP1 A 0 A_ClearTarget
COP1 A 0 A_ClearLastHeard
COP1 B 0 A_GiveInventory("Variable1",1)
COP1 B 0 A_JumpIfInventory("Variable1",35,"FireDeath")
COP1 A 0 A_ChangeFlag("FRIENDLY",TRUE)
COP1 A 0 A_ChangeFlag("LOOKALLAROUND",TRUE)
COP1 A 0 A_LookEx(0, 0, 1024, 1024, 90, "Burn1")
Goto Burn1
CheckCoolOffTo2:
FIGH A 0 ACS_NamedExecuteAlways("GetSpecialStatus",0,0,TRUE,0)	//This checks if the enemy is in water and gives them the "Variable2" inventory item.
Goto Burn2
CheckCoolOffTo3:
FIGH A 0 ACS_NamedExecuteAlways("GetSpecialStatus",0,0,TRUE,0)	//This checks if the enemy is in water and gives them the "Variable2" inventory item.
Goto Burn3
CheckCoolOffTo4:
FIGH A 0 ACS_NamedExecuteAlways("GetSpecialStatus",0,0,TRUE,0)	//This checks if the enemy is in water and gives them the "Variable2" inventory item.
Goto Burn4
FireDeath:
COP1 A 0 A_ScreamAndUnblock
COP1 B 0 A_PlaySound("grind/end", CHAN_VOICE, 1.0, FALSE, 3.0)
COP1 ABCD 1 ACS_NamedExecuteAlways("ColorCoin",0,4,0,0)
Goto DieFire
Death:
Goto Die
JumpAway:
COP1 A 0 A_JumpIf(Args[0]==0, "RegainTarget")
COP1 A 0 A_ClearLastHeard
COP1 A 0 A_ClearTarget
COP1 ABC 2
COP1 D 35 A_PigPain
COP1 CB 3
Goto Spawn
RegainTarget:
COP1 A 1 A_FaceTarget
Goto See
FDeath:
TNT1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
TNT1 A 1 A_ScreamAndUnblock
Goto FadeOut
Die:
"####" "#" 0 A_ChangeFlag("LOWGRAVITY",FALSE)
TNT1 A 0 A_RadiusGive("CDeath",1024,RGF_MONSTERS|RGF_NOTARGET)
TNT1 A 0 A_StopSound(CHAN_VOICE)
COP1 P 0 A_ScreamAndUnblock
TNT1 A 0 A_RadiusGive("IncreaseCombo",512,RGF_PLAYERS)
TNT1 AAAAAAAAAA 0 A_RadiusGive("ScoreX",512,RGF_PLAYERS)
TNT1 A 0 A_JumpIfInventory("CryingBonus",1,"Reward")
DieFire:
TNT1 A 0 A_RadiusGive("CDeath",768,RGF_MONSTERS|RGF_NOTARGET)
COP1 PQRSTUV 3 A_RadiusGive("CDeath",320,RGF_MONSTERS|RGF_NOTARGET)
COP1 W -1 A_RadiusGive("CDeath",224,RGF_MONSTERS|RGF_NOTARGET)
KilledCop:
FadeOut:
RemoveBody:
TNT1 A 1 A_FadeOut(1,1)
Loop
Reward:	//If this enemy was provoked at least once by Mary crying, reward with coins!
COP1 A 0 ACS_NamedExecuteAlways("DropCoins",0,3,0,0)
Goto DieFire
DrownOwn:
//TNT1 A 0 A_GiveInventory("IncreaseCombo",1,AAPTR_TARGET)
//TNT1 A 0 A_GiveInventory("ScoreX",10,AAPTR_TARGET)
TNT1 A 0 A_PlaySound("generic/male_drown",CHAN_VOICE,1.0,FALSE,ATTN_IDLE)
Goto RemoveBody
Drown:
TNT1 A 0 A_StopSound(CHAN_VOICE)
TNT1 A 0 A_RadiusGive("CDeath",1024,RGF_MONSTERS|RGF_NOTARGET)
DANC A 0 ACS_NamedExecuteAlways("SpecialFall",0,-1,0,0)
Goto Stun_NoPain
Pain.Umbrella:
"####" "#" 0 A_ChangeFlag("LOWGRAVITY",FALSE)
"####" "#" 0 A_FaceTarget
"####" "#" 0 A_ChangeVelocity(-15,Random(-1.5,1.5),12.5,CVF_REPLACE|CVF_RELATIVE)
"####" "#" 0 A_JumpIfInventory("CDeath",1,"React")
"####" "#" 0 A_JumpIfInventory("CPain",1,"ReactPain")
Goto Pain
Pain.AirDash:
"####" "#" 0 A_ChangeFlag("LOWGRAVITY",FALSE)
"####" "#" 0 A_FaceTarget
"####" "#" 0 A_ChangeVelocity(-30,Random(-0.5,0.5),14.25,CVF_REPLACE|CVF_RELATIVE)
"####" "#" 0 A_JumpIfInventory("CDeath",1,"React")
"####" "#" 0 A_JumpIfInventory("CPain",1,"ReactPain")
Goto Pain
Pain.Flatten:
"####" "#" 0 A_ChangeFlag("LOWGRAVITY",FALSE)
"####" "#" 0 A_ChangeFlag("NOPAIN",TRUE)
"####" "#" 1 A_SetScale(1.0,0.75)
"####" "#" 1 A_SetScale(1.0,0.5)
"####" "#" 1 A_SetScale(1.0,0.34)
"####" "#" 1 A_SetScale(1.0,0.25)
"####" "#" 1 A_SetScale(1.0,0.2)
"####" "#" 1 A_SetScale(1.0,0.15)
"####" "#" 1 A_SetScale(1.0,0.2)
"####" "#" 1 A_SetScale(1.0,0.25)
"####" "#" 200 A_SetScale(1.0,0.2)
"####" "#" 1 A_SetScale(1.0,0.25)
"####" "#" 1 A_SetScale(1.0,0.34)
"####" "#" 1 A_SetScale(1.0,0.5)
"####" "#" 1 A_SetScale(1.0,0.75)
"####" "#" 1 A_SetScale(1.0,1.0)
"####" "#" 1 A_SetScale(1.0,1.05)
"####" "#" 1 A_SetScale(1.0,1.1)
"####" "#" 1 A_SetScale(1.0,1.05)
"####" "#" 1 A_SetScale(1.0,1.0)
"####" "#" 0 A_ChangeFlag("NOPAIN",FALSE)
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
Goto See
Pain.Stun:
"####" "#" 0 A_ChangeFlag("LOWGRAVITY",FALSE)
COP1 J 0 A_ChangeFlag("NOPAIN",TRUE)
COP1 P 0 A_DamageSelf(1)
Stun_NoPain:
COP1 J 0 A_GiveInventory("Weakness",1)
COP1 P 0 A_PlaySound("cop1/pain",CHAN_VOICE,1.0,FALSE,ATTN_STATIC)
COP1 PPQQPCPCPCPCPCP 1
COP1 J 0 A_ChangeFlag("NOPAIN",FALSE)
COP1 PCPCPCPCPCPPCCPPCCPPPCCC 10
COP1 J 0 A_TakeInventory("Weakness",1)
Goto Walk
}
}

actor Cop3_Enemy : XMonster 16
{
Radius 16
Height 56
Health 75
Scale 1.15
Speed 13
Damage 9
Translation "64:71=170:175", "240:254=247:254", "77:77=38:38", "216:223=132:135", "128:135=114:118", "196:196=169:169"
+SOLID
+LOOKALLAROUND
+MISSILEMORE
+MISSILEEVENMORE
+COUNTKILL
+NOPAIN
ActiveSound "cop3/talk"
PainSound "cop3/pain"
DeathSound "cop3/death"
//$Title HCPD Cop (Green)
States
{
Spawn:
TNT1 A 0
Drop:
COP1 A 0 A_CheckProximity("Drop2","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
Goto RemoveBody
Drop2:
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"CheckWLevel")
TNT1 A 1 A_CheckFloor("Look")
Goto Drop
CheckWLevel:
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)>=4,"BecomeBoat")
Goto RemoveBody
BecomeBoat:
COPB B 0 A_SpawnItem("CopBoat",32,32,FALSE)
Goto RemoveBody
Look:
TNT1 AAAAA 2 A_Look
Goto RemoveBody
See:
TNT1 A 0 A_CheckLOF("Intro")
Goto RemoveBody
Intro:
COPB B 0 A_StopSound(CHAN_7)
COPB B 0 A_ChangeFlag("INVULNERABLE",FALSE)
COPB B 0 A_SetScale(1.15)
TNT1 A 0 ACS_NamedExecuteAlways("ShowTutorial",0,4,1,1)
COP1 A 0 A_PlaySound("cop3/talk",CHAN_VOICE,1.0,FALSE,ATTN_IDLE)
COP1 AAAAA 2 A_FadeIn(0.2)
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
TNT1 A 0 A_ChangeFlag("NOPAIN",FALSE)
TNT1 A 0 A_ChangeFlag("NOGRAVITY",FALSE)
COPB B 0 A_ChangeFlag("LOWGRAVITY",FALSE)
TNT1 A 0 ACS_NamedExecuteAlways("CopSpawned",0,0,0,0)
TNT1 A 0 ACS_NamedExecuteAlways("EnemyAutoJump",0,2,2,0)	//2, 2: Powerful projectiles only and only two dodges!
Walk:
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 J 0 A_ChangeFlag("LOWGRAVITY",FALSE)
COP1 J 0 A_ChangeFlag("INVULNERABLE",FALSE)
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 A 0 A_CheckProximity("See2","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
Goto JumpAway
See2:
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
COP1 ABCD 3 A_Chase
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 J 0 A_CheckProximity("See3","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
Goto JumpAway
Dodge:	//Use with "EnemyAutoJump".
COP1 D 0 A_JumpIf(z-floorz>4.5,"NerfedJump")
COP1 D 1 A_ChangeVelocity(-0.75,0,12.5,CVF_REPLACE|CVF_RELATIVE)
COP1 D 0 A_PlaySound("cop3/jump",CHAN_VOICE,1.0)
COP1 E 1
JumpWait:
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"DrownOwn")
COP1 F 1 A_CheckFloor("Land")
COP1 A 0 A_CheckProximity("JumpWait","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
Goto RemoveBody
Land:
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 P 0 A_ChangeFlag("SKULLFLY",FALSE)
COP1 P 14
COP1 D 0 A_PlaySound("cop2/land",CHAN_VOICE,1.0)
COP1 CB 4
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
COP1 CPCPCPCB 10
Goto Walk
NerfedJump:
COP1 D 1 A_ChangeVelocity(-0.25,0,5.75,CVF_REPLACE|CVF_RELATIVE)
//COP1 D 0 A_PlaySound("cop3/jump",CHAN_VOICE,1.0)
COP1 E 1
Goto JumpWait
See3:
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
COP1 A 0 A_CheckProximity("See2","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
COP1 EDCB 3 A_Chase
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 J 0 A_CheckProximity("Walk","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
Goto JumpAway
ReactPain:
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 A 0 A_TakeInventory("CPain",1)
COP1 A 0 A_PlaySound("cop3/witness_pain",CHAN_AUTO,1.0)
Goto Missile
React:
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 A 0 A_PlaySound("cop3/witness",CHAN_VOICE,1.0)
COP1 AAABBBAABBABABACACADADCB 1
Angry:
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
AngryWalk:
COP1 ABCABCABC 2 A_Chase(0,0)
COP1 A 0 A_Jump(24,"TurretThrow_Angry_Check")
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 A 0 A_Jump(72,"Attempt")
COP1 J 0 A_CheckProximity("Angry","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
Goto JumpAway
Attempt:
COP1 D 2
COP1 I 0 A_CheckLOF("Proceed",CLOFF_JUMPENEMY)
Goto Angry
Proceed:
COP1 A 0 A_JumpIfCloser(512,"Proceed2",TRUE)
Goto Stun_NoPain
Proceed2:
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 AABBCGHI 2 A_FaceTarget
COP1 J 1 A_CustomMissile("Cop1Bullet_Angry",32,8,0)
COP1 K 1 A_PlaySound("weapon/gun1", CHAN_WEAPON,1.0,FALSE,0.5)
COP1 L 2
COP1 J 1 A_CustomMissile("Cop1Bullet_Angry",32,8,0)
COP1 K 1 A_PlaySound("weapon/gun1", CHAN_WEAPON,1.0,FALSE,0.5)
COP1 L 2
COP1 J 1 A_CustomMissile("Cop1Bullet_Angry",32,8,0)
COP1 K 2 A_PlaySound("weapon/gun1", CHAN_WEAPON,1.0,FALSE,0.5)
COP1 L 8
COP1 J 1 A_CustomMissile("Cop1Bullet_Angry",32,8,0)
COP1 K 1 A_PlaySound("weapon/gun1", CHAN_WEAPON,1.0,FALSE,0.5)
COP1 L 3
COP1 J 1 A_CustomMissile("Cop1Bullet_Angry",32,8,0)
COP1 K 1 A_PlaySound("weapon/gun1", CHAN_WEAPON,1.0,FALSE,0.5)
COP1 L 3
COP1 J 1 A_CustomMissile("Cop1Bullet_Angry",32,8,0)
COP1 K 2 A_PlaySound("weapon/gun1", CHAN_WEAPON,1.0,FALSE,0.5)
COP1 L 8
COP1 A 0 A_ChangeFlag("LOWGRAVITY",FALSE)
COP1 A 0 A_TakeInventory("CPain",1)
COP1 A 0 A_TakeInventory("CDeath",1)
Goto Walk
Missile:
COP1 A 0
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 A 2
COP1 I 0 A_CheckLOF("Fire_Cop3",CLOFF_JUMPENEMY)
COP1 J 0 A_CheckProximity("Missile2","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
Goto JumpAway
Fire_Cop3:
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 AABBCGHI 2 A_FaceTarget
COP1 J 3 A_CustomMissile("Cop1Bullet",32,8,0)
COP1 K 4 A_PlaySound("weapon/gun1", CHAN_WEAPON,1.0,FALSE,0.5)
COP1 L 6 A_FaceTarget
COP1 J 3 A_CustomMissile("Cop1Bullet",32,8,0)
COP1 K 4 A_PlaySound("weapon/gun1", CHAN_WEAPON,1.0,FALSE,0.5)
COP1 L 6 A_FaceTarget
COP1 A 0 A_ChangeFlag("LOWGRAVITY",FALSE)
COP1 A 0 A_Jump(32, "TurretThrow")
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 J 0 A_CheckProximity("Missile2","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
Goto JumpAway
TurretThrow:
COP1 A 0 A_JumPif(CallACS("GetPlayerInformation",0,0,0,0)==0,"Pain")	//If on easy difficulty, don't throw a turret.
TurretThrow_SkipCheck:
COP1 A 0 A_GiveInventory("DisableAutoJump",1)
COP1 ABCBDDPP 1
COP1 O 0 A_CustomMissile("Turret_Cop_Thrown",32,16,0,CMF_CHECKTARGETDEAD|CMF_ABSOLUTEPITCH,20)
COP1 A 0 A_TakeInventory("DisableAutoJump",1)
COP1 O 12
Goto Walk
TurretThrow_Angry_Check:
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)<6,"Walk")
TurretThrow_Angry:
COP1 D 0 A_Jumpif(CallACS("GetPlayerInformation",0,0,0,0)==0,"TurretThrow_SkipCheck")	//If on easy difficulty, throw a single turret.
COP1 A 0 A_GiveInventory("DisableAutoJump",1)
COP1 DP 2
COP1 O 0 A_CustomMissile("Turret_Cop_Thrown",32,16,-25,CMF_CHECKTARGETDEAD|CMF_ABSOLUTEPITCH,20)
COP1 A 0 A_TakeInventory("DisableAutoJump",1)
COP1 O 15
COP1 A 0 A_GiveInventory("DisableAutoJump",1)
COP1 P 3
COP1 O 20 A_CustomMissile("Turret_Cop_Thrown",32,16,25,CMF_CHECKTARGETDEAD|CMF_ABSOLUTEPITCH,20)
COP1 A 0 A_TakeInventory("DisableAutoJump",1)
Goto Angry
Missile2:
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 KLLL 2
COP1 AB 2
COP1 C 35
COP1 B 2
COP1 A 0 A_Jump(64, "TurretThrow")
Goto Walk
Pain:
COP1 A 0 A_TakeInventory("DisableAutoJump",1)
TIGR A 0 A_SpawnItem("HurtMonster",64,32)
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 P 0 A_Pain
COP1 P 6
TNT1 A 0 A_RadiusGive("CPain",768,RGF_MONSTERS|RGF_NOTARGET)
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
Goto Walk
Weakness:
COP1 A 0 A_TakeInventory("DisableAutoJump",1)
COP1 A 0 A_ChangeFlag("NOPAIN",TRUE)
COP1 A 0 A_TakeInventory("Weakness",1)
COP1 D 2 A_ChangeVelocity(-2,8,0,CVF_REPLACE|CVF_RELATIVE)
COP1 PPPPPPPPPPPPPPPP 1 A_ChangeVelocity(-velx,-vely,0,CVF_REPLACE)
COP1 D 6 A_ChangeVelocity(0,0,0,CVF_REPLACE)
COP1 A 0 A_DamageSelf(16)
COP1 A 0 A_ChangeFlag("NOPAIN",FALSE)
COP1 CB 3
COP1 A 0 A_JumpIfHealthLower(15,"FinishHim")
Goto Walk
FinishHim:
COP1 B 1 A_DamageSelf(15)
UNKN A 1 A_Log("ERROR: Cop didn't die from finisher!") 
Stop
Death.Fire:
COP1 A 0 A_GiveInventory("DisableAutoJump",1)
COP1 A 0 ACS_NamedExecuteAlways("RequestDispatcherMessage",0,0,0,0)
COP1 A 0 A_TakeInventory("Variable1",70)
COP1 A 0 ACS_NamedExecuteAlways("RequestDispatcherMessage",0,0,0,0)
COP1 A 0 ACS_NamedExecuteAlways("ColorCoin",0,3,0,0)
TNT1 A 0 A_RadiusGive("IncreaseCombo",512,RGF_PLAYERS)
TNT1 AAAAA 0 A_RadiusGive("ScoreX",512,RGF_PLAYERS)
Burn:
COP1 A 0 A_PlaySound("grind/loop", CHAN_VOICE, 1.0, TRUE, 4.0)
COP1 AAAAAAAA 0 { A_RadiusGive("CDeath",384,RGF_MONSTERS|RGF_NOTARGET); A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(8,48),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION); }
TROL M 0 A_CustomMissile("BurningPerson",32,32,0,CMF_ABSOLUTEPITCH,-90)
COP1 A 1 A_Chase("","")
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckCoolOffTo2")
Burn2:
COP1 AAAAAAAA 0 { A_RadiusGive("CDeath",384,RGF_MONSTERS|RGF_NOTARGET); A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(8,48),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION); }
COP1 B 1 A_Chase("","")
COP1 AAAAAAAA 0 { A_RadiusGive("CDeath",384,RGF_MONSTERS|RGF_NOTARGET); A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(8,48),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION); }
TROL M 0 A_CustomMissile("BurningPerson",32,32,0,CMF_ABSOLUTEPITCH,-90)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckCoolOffTo3")
Burn3:
COP1 C 1 A_Chase("","")
COP1 AAAAAAAA 0 { A_RadiusGive("CDeath",384,RGF_MONSTERS|RGF_NOTARGET); A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(8,48),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION); }
COP1 B 1 A_Chase("","")
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckCoolOffTo4")
Burn4:
COP1 A 0 ACS_NamedExecuteAlways("ColorCoin",0,3,0,0)
COP1 A 0 A_ClearTarget
COP1 A 0 A_ClearLastHeard
COP1 B 0 A_GiveInventory("Variable1",1)
COP1 B 0 A_JumpIfInventory("Variable1",35,"FireDeath")
COP1 A 0 A_ChangeFlag("FRIENDLY",TRUE)
COP1 A 0 A_ChangeFlag("LOOKALLAROUND",TRUE)
COP1 A 0 A_LookEx(0, 0, 1024, 1024, 90, "Burn")
Goto Burn
FireDeath:
TNT1 A 0 ACS_NamedExecuteAlways("AddWantedPoints",0,2,0,0)
COP1 A 0 A_ScreamAndUnblock
COP1 B 0 A_PlaySound("grind/end", CHAN_VOICE, 1.0, FALSE, 3.0)
COP1 ABCD 1 ACS_NamedExecuteAlways("ColorCoin",0,4,0,0)
Goto DieFire
CheckCoolOffTo2:
FIGH A 0 ACS_NamedExecuteAlways("GetSpecialStatus",0,0,TRUE,0)	//This checks if the enemy is in water and gives them the "Variable2" inventory item.
Goto Burn2
CheckCoolOffTo3:
FIGH A 0 ACS_NamedExecuteAlways("GetSpecialStatus",0,0,TRUE,0)	//This checks if the enemy is in water and gives them the "Variable2" inventory item.
Goto Burn3
CheckCoolOffTo4:
FIGH A 0 ACS_NamedExecuteAlways("GetSpecialStatus",0,0,TRUE,0)	//This checks if the enemy is in water and gives them the "Variable2" inventory item.
Goto Burn4
Death:
Goto Die
JumpAway:
TNT1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
COP1 DEE 3 A_ChangeVelocity(0,0,20,CVF_REPLACE)
COP1 F 0 A_ChangeVelocity(0,0,20,CVF_REPLACE)
FadeOutSlow:
COP1 F 1 A_FadeOut(0.1,1)
Loop
FDeath:
TNT1 A 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>1,"Drown")
TNT1 A 1 A_ScreamAndUnblock
Goto FadeOut
Die:
COP1 A 0 A_GiveInventory("DisableAutoJump",1)
TNT1 A 0 A_SetScale(1.15)
TNT1 A 0 A_StopSound(CHAN_VOICE)
TNT1 A 0 A_RadiusGive("IncreaseCombo",512,RGF_PLAYERS)
TNT1 AAAAAAAAAAAAAAA 0 A_RadiusGive("ScoreX",512,RGF_PLAYERS)
COP1 P 0 A_ScreamAndUnblock
DieFire:
TNT1 A 0 A_RadiusGive("CDeath",768,RGF_MONSTERS|RGF_NOTARGET)
COP1 PQRSTUV 3 A_RadiusGive("CDeath",320,RGF_MONSTERS|RGF_NOTARGET)
COP1 W 70 A_RadiusGive("CDeath",224,RGF_MONSTERS|RGF_NOTARGET)
COP1 XWXWXWXWYWYWYWYWY 1 A_RadiusGive("CDeath",96,RGF_MONSTERS|RGF_NOTARGET)
TNT1 A 1 A_RadiusGive("CDeath",64,RGF_MONSTERS|RGF_NOTARGET)
COP1 Y 1 A_RadiusGive("CDeath",64,RGF_MONSTERS|RGF_NOTARGET)
TNT1 A 1 A_RadiusGive("CDeath",64,RGF_MONSTERS|RGF_NOTARGET)
COP1 Y 1 A_RadiusGive("CDeath",64,RGF_MONSTERS|RGF_NOTARGET)
TNT1 A 1 A_RadiusGive("CDeath",64,RGF_MONSTERS|RGF_NOTARGET)
COP1 Y 1 A_RadiusGive("CDeath",64,RGF_MONSTERS|RGF_NOTARGET)
KilledCop:
TNT1 A 0 ACS_NamedExecuteAlways("AddWantedPoints",0,1,0,0)
FadeOut:
RemoveBody:
TNT1 A 1 A_FadeOut(1,1)
Loop
DrownOwn:
//TNT1 A 0 A_GiveInventory("IncreaseCombo",1,AAPTR_TARGET)
//TNT1 A 0 A_GiveInventory("ScoreX",10,AAPTR_TARGET)
TNT1 A 0 A_PlaySound("generic/male_drown",CHAN_VOICE,1.0,FALSE,ATTN_IDLE)
Goto RemoveBody
Drown:
TNT1 A 0 A_StopSound(CHAN_VOICE)
TNT1 A 0 A_RadiusGive("IncreaseCombo",512,RGF_PLAYERS)
TNT1 AAAAAAAAAAAAAAA 0 A_RadiusGive("ScoreX",512,RGF_PLAYERS)
TNT1 A 0 A_RadiusGive("CDeath",1024,RGF_MONSTERS|RGF_NOTARGET)
TNT1 A 0 A_PlaySound("generic/male_drown",CHAN_VOICE,1.0,FALSE,ATTN_IDLE)
Goto KilledCop
Fire:
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
COP1 AB 1
COP1 CG 17
COP1 HI 3
COP1 J 3 A_CustomMissile("Cop1Bullet",32,8,0)
COP1 J 0 A_CheckProximity("Missile2","PlayerPawn",1280.0,1,CPXF_ANCESTOR)
Goto JumpAway
//COMMON PAIN
Pain:
COP1 A 0 A_TakeInventory("DisableAutoJump",1)
COP1 J 0 A_JumpIfInventory("Weakness",1,"Weakness")
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 P 10 A_Pain
TNT1 A 0 A_RadiusGive("CPain",1000,RGF_MONSTERS|RGF_NOTARGET)
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
Goto Walk
Pain.Umbrella:
COP1 A 0 A_TakeInventory("DisableAutoJump",1)
COP1 J 0 A_JumpIfInventory("Weakness",1,"Weakness")
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
"####" "#" 0 A_FaceTarget
"####" "#" 0 A_ChangeVelocity(-12,Random(-1.5,1.5),13.5,CVF_REPLACE|CVF_RELATIVE)
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
Goto Pain
Pain.AirDash:
COP1 A 0 A_TakeInventory("DisableAutoJump",1)
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
"####" "#" 0 A_FaceTarget
"####" "#" 0 A_ChangeVelocity(-30,Random(-0.5,0.5),14.25,CVF_REPLACE|CVF_RELATIVE)
"####" "#" 0 A_JumpIfInventory("CDeath",1,"React")
"####" "#" 0 A_JumpIfInventory("CPain",1,"ReactPain")
Goto Pain
Pain.Flatten:
COP1 J 0 A_TakeInventory("DisableAutoJump",1)
COP1 J 0 A_JumpIfInventory("Weakness",1,"Weakness")
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 J 0 A_GiveInventory("DisableAutoJump",1)
"####" "#" 0 A_ChangeFlag("NOPAIN",TRUE)
"####" "#" 0 A_Pain
"####" "#" 1 A_SetScale(1.0,0.75)
"####" "#" 1 A_SetScale(1.0,0.5)
"####" "#" 1 A_SetScale(1.0,0.34)
"####" "#" 1 A_SetScale(1.0,0.25)
"####" "#" 1 A_SetScale(1.0,0.2)
"####" "#" 1 A_SetScale(1.0,0.15)
"####" "#" 1 A_SetScale(1.0,0.2)
"####" "#" 1 A_SetScale(1.0,0.25)
"####" "#" 250 A_SetScale(1.0,0.2)
"####" "#" 1 A_SetScale(1.0,0.25)
"####" "#" 1 A_SetScale(1.0,0.34)
"####" "#" 1 A_SetScale(1.0,0.6)
"####" "#" 1 A_SetScale(1.0,0.8)
"####" "#" 1 A_SetScale(1.0,1.075)
"####" "#" 1 A_SetScale(1.0,1.2)
"####" "#" 1 A_SetScale(1.0,1.4)
"####" "#" 1 A_SetScale(1.0,1.3)
"####" "#" 1 A_SetScale(1.0,1.2)
"####" "#" 0 A_ChangeFlag("NOPAIN",FALSE)
COP1 J 0 A_TakeInventory("DisableAutoJump",1)
COP1 A 0 A_JumpIfInventory("CDeath",1,"React")
COP1 A 0 A_JumpIfInventory("CPain",1,"ReactPain")
Goto Walk
Pain.Stun:
COP1 J 0 A_TakeInventory("DisableAutoJump",1)
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 J 0 A_ChangeFlag("NOPAIN",TRUE)
COP1 J 0 A_GiveInventory("Weakness",1)
COP1 P 0 A_DamageSelf(2)
Stun_NoPain:
COP1 J 0 A_TakeInventory("DisableAutoJump",1)
COP1 P 0 A_PlaySound("cop3/drown",CHAN_VOICE,1.0,FALSE,ATTN_STATIC)
COP1 PPQQPCPCPCPCPCP 1
COP1 J 0 A_ChangeFlag("NOPAIN",FALSE)
COP1 PCPCPCPCPCPPCCPPCCPPPCCC 10
COP1 J 0 A_TakeInventory("Weakness",1)
Goto Walk
Drown:
TNT1 A 0 A_RadiusGive("IncreaseCombo",512,RGF_PLAYERS)
TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_RadiusGive("ScoreX",512,RGF_PLAYERS)
TNT1 A 0 A_PlaySound("generic/male_drown",CHAN_VOICE,1.0,FALSE,ATTN_IDLE)
Goto KilledCop
//JUMPING
WalkC2:
COP1 J 0 A_JumpIf(ACS_NamedExecuteWithResult("GetWLevel",0,0,0,0)==0,"JumpAway")
COP1 D 2
COP1 D 0 A_CheckFloor("JumpPass")
Goto Walk
}
}


Actor Fighter1 : XMonster 17
{
Radius 12
Height 60
Health 150
Scale 0.85
Mass 300
Speed 9
Damage 6
//PainChance 236
//ActiveSound "m2/active"
PainSound "fighter/pain"
DeathSound "fighter/death"
+STRIFEDAMAGE
//$Title Fighter (Weak)
//$Arg0 Initial mode
States
{
Spawn:
FIGH G 0
FIGH G 0 A_JumpIf(Args[0]==1, "Await")
FIGH G 0 A_JumpIf(Args[0]==2, "WaitToJump")
FIGH G 0 A_JumpIf(Args[0]==3, "WaitToGrind")
FIGH G 3 A_LookEx(0, 64, 1024, 768, 85, "VictoryPose")
Loop
Await:
FIGH G 0 A_SpawnParticle("White",SPF_FULLBRIGHT,4,10,0,0,0,48)
FIGH G 0 A_LookEx(0, 72, 768, 1024, 60, "VictoryPose")
FIGH GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG 2 A_SpawnItem("DirectionIndicator",32,24)
Loop
WaitToJump:
FIGH G 2 A_LookEx(0, 48, 768, 64, 70, "JumpDown")
Loop
WaitToGrind:
FIGH G 2 A_LookEx(0, 0, 256, 384, 85, "MoveToRail")
Loop
MoveToRail:
FIGH F 5
FIGH B 4
FIGH ABCB 3 A_ChangeVelocity(-10,0,0,CVF_RELATIVE|CVF_REPLACE)
FIGH ABCBABCB 2
Stop
JumpDown:
FIGH F 4
FIGH BA 3
FIGH D 6
FIGH E 24 A_ChangeVelocity(7.5,Random(-0.5,0.5),10,CVF_REPLACE|CVF_RELATIVE)
JumpDownLoop:
FIGH E 0 A_CheckFloor("Land")
FIGH E 1 A_JumpIf(velz==0.0,"Land")
Loop
Land:
FIGH D 0 A_Quake(2,10,0,512)
FIGH D 0 A_Quake(1,20,0,384)
FIGH D 0 A_ChangeFlag("NOPAIN",TRUE)
FIGH DDDDD 1 A_SetScale(0.85, scaley-0.05)
FIGH D 4
FIGH DDDDD 1 A_SetScale(0.85, scaley+0.05)
FIGH D 0 A_ChangeFlag("NOPAIN",FALSE)
FIGH D 0 A_PlaySound("fighter/sight3",CHAN_VOICE,1.0)
Goto VictoryPoseTransition
VictoryPose:
FIGH D 0 A_PlaySound("fighter/sight",CHAN_VOICE,1.0)
FIGH FDBBBD 3
VictoryPoseTransition:
FIGH MNNNNNNMMMKKKKKKKKKDD 3
See:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
FIGH BBBAAABBBCCC 2 A_Chase("Melee","",CHF_NODIRECTIONTURN)
Loop
Melee:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
FIGH DLL 2
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
FIGH K 0 A_PlaySound("fighter/punch", CHAN_VOICE, 1.0)
FIGH KJ 2
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
FIGH N 24 A_SargAttack
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
FIGH JMKKD 2
Goto See
Grind:	//Grinding on a rail.
FIGH B 0 A_TakeInventory("ForceJump",1)
FIGH BC 4 A_JumpifInventory("ForceJump",1,"GrindEnd")
Goto Grind+1
GrindEnd:
FIGH D 4 A_ChangeVelocity(16,0,13,CVF_REPLACE|CVF_RELATIVE)
FIGH E 20
GrindEndLoop:
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
FIGH E 0 A_CheckFloor("GrindLand")
FIGH E 1 A_JumpIf(velz==0.0,"GrindLand")
Loop
GrindLand:
FIGH D 0 A_Pain
FIGH D 0 A_Quake(2,10,0,512)
FIGH D 0 A_Quake(1,20,0,384)
FIGH D 0 A_ChangeFlag("NOPAIN",TRUE)
FIGH DDDDD 1 A_SetScale(0.85, scaley-0.05)
FIGH D 4
FIGH DDDDD 1 A_SetScale(0.85, scaley+0.05)
FIGH D 0 A_ChangeFlag("NOPAIN",FALSE)
FIGH LM 3
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
Goto See
Pain:
FIGH J 0 A_ChangeFlag("INVULNERABLE",TRUE)
FIGH J 2 A_Pain
TIGR A 0 A_ChangeFlag("INVULNERABLE",FALSE)
FIGH J 2 A_FaceTarget
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
FIGH J 2 A_ChangeVelocity(-2,8,0,CVF_REPLACE|CVF_RELATIVE)
FIGH KKKKKKKKKKKKKKKK 1 A_ChangeVelocity(-velx,-vely,0,CVF_REPLACE)
FIGH D 6 A_ChangeVelocity(0,0,0,CVF_REPLACE)
Goto See
Pain.Stun:
FIGH J 2 A_Pain
FIGH J 2 A_ChangeVelocity(0,0,0,CVF_REPLACE)
FIGH K 12
FIGH J 4
Goto See
Pain.Bounce:
TIGR A 0 A_SpawnItem("HurtMonster",64,32)
FIGH H 0 A_PlaySound("fighter/knockout",CHAN_VOICE,1.0)
FIGH D 2 A_ChangeVelocity(-2,8,0,CVF_REPLACE|CVF_RELATIVE)
FIGH FFFFFFFFFFFFFFFF 1 A_ChangeVelocity(-velx,-vely,0,CVF_REPLACE)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
FIGH H 4 A_ChangeVelocity(0,0,0,CVF_REPLACE)
FIGH I 0 A_ChangeFlag("NOPAIN",TRUE)
FIGH I 225
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
FIGH GGGFFB 4
FIGH I 0 A_ChangeFlag("NOPAIN",FALSE)
Goto See
Pain.Flatten:
FIGH I 0 A_ChangeFlag("NOPAIN",TRUE)
FIGH DDDDD 1 A_SetScale(scalex, scaley-0.1)
FIGH DD 1 A_SetScale(scalex, scaley-0.05)
FIGH D 120
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckDeath")
FIGH FF 1 A_SetScale(scalex, scaley+0.05)
FIGH FFFFFDD 1 A_SetScale(scalex, scaley+0.1)
FIGH DB 1 A_SetScale(scalex, scaley-0.1)
FIGH I 0 A_ChangeFlag("NOPAIN",FALSE)
Goto Melee
Pain.Umbrella:
"####" "#" 0 A_FaceTarget
"####" "#" 0 A_ChangeVelocity(-5,Random(-2.25,2.25),8.5,CVF_REPLACE|CVF_RELATIVE)
Goto See
Pain.AirDash:
"####" "#" 0 A_FaceTarget
"####" "#" 0 A_ChangeVelocity(-30,Random(-0.5,0.5),14.25,CVF_REPLACE|CVF_RELATIVE)
Goto See
Death.Fire:
COP1 A 0 A_TakeInventory("Variable1",70)
COP1 A 0 A_TakeInventory("Variable2",4)
COP1 A 0 ACS_NamedExecuteAlways("ColorCoin",0,3,0,0)
TNT1 A 0 A_GiveInventory("IncreaseCombo",1,AAPTR_TARGET)
TNT1 A 0 A_GiveInventory("ScoreX",5,AAPTR_TARGET)
Burn:
COP1 A 0 A_PlaySound("grind/loop_old", CHAN_VOICE, 1.0, TRUE, 4.0)
COP1 AAAAAAAA 0 A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(8,48),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION)
TROL M 0 A_CustomMissile("BurningPerson",32,32,0,CMF_ABSOLUTEPITCH,-90)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckCoolOffTo2")
Burn2:
FIGH B 0 A_JumpIfInventory("Variable2",1,"FireDeath")
FIGH A 1 A_Chase("","")
COP1 AAAAAAAA 0 A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(8,48),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION)
FIGH D 1 A_Chase("","")
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckCoolOffTo3")
Burn3:
FIGH B 0 A_JumpIfInventory("Variable2",1,"FireDeath")
COP1 AAAAAAAA 0 A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(8,48),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION)
TROL M 0 A_CustomMissile("BurningPerson",32,32,0,CMF_ABSOLUTEPITCH,-90)
FIGH K 1 A_Chase("","")
COP1 AAAAAAAA 0 A_SpawnItemEx("FlowerProjectile3_Trail",0,Random(-16,16),Random(8,48),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION)
FIGH B 0 A_JumpIf(CallACS("GetSpecialStatus",0,0,0,0)>0,"CheckCoolOffTo4")
Burn4:
FIGH B 0 A_JumpIfInventory("Variable2",1,"FireDeath")
FIGH D 1 A_Chase("","")
COP1 A 0 ACS_NamedExecuteAlways("ColorCoin",0,3,0,0)
COP1 A 0 A_ClearTarget
COP1 A 0 A_ClearLastHeard
COP1 B 0 A_GiveInventory("Variable1",1)
COP1 B 0 A_JumpIfInventory("Variable1",35,"FireDeath")
COP1 A 0 A_ChangeFlag("FRIENDLY",TRUE)
COP1 A 0 A_ChangeFlag("LOOKALLAROUND",TRUE)
COP1 A 0 A_LookEx(0, 0, 1024, 1024, 90, "Burn")
Goto Burn
CheckCoolOffTo2:
FIGH A 0 ACS_NamedExecuteAlways("GetSpecialStatus",0,0,TRUE,0)	//This checks if the enemy is in water and gives them the "Variable2" inventory item.
Goto Burn2
CheckCoolOffTo3:
FIGH A 0 ACS_NamedExecuteAlways("GetSpecialStatus",0,0,TRUE,0)	//This checks if the enemy is in water and gives them the "Variable2" inventory item.
Goto Burn3
CheckCoolOffTo4:
FIGH A 0 ACS_NamedExecuteAlways("GetSpecialStatus",0,0,TRUE,0)	//This checks if the enemy is in water and gives them the "Variable2" inventory item.
Goto Burn4
FireDeath:
COP1 A 0
COP1 B 0 A_PlaySound("grind/end_old", CHAN_VOICE, 1.0, FALSE, 3.0)
FIGH FFFF 1 ACS_NamedExecuteAlways("ColorCoin",0,4,0,0)
FIGH GGGGGG 1
FIGH I -1
Stop
Death.Umbrella:
FIGH D 0 A_ScreamAndUnblock
FIGH D 0 A_FaceTarget
FIGH D 0 A_ChangeVelocity(-15,Random(-1.25,1.25),12.5,CVF_RELATIVE|CVF_REPLACE)
Goto FallLoop2
Death.AirDash:
FIGH D 0 A_NoBlocking
FIGH D 0 A_FaceTarget
FIGH D 0 A_ChangeVelocity(-30,Random(-0.25,0.25),15.5,CVF_RELATIVE|CVF_REPLACE)
QuickDeathFinish:
FIGH DF 2
Goto AwaitSplatter
CheckDeath:
FIGH A 0 ACS_NamedExecuteAlways("SpecialFall",0,-1,0,0)
Goto Pain.Bounce
Death:
FIGH D 0 A_ChangeFlag("NOCLIP",TRUE)
FIGH D 3 A_ChangeVelocity(-4,10,0,CVF_REPLACE|CVF_RELATIVE)
FIGH FFFFFFFFFFFFFFFFFFFFFF 1 A_ChangeVelocity(-velx,-vely,0,CVF_REPLACE)
FIGH H 0 A_ScreamAndUnblock
FIGH H 10 A_ChangeVelocity(Random(-2.5,2.5),Random(-2.5,2.5),13.75,CVF_REPLACE)
FallLoop:
FIGH H 0 A_CheckFloor("HitFloor")
FIGH H 0 A_JumpIf(velz==0.0,"HitFloor")
FIGH H 1
Loop
HitFloor:
FIGH I 1 A_Quake(2,10,0,384)
FIGH I 1 A_Quake(1,20,0,512)
FIGH I 10 A_ChangeVelocity(velx*2,vely*2,7.25,CVF_REPLACE)
FallLoop2:
FIGH H 0 A_CheckFloor("HitFloor2")
FIGH H 0 A_JumpIf(velz==0.0,"HitFloor2")
FIGH I 1
Loop
HitFloor2:
FIGH D 0 A_ChangeFlag("NOCLIP",FALSE)
FIGH I -1 A_Quake(1,20,0,384)
Stop
AwaitSplatter:
FIGH H 1
TIGR D 0 A_JumpIf(velx==0.0,"Explode")
TIGR D 0 A_JumpIf(vely==0.0,"Explode")
TIGR D 0 A_JumpIf(velz==0.0,"Explode")
Loop
Explode:
TNT1 A 0 A_Scream
FIGH I 0 A_Quake(2,10,0,384)
FIGH I 0 A_Quake(1,20,0,512)
TNT1 DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD 0 A_SpawnItemEx("BloodParts",0,0,0,Random(-4.5,4.5),Random(-4.5,4.5),Random(3,6),Random(0,360),SXF_TRANSFERTRANSLATION|SXF_NOCHECKPOSITION|SXF_CLIENTSIDE,12)
FadeOut:
TNT1 A 1 A_FadeOut(1,1)
Loop
}
}

Actor Fighter2 : Fighter1 18
{
Radius 4
Height 12
Health 200
Damage 8
Speed 12
Translation "242:247=56:60", "56:63=40:47"
//$Title Fighter (blue, 2)
}

Actor Turret1_Support
{
	Scale 1.75
	-SOLID
	+NOGRAVITY
	
	States
	{
	Spawn:
	TURR A 0
	TURR A 2
	TURR A 0 A_JumpIfMasterCloser(3072,"Spawn")
	Death:
	TURR A 1 A_FadeOut(0.5,1)
	Loop
	}
}

Actor Turret1_MarkingsFriendly
{
	Scale 1.75
	-SOLID
	+INTERPOLATEANGLES
	
	States
	{
	Spawn:
	TURR I 0
	See:
	TURR I 1 A_Warp(AAPTR_MASTER)
	TURR A 0 A_JumpIfMasterCloser(3072,"See")
	Death:
	TURR A 1 A_FadeOut(0.5,1)
	Loop
	}
}

Actor Turret1 : XMonster 19
{
Radius 20
Height 32
Scale 1.75
PainChance 255
FloatSpeed 8
Health 30	//The hammer does 30 damage. Set this to how much damage it deals to give it an advantage.
DamageFactor "Bounce", 0.0
DamageFactor "AirDash", 0.0
DamageFactor "Hammer", 2.0
-NOGRAVITY
+SOLID
-COUNTKILL
+DONTTHRUST
+INTERPOLATEANGLES
MONSTER
//$Title Turret
//$Category monsters/Turrets
var int user_angle;	//The initial angle the turret was spawned at; It'll try to return to this when deactivating.
var int user_storedangle;	//The angle last aimed at before firing, used to prevent firing lasers at the player.
States
{
Spawn:
TURR A 0
TURR A 0 ACS_NamedExecuteAlways("TurretUserVariables",0,1,angle,0)
//TURR A 0 A_ChangeVelocity(0,0,-16,CVF_REPLACE)
TURR A 1
TURR A 0 A_Stop
TURR A 0 A_SpawnItemEx("Turret1_Support",0,0,0,0,0,0,0,SXF_SETMASTER)
Spawn_NoSupport:
TURR B 3
TURR B 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 768, 0, 90, "ConfirmTarget")
Loop
ConfirmTarget:
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-10)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-20)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-30)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-40)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,10)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,20)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,30)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,40)
Goto Spawn_NoSupport
See:
TURR F 0 A_PlaySound("turret/move",CHAN_BODY,0.68,FALSE,0.95)
TURR B 8 A_ChangeVelocity(0,0,1.25,CVF_REPLACE)
TURR B 0 A_Stop
TURR CD 2
TURR F 0 A_StopSound(CHAN_BODY)
TURR E 15
TURR B 0 A_ChangeFlag("FLOAT",TRUE)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-10)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-20)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-30)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-40)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,10)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,20)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,30)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,40)
Goto FixRotationPrepare
Charge:
TURR F 0 A_PlaySound("turret/motor",CHAN_BODY,0.75,TRUE,1.05)
TURR FFFFFFGGGGGGGHHHHHH 1 A_FaceTarget(6.0,0.0)
TURR F 0 A_StopSound(CHAN_BODY)
TURR F 0 A_CheckLOF("MissileLoop", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0)
TURR F 0 A_CheckLOF("MissileLoop", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-10)
TURR F 0 A_CheckLOF("MissileLoop", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-20)
TURR F 0 A_CheckLOF("MissileLoop", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-30)
TURR F 0 A_CheckLOF("MissileLoop", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-40)
TURR F 0 A_CheckLOF("MissileLoop", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,10)
TURR F 0 A_CheckLOF("MissileLoop", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,20)
TURR F 0 A_CheckLOF("MissileLoop", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,30)
TURR F 0 A_CheckLOF("MissileLoop", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,40)
Goto FixRotationPrepare
MissileLoop:
TURR HGF 2
Goto Missile
CancelMissile:
TURR HGF 3
FixRotationPrepare:
TURR F 0 A_PlaySound("turret/motor",CHAN_BODY,0.75,TRUE,1.05)
TURR G 0 A_ChangeFlag("FLOAT",FALSE)
TURR G 0 A_SetAngle(floor(angle))	//Make sure it's not a decimal value.
FixRotation:
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-10)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-20)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-30)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,10)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,20)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,30)
TURR F 0 A_JumpIf(angle<user_angle,"RotateRight")
TURR F 0 A_JumpIf(angle>user_angle,"RotateLeft")
Revert:
TURR F 0 A_PlaySound("turret/shutdown", CHAN_BODY, 1.0, FALSE, 1.03)
TURR E 0 A_ClearTarget
TURR E 0 A_ChangeFlag("FLOAT",FALSE)
TURR E 0 A_ChangeVelocity(0,0,-2,CVF_REPLACE)
TURR EEDCB 3
TURR F 0 A_PlaySound("turret/motor",CHAN_BODY,0.75,TRUE,1.05)
TURR B 0 A_JumpIf(z-floorz>2.5,"RevertLoop")
RevertFinish:
TURR B 0 A_Stop
Goto Spawn_NoSupport
RevertLoop:
TURR B 1 A_ChangeVelocity(0,0,-2,CVF_REPLACE)
TURR B 0 A_JumpIf(z-floorz>2.5,"RevertLoop")
Goto RevertFinish
Missile:
TURR H 0 ACS_NamedExecuteAlways("TurretUserVariables",0,2,angle,0)
TURR A 0 A_PlaySound("weapon/laser", CHAN_WEAPON,1.0,FALSE,0.5)
TURR HHHGGGGFFFFEE 1 A_CustomMissile("Laser1",4.25,0,user_storedangle,CMF_AIMDIRECTION,0)
Goto See+3
RotateRight:
TURR E 1 A_Turn(5.0)
TURR F 0 A_JumpIf(angle+5>user_angle,"FixRotationFine")
Goto FixRotation
RotateLeft:
TURR E 1 A_Turn(-5.0)
TURR F 0 A_JumpIf(angle-5<user_angle,"FixRotationFine")
Goto FixRotation
FixRotationFine:
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-10)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-20)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-30)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,10)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,20)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,30)
TURR F 0 A_JumpIf(angle<user_angle,"RotateFineRight")
TURR F 0 A_JumpIf(angle>user_angle,"RotateFineLeft")
Goto Revert
RotateFineRight:
TURR E 1 A_Turn(1.0)
TURR F 0 A_JumpIf(angle+1>user_angle,"Revert")
TURR F 0 A_JumpIf(angle>=358,"Revert")
Goto FixRotationFine
RotateFineLeft:
TURR E 1 A_Turn(-1.0)
TURR F 0 A_JumpIf(angle-1<user_angle,"Revert")
Goto FixRotationFine
Pain:
TURR B 0 A_ChangeVelocity(0,0,0.5,CVF_REPLACE)
TURR B 0 A_Pain
TURR B 0 A_PlaySound("turret/motor",CHAN_BODY,0.75,TRUE,1.05)
TURR BBBBBBBB 1 A_SetAngle(45+angle, SPF_INTERPOLATE)
TURR BBBBBBBBBBBBBBBB 1 A_SetAngle(22.5+angle, SPF_INTERPOLATE)
TURR B 0 A_PlaySound("turret/move",CHAN_BODY,0.68,FALSE,0.95)
TURR BCDE 3
TURR E 0 A_ChangeFlag("FLOAT",TRUE)
Goto Charge
Death:
TURR B 0 A_ScreamAndUnblock
TURR BA 2 A_FadeOut(0.2,1)
FadeOutDeath:
TURR A 1 A_FadeOut(0.1,1)
Loop
Death.Fire:
TURR B 0 A_ChangeFlag("NOGRAVITY",TRUE)
TURR B 1 A_ChangeVelocity(0,6,0,CVF_REPLACE)
TURR B 1 A_ChangeVelocity(0,-12,0,CVF_REPLACE)
TURR B 1 A_ChangeVelocity(0,12,0,CVF_REPLACE)
TURR C 1 A_ChangeVelocity(0,-12,0,CVF_REPLACE)
TURR C 1 A_ChangeVelocity(0,12,0,CVF_REPLACE)
TURR C 1 A_ChangeVelocity(0,-12,0,CVF_REPLACE)
TURR D 1 A_ChangeVelocity(0,12,0,CVF_REPLACE)
TURR D 1 A_ChangeVelocity(0,-12,0,CVF_REPLACE)
TURR D 1 A_ChangeVelocity(0,12,0,CVF_REPLACE)
TURR E 1 A_ChangeVelocity(0,-12,0,CVF_REPLACE)
TURR E 1 A_ChangeVelocity(0,12,0,CVF_REPLACE)
TURR E 1 A_ChangeVelocity(0,-12,0,CVF_REPLACE)
TURR E 1 A_ChangeVelocity(0,6,0,CVF_REPLACE)
TURR EEEEEEEE 1 { A_Stop; A_SpawnItemEx("FlowerProjectile3_Trail",Random(-16,16),Random(-16,16),Random(6,12),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION);  }
TURR E 0 A_GiveInventory("Variable1",20)
GoInsane:
//TURR G 0 { ACS_NamedExecuteAlways("TurretUserVariables",0,2,angle,0); A_Turn(8.5); }
TURR HGFHGF 1 { A_CustomMissile("Laser1",4.25,0,user_storedangle,CMF_AIMDIRECTION,0); A_Turn(8.25); A_SpawnItemEx("FlowerProjectile3_Trail",Random(-16,16),Random(-16,16),Random(6,12),Random(-1,1),Random(-1,1),Random(5,7),0,SXF_NOCHECKPOSITION); }
TURR G 0 A_TakeInventory("Variable1",1)
TURR G 0 A_JumpIfInventory("Variable1",1,"GoInsane")
Stop
}
}

Actor Laser1
{
	Radius 8
	Height 16
	Scale  2.25
	Damage (1)
	Speed 42
	Alpha 0.5
	+BRIGHT
	PROJECTILE
	States
	{
		Spawn:
			LASR A 0
			LASR A 35
		Death:
			LASR A 2 A_FadeOut(1,1)
			Loop
	}
}

Actor Turret1_Lights : Turret1 20	//This is identical, the only difference being the dynamic lights attached to this object.
{ //$Title Laser Turret (Dynamic Lights)
}

Actor Turret1_Friendly : Turret1
{
Health 200
+FRIENDLY
+NOPAIN
-NOGRAVITY
States
{
Spawn:
TURR A 0
TURR A 0 ACS_NamedExecuteAlways("TurretUserVariables",0,1,angle,0)
TURR A 1 A_CheckFloor("SpawnSupport")
TURR A 0 A_JumpIf(velz==0.0,"SpawnSupport")
Loop
SpawnSupport:
TURR A 0 A_ChangeFlag("NOGRAVITY",TRUE)
//TURR A 1 A_ChangeVelocity(0,0,-7,CVF_REPLACE)
TURR A 0 A_Stop
TURR B 0 A_GiveInventory("Variable2",10)	//Used for ammo until the turret disappears.
TURR A 0 A_SpawnItemEx("Turret1_Support",0,0,0,0,0,0,0,SXF_SETMASTER)
TURR A 0 A_SpawnItemEx("Turret1_MarkingsFriendly",0,0,0,0,0,0,0,SXF_SETMASTER)
Idle:
TURR B 0 A_GiveInventory("Variable1",70)	//Used for a timer until a scan is started.
TURR B 0 A_GiveInventory("Variable2",10)	//Used for ammo until the turret disappears.
Search:
TURR B 2 A_TakeInventory("Variable1",1)
TURR B 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 768, 0, 70, "ConfirmTarget")
TURR B 0 A_JumpIfInventory("Variable1",1,"Search")
BeginScan:
TURR B 0 A_GiveInventory("Variable1",20)
TURR C 0 A_PlaySound("turret/move",CHAN_BODY,0.68,FALSE,0.95)
TURR B 4 A_ChangeVelocity(0,0,2.5,CVF_REPLACE)
TURR B 0 A_Stop
TURR CD 1
Scan:
TURR C 0 A_PlaySound("turret/motor",CHAN_BODY,0.75,FALSE,0.95)
TURR E 1 A_Turn(-12.75)
TURR E 0 A_TakeInventory("Variable1",1)
TURR B 0 A_LookEx(LOF_NOSOUNDCHECK, 0, 768, 0, 70, "Charge")
TURR E 0 A_JumpIfInventory("Variable1",1,"Scan")
Goto FixRotationPrepare
ConfirmTarget:
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-10)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-20)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-30)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-40)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,10)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,20)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,30)
TNT1 A 0 A_CheckLOF("See", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,40)
Goto Spawn_NoSupport
See:
TURR B 0 A_ChangeFlag("FLOAT",TRUE)
TURR B 8 A_ChangeVelocity(0,0,1.25,CVF_REPLACE)
TURR B 0 A_Stop
TURR CD 2
See_Return:
TURR E 15 A_JumpIfHealthLower(1,"FixRotationPrepare",AAPTR_TARGET)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-10)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-20)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-30)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-40)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,10)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,20)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,30)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,40)
Goto FixRotationPrepare
Charge:
TURR G 0 A_ChangeFlag("FLOAT",TRUE)
TURR C 0 A_PlaySound("turret/motor",CHAN_BODY,0.75,FALSE,0.95)
TURR FFFFFFGGGGGGGHHHHHH 1 A_FaceTarget(6.0,0.0)
TURR H 0 A_JumpIfHealthLower(1,"FixRotationPrepare",AAPTR_TARGET)
TURR F 0 A_CheckLOF("Missile", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0)
TURR F 0 A_CheckLOF("Missile", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-10)
TURR F 0 A_CheckLOF("Missile", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-20)
TURR F 0 A_CheckLOF("Missile", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-30)
TURR F 0 A_CheckLOF("Missile", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-40)
TURR F 0 A_CheckLOF("Missile", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,10)
TURR F 0 A_CheckLOF("Missile", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,20)
TURR F 0 A_CheckLOF("Missile", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,30)
TURR F 0 A_CheckLOF("Missile", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,40)
Goto FixRotationPrepare
CancelMissile:
TURR H 0 A_StopSound(CHAN_BODY)
TURR HGF 3
FixRotationPrepare:
TURR G 0 A_StopSound(CHAN_BODY)
TURR G 0 A_ChangeFlag("FLOAT",FALSE)
TURR G 0 A_SetAngle(floor(angle))	//Make sure it's not a decimal value.
FixRotation:
TURR C 0 A_ClearTarget
TURR C 0 A_ClearSoundTarget
TURR C 0 A_ClearLastHeard
TURR C 0 
TURR C 0 A_PlaySound("turret/motor",CHAN_BODY,0.75,FALSE,0.95)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-10)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-20)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-30)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,10)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,20)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,30)
TURR F 0 A_JumpIf(angle<user_angle,"RotateRight")
TURR F 0 A_JumpIf(angle>user_angle,"RotateLeft")
Revert:
TURR E 0 A_ClearTarget
TURR E 0 A_ChangeFlag("FLOAT",FALSE)
//TURR C 0 A_PlaySound("turret/motor",CHAN_BODY,0.75,FALSE,0.95)
TURR E 0 A_PlaySound("turret/shutdown", CHAN_BODY, 1.0, FALSE, 1.03)
TURR E 0 A_ChangeVelocity(0,0,-2,CVF_REPLACE)
TURR EEDCB 3
TURR B 0 A_JumpIf(z-floorz>2.5,"RevertLoop")
RevertFinish:
TURR B 0 A_Stop
Goto Idle
RevertLoop:
TURR B 1 A_ChangeVelocity(0,0,-2,CVF_REPLACE)
TURR B 0 A_JumpIf(z-floorz>2.5,"RevertLoop")
Goto RevertFinish
Missile:
TURR H 0 ACS_NamedExecuteAlways("TurretUserVariables",0,2,angle,0)
TURR A 0 A_PlaySound("weapon/laser", CHAN_WEAPON,1.0,FALSE,0.5)
TURR HHHGGGGFFFFEE 1 A_CustomMissile("Laser1",4.25,0,user_storedangle,CMF_AIMDIRECTION,0)
TURR H 0 A_DamageSelf(20)
TURR E 0 A_TakeInventory("Variable2",1)
TURR E 0 A_JumpIfInventory("Variable2",1,"See_Return")
Death:
FadeOut:
TURR E 1 A_FadeOut(0.1,1)
Loop
RotateRight:
TURR E 1 A_Turn(5.0)
TURR F 0 A_JumpIf(angle+5>user_angle,"FixRotationFine")
Goto FixRotation
RotateLeft:
TURR E 1 A_Turn(-5.0)
TURR F 0 A_JumpIf(angle-5<user_angle,"FixRotationFine")
Goto FixRotation
FixRotationFine:
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-10)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-20)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,-30)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,10)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,20)
TURR F 0 A_CheckLOF("Charge", CLOFF_NOAIM_HORZ|CLOFF_AIM_VERT_NOOFFSET|CLOFF_MUSTBESOLID,768,0,30)
TURR F 0 A_JumpIf(angle<user_angle,"RotateFineRight")
TURR F 0 A_JumpIf(angle>user_angle,"RotateFineLeft")
Goto Revert
RotateFineRight:
TURR E 1 A_Turn(1.0)
TURR F 0 A_JumpIf(angle+1>user_angle,"Revert")
TURR F 0 A_JumpIf(angle>=358,"Revert")
Goto FixRotationFine
RotateFineLeft:
TURR E 1 A_Turn(-1.0)
TURR F 0 A_JumpIf(angle-1<user_angle,"Revert")
Goto FixRotationFine
}
}

Actor DirectionIndicator	//Used to indicate where limited-sight enemies are looking.
{
Scale 0.75
RenderStyle Add
+NOGRAVITY
+NOINTERACTION
States
{
Spawn:
UNKN A 0
UNKN A 1
Death:
UNKN A 1 A_FadeOut(0.5,1)
Loop
}
}